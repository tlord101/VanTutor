// This service worker is intentionally kept simple.
// It's primarily here to enable the Push API and PWA features.

self.addEventListener('install', () => {
  // Activate the new service worker as soon as it's installed.
  self.skipWaiting();
});

self.addEventListener('activate', event => {
  // Take control of all pages under this service worker's scope immediately.
  event.waitUntil(self.clients.claim());
});

// A listener for push events from a server would go here.
// For now, notifications are triggered from the client via navigator.serviceWorker.ready.
self.addEventListener('push', event => {
  const data = event.data.json();
  const title = data.title || "VANTUTOR";
  const options = {
    body: data.message,
    icon: 'data:image/svg+xml;charset=UTF-8,%3Csvg%20viewBox%3D%220%200%2052%2042%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M4.33331%2017.5L26%204.375L47.6666%2017.5L26%2030.625L4.33331%2017.5Z%22%20stroke%3D%22%23A3E635%22%20stroke-width%3D%224%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3Cpath%20d%3D%22M41.5%2021V29.75C41.5%2030.825%2040.85%2032.55%2039.4166%2033.25L27.75%2039.375C26.6666%2039.9%2025.3333%2039.9%2024.25%2039.375L12.5833%2033.25C11.15%2032.55%2010.5%2030.825%2010.5%2029.75V21%22%20stroke%3D%22%23A3E635%22%20stroke-width%3D%224%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3Cpath%20d%3D%22M47.6667%2017.5V26.25%22%20stroke%3D%22%23A3E635%22%20stroke-width%3D%224%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fsvg%3E',
  };
  event.waitUntil(self.registration.showNotification(title, options));
});
