(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function fh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zm={exports:{}},Vu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function rN(){if(pE)return Vu;pE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Vu.Fragment=e,Vu.jsx=n,Vu.jsxs=n,Vu}var mE;function sN(){return mE||(mE=1,zm.exports=rN()),zm.exports}var S=sN(),qm={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE;function oN(){if(gE)return Fe;gE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),E=Symbol.iterator;function w(G){return G===null||typeof G!="object"?null:(G=E&&G[E]||G["@@iterator"],typeof G=="function"?G:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,F={};function O(G,W,M){this.props=G,this.context=W,this.refs=F,this.updater=M||b}O.prototype.isReactComponent={},O.prototype.setState=function(G,W){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,W,"setState")},O.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function H(){}H.prototype=O.prototype;function B(G,W,M){this.props=G,this.context=W,this.refs=F,this.updater=M||b}var X=B.prototype=new H;X.constructor=B,L(X,O.prototype),X.isPureReactComponent=!0;var ne=Array.isArray;function Y(){}var R={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function D(G,W,M){var se=M.ref;return{$$typeof:t,type:G,key:W,ref:se!==void 0?se:null,props:M}}function I(G,W){return D(G.type,W,G.props)}function U(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function z(G){var W={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(M){return W[M]})}var k=/\/+/g;function oe(G,W){return typeof G=="object"&&G!==null&&G.key!=null?z(""+G.key):W.toString(36)}function me(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Y,Y):(G.status="pending",G.then(function(W){G.status==="pending"&&(G.status="fulfilled",G.value=W)},function(W){G.status==="pending"&&(G.status="rejected",G.reason=W)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function K(G,W,M,se,ge){var Te=typeof G;(Te==="undefined"||Te==="boolean")&&(G=null);var Ae=!1;if(G===null)Ae=!0;else switch(Te){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(G.$$typeof){case t:case e:Ae=!0;break;case p:return Ae=G._init,K(Ae(G._payload),W,M,se,ge)}}if(Ae)return ge=ge(G),Ae=se===""?"."+oe(G,0):se,ne(ge)?(M="",Ae!=null&&(M=Ae.replace(k,"$&/")+"/"),K(ge,W,M,"",function(on){return on})):ge!=null&&(U(ge)&&(ge=I(ge,M+(ge.key==null||G&&G.key===ge.key?"":(""+ge.key).replace(k,"$&/")+"/")+Ae)),W.push(ge)),1;Ae=0;var Re=se===""?".":se+":";if(ne(G))for(var ze=0;ze<G.length;ze++)se=G[ze],Te=Re+oe(se,ze),Ae+=K(se,W,M,Te,ge);else if(ze=w(G),typeof ze=="function")for(G=ze.call(G),ze=0;!(se=G.next()).done;)se=se.value,Te=Re+oe(se,ze++),Ae+=K(se,W,M,Te,ge);else if(Te==="object"){if(typeof G.then=="function")return K(me(G),W,M,se,ge);throw W=String(G),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function he(G,W,M){if(G==null)return G;var se=[],ge=0;return K(G,se,"","",function(Te){return W.call(M,Te,ge++)}),se}function Se(G){if(G._status===-1){var W=G._result;W=W(),W.then(function(M){(G._status===0||G._status===-1)&&(G._status=1,G._result=M)},function(M){(G._status===0||G._status===-1)&&(G._status=2,G._result=M)}),G._status===-1&&(G._status=0,G._result=W)}if(G._status===1)return G._result.default;throw G._result}var Ie=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},q={map:he,forEach:function(G,W,M){he(G,function(){W.apply(this,arguments)},M)},count:function(G){var W=0;return he(G,function(){W++}),W},toArray:function(G){return he(G,function(W){return W})||[]},only:function(G){if(!U(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Fe.Activity=y,Fe.Children=q,Fe.Component=O,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=B,Fe.StrictMode=i,Fe.Suspense=h,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(G){return R.H.useMemoCache(G)}},Fe.cache=function(G){return function(){return G.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(G,W,M){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var se=L({},G.props),ge=G.key;if(W!=null)for(Te in W.key!==void 0&&(ge=""+W.key),W)!P.call(W,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&W.ref===void 0||(se[Te]=W[Te]);var Te=arguments.length-2;if(Te===1)se.children=M;else if(1<Te){for(var Ae=Array(Te),Re=0;Re<Te;Re++)Ae[Re]=arguments[Re+2];se.children=Ae}return D(G.type,ge,se)},Fe.createContext=function(G){return G={$$typeof:l,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},Fe.createElement=function(G,W,M){var se,ge={},Te=null;if(W!=null)for(se in W.key!==void 0&&(Te=""+W.key),W)P.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ge[se]=W[se]);var Ae=arguments.length-2;if(Ae===1)ge.children=M;else if(1<Ae){for(var Re=Array(Ae),ze=0;ze<Ae;ze++)Re[ze]=arguments[ze+2];ge.children=Re}if(G&&G.defaultProps)for(se in Ae=G.defaultProps,Ae)ge[se]===void 0&&(ge[se]=Ae[se]);return D(G,Te,ge)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(G){return{$$typeof:c,render:G}},Fe.isValidElement=U,Fe.lazy=function(G){return{$$typeof:p,_payload:{_status:-1,_result:G},_init:Se}},Fe.memo=function(G,W){return{$$typeof:f,type:G,compare:W===void 0?null:W}},Fe.startTransition=function(G){var W=R.T,M={};R.T=M;try{var se=G(),ge=R.S;ge!==null&&ge(M,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Y,Ie)}catch(Te){Ie(Te)}finally{W!==null&&M.types!==null&&(W.types=M.types),R.T=W}},Fe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Fe.use=function(G){return R.H.use(G)},Fe.useActionState=function(G,W,M){return R.H.useActionState(G,W,M)},Fe.useCallback=function(G,W){return R.H.useCallback(G,W)},Fe.useContext=function(G){return R.H.useContext(G)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(G,W){return R.H.useDeferredValue(G,W)},Fe.useEffect=function(G,W){return R.H.useEffect(G,W)},Fe.useEffectEvent=function(G){return R.H.useEffectEvent(G)},Fe.useId=function(){return R.H.useId()},Fe.useImperativeHandle=function(G,W,M){return R.H.useImperativeHandle(G,W,M)},Fe.useInsertionEffect=function(G,W){return R.H.useInsertionEffect(G,W)},Fe.useLayoutEffect=function(G,W){return R.H.useLayoutEffect(G,W)},Fe.useMemo=function(G,W){return R.H.useMemo(G,W)},Fe.useOptimistic=function(G,W){return R.H.useOptimistic(G,W)},Fe.useReducer=function(G,W,M){return R.H.useReducer(G,W,M)},Fe.useRef=function(G){return R.H.useRef(G)},Fe.useState=function(G){return R.H.useState(G)},Fe.useSyncExternalStore=function(G,W,M){return R.H.useSyncExternalStore(G,W,M)},Fe.useTransition=function(){return R.H.useTransition()},Fe.version="19.2.0",Fe}var yE;function yy(){return yE||(yE=1,qm.exports=oN()),qm.exports}var de=yy();const Gi=fh(de);var Bm={exports:{}},Uu={},Hm={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function aN(){return _E||(_E=1,(function(t){function e(K,he){var Se=K.length;K.push(he);e:for(;0<Se;){var Ie=Se-1>>>1,q=K[Ie];if(0<s(q,he))K[Ie]=he,K[Se]=q,Se=Ie;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var he=K[0],Se=K.pop();if(Se!==he){K[0]=Se;e:for(var Ie=0,q=K.length,G=q>>>1;Ie<G;){var W=2*(Ie+1)-1,M=K[W],se=W+1,ge=K[se];if(0>s(M,Se))se<q&&0>s(ge,M)?(K[Ie]=ge,K[se]=Se,Ie=se):(K[Ie]=M,K[W]=Se,Ie=W);else if(se<q&&0>s(ge,Se))K[Ie]=ge,K[se]=Se,Ie=se;else break e}}return he}function s(K,he){var Se=K.sortIndex-he.sortIndex;return Se!==0?Se:K.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],f=[],p=1,y=null,E=3,w=!1,b=!1,L=!1,F=!1,O=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function X(K){for(var he=n(f);he!==null;){if(he.callback===null)i(f);else if(he.startTime<=K)i(f),he.sortIndex=he.expirationTime,e(h,he);else break;he=n(f)}}function ne(K){if(L=!1,X(K),!b)if(n(h)!==null)b=!0,Y||(Y=!0,z());else{var he=n(f);he!==null&&me(ne,he.startTime-K)}}var Y=!1,R=-1,P=5,D=-1;function I(){return F?!0:!(t.unstable_now()-D<P)}function U(){if(F=!1,Y){var K=t.unstable_now();D=K;var he=!0;try{e:{b=!1,L&&(L=!1,H(R),R=-1),w=!0;var Se=E;try{t:{for(X(K),y=n(h);y!==null&&!(y.expirationTime>K&&I());){var Ie=y.callback;if(typeof Ie=="function"){y.callback=null,E=y.priorityLevel;var q=Ie(y.expirationTime<=K);if(K=t.unstable_now(),typeof q=="function"){y.callback=q,X(K),he=!0;break t}y===n(h)&&i(h),X(K)}else i(h);y=n(h)}if(y!==null)he=!0;else{var G=n(f);G!==null&&me(ne,G.startTime-K),he=!1}}break e}finally{y=null,E=Se,w=!1}he=void 0}}finally{he?z():Y=!1}}}var z;if(typeof B=="function")z=function(){B(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,oe=k.port2;k.port1.onmessage=U,z=function(){oe.postMessage(null)}}else z=function(){O(U,0)};function me(K,he){R=O(function(){K(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(K){switch(E){case 1:case 2:case 3:var he=3;break;default:he=E}var Se=E;E=he;try{return K()}finally{E=Se}},t.unstable_requestPaint=function(){F=!0},t.unstable_runWithPriority=function(K,he){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Se=E;E=K;try{return he()}finally{E=Se}},t.unstable_scheduleCallback=function(K,he,Se){var Ie=t.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ie+Se:Ie):Se=Ie,K){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Se+q,K={id:p++,callback:he,priorityLevel:K,startTime:Se,expirationTime:q,sortIndex:-1},Se>Ie?(K.sortIndex=Se,e(f,K),n(h)===null&&K===n(f)&&(L?(H(R),R=-1):L=!0,me(ne,Se-Ie))):(K.sortIndex=q,e(h,K),b||w||(b=!0,Y||(Y=!0,z()))),K},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(K){var he=E;return function(){var Se=E;E=he;try{return K.apply(this,arguments)}finally{E=Se}}}})(Gm)),Gm}var vE;function lN(){return vE||(vE=1,Hm.exports=aN()),Hm.exports}var jm={exports:{}},In={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function uN(){if(TE)return In;TE=1;var t=yy();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,In.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,p)},In.flushSync=function(h){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=f,i.p=p,i.d.f()}},In.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},In.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},In.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin),E=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:E,fetchPriority:w}):p==="script"&&i.d.X(h,{crossOrigin:y,integrity:E,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},In.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},In.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin);i.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},In.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},In.requestFormReset=function(h){i.d.r(h)},In.unstable_batchedUpdates=function(h,f){return h(f)},In.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},In.useFormStatus=function(){return l.H.useHostTransitionStatus()},In.version="19.2.0",In}var EE;function cN(){if(EE)return jm.exports;EE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jm.exports=uN(),jm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function fN(){if(SE)return Uu;SE=1;var t=lN(),e=yy(),n=cN();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function h(r){if(a(r)!==r)throw Error(i(188))}function f(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,d=o;;){var _=u.return;if(_===null)break;var T=_.alternate;if(T===null){if(d=_.return,d!==null){u=d;continue}break}if(_.child===T.child){for(T=_.child;T;){if(T===u)return h(_),r;if(T===d)return h(_),o;T=T.sibling}throw Error(i(188))}if(u.return!==d.return)u=_,d=T;else{for(var x=!1,N=_.child;N;){if(N===u){x=!0,u=_,d=T;break}if(N===d){x=!0,d=_,u=T;break}N=N.sibling}if(!x){for(N=T.child;N;){if(N===u){x=!0,u=T,d=_;break}if(N===d){x=!0,d=T,u=_;break}N=N.sibling}if(!x)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function p(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=p(r),o!==null)return o;r=r.sibling}return null}var y=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),B=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var k=Symbol.for("react.client.reference");function oe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===k?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case L:return"Fragment";case O:return"Profiler";case F:return"StrictMode";case ne:return"Suspense";case Y:return"SuspenseList";case D:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case B:return r.displayName||"Context";case H:return(r._context.displayName||"Context")+".Consumer";case X:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return o=r.displayName||null,o!==null?o:oe(r.type)||"Memo";case P:o=r._payload,r=r._init;try{return oe(r(o))}catch{}}return null}var me=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Ie=[],q=-1;function G(r){return{current:r}}function W(r){0>q||(r.current=Ie[q],Ie[q]=null,q--)}function M(r,o){q++,Ie[q]=r.current,r.current=o}var se=G(null),ge=G(null),Te=G(null),Ae=G(null);function Re(r,o){switch(M(Te,o),M(ge,r),M(se,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?UT(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=UT(o),r=OT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}W(se),M(se,r)}function ze(){W(se),W(ge),W(Te)}function on(r){r.memoizedState!==null&&M(Ae,r);var o=se.current,u=OT(o,r.type);o!==u&&(M(ge,r),M(se,u))}function Dt(r){ge.current===r&&(W(se),W(ge)),Ae.current===r&&(W(Ae),Mu._currentValue=Se)}var yt,qt;function Nt(r){if(yt===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);yt=o&&o[1]||"",qt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yt+r+qt}var mi=!1;function qn(r,o){if(!r||mi)return"";mi=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(re){var te=re}Reflect.construct(r,[],fe)}else{try{fe.call()}catch(re){te=re}r.call(fe.prototype)}}else{try{throw Error()}catch(re){te=re}(fe=r())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=d.DetermineComponentFrameRoot(),x=T[0],N=T[1];if(x&&N){var j=x.split(`
`),ee=N.split(`
`);for(_=d=0;d<j.length&&!j[d].includes("DetermineComponentFrameRoot");)d++;for(;_<ee.length&&!ee[_].includes("DetermineComponentFrameRoot");)_++;if(d===j.length||_===ee.length)for(d=j.length-1,_=ee.length-1;1<=d&&0<=_&&j[d]!==ee[_];)_--;for(;1<=d&&0<=_;d--,_--)if(j[d]!==ee[_]){if(d!==1||_!==1)do if(d--,_--,0>_||j[d]!==ee[_]){var ae=`
`+j[d].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=d&&0<=_);break}}}finally{mi=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Nt(u):""}function Bn(r,o){switch(r.tag){case 26:case 27:case 5:return Nt(r.type);case 16:return Nt("Lazy");case 13:return r.child!==o&&o!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return qn(r.type,!1);case 11:return qn(r.type.render,!1);case 1:return qn(r.type,!0);case 31:return Nt("Activity");default:return""}}function Qi(r){try{var o="",u=null;do o+=Bn(r,u),u=r,r=r.return;while(r);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var je=Object.prototype.hasOwnProperty,rt=t.unstable_scheduleCallback,Hn=t.unstable_cancelCallback,us=t.unstable_shouldYield,sa=t.unstable_requestPaint,gn=t.unstable_now,Ir=t.unstable_getCurrentPriorityLevel,ue=t.unstable_ImmediatePriority,_e=t.unstable_UserBlockingPriority,De=t.unstable_NormalPriority,Ye=t.unstable_LowPriority,lt=t.unstable_IdlePriority,Cn=t.log,gi=t.unstable_setDisableYieldValue,Bt=null,Pt=null;function cn(r){if(typeof Cn=="function"&&gi(r),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Bt,r)}catch{}}var tt=Math.clz32?Math.clz32:zc,Mi=Math.log,bn=Math.LN2;function zc(r){return r>>>=0,r===0?32:31-(Mi(r)/bn|0)|0}var Xi=256,fo=262144,$t=4194304;function Wi(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Zi(r,o,u){var d=r.pendingLanes;if(d===0)return 0;var _=0,T=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var N=d&134217727;return N!==0?(d=N&~T,d!==0?_=Wi(d):(x&=N,x!==0?_=Wi(x):u||(u=N&~r,u!==0&&(_=Wi(u))))):(N=d&~T,N!==0?_=Wi(N):x!==0?_=Wi(x):u||(u=d&~r,u!==0&&(_=Wi(u)))),_===0?0:o!==0&&o!==_&&(o&T)===0&&(T=_&-_,u=o&-o,T>=u||T===32&&(u&4194048)!==0)?o:_}function Di(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Gh(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var r=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),r}function er(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function ho(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function jh(r,o,u,d,_,T){var x=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var N=r.entanglements,j=r.expirationTimes,ee=r.hiddenUpdates;for(u=x&~u;0<u;){var ae=31-tt(u),fe=1<<ae;N[ae]=0,j[ae]=-1;var te=ee[ae];if(te!==null)for(ee[ae]=null,ae=0;ae<te.length;ae++){var re=te[ae];re!==null&&(re.lane&=-536870913)}u&=~fe}d!==0&&po(r,d,0),T!==0&&_===0&&r.tag!==0&&(r.suspendedLanes|=T&~(x&~o))}function po(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var d=31-tt(o);r.entangledLanes|=o,r.entanglements[d]=r.entanglements[d]|1073741824|u&261930}function Ul(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var d=31-tt(u),_=1<<d;_&o|r[d]&o&&(r[d]|=o),u&=~_}}function Ol(r,o){var u=o&-o;return u=(u&42)!==0?1:mo(u),(u&(r.suspendedLanes|o))!==0?0:u}function mo(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Rr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Bc(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:aE(r.type))}function Pi(r,o){var u=he.p;try{return he.p=r,o()}finally{he.p=u}}var Li=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Li,fn="__reactProps$"+Li,tr="__reactContainer$"+Li,oa="__reactEvents$"+Li,Yh="__reactListeners$"+Li,Hc="__reactHandles$"+Li,Gc="__reactResources$"+Li,nr="__reactMarker$"+Li;function aa(r){delete r[Jt],delete r[fn],delete r[oa],delete r[Yh],delete r[Hc]}function ir(r){var o=r[Jt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[tr]||u[Jt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=jT(r);r!==null;){if(u=r[Jt])return u;r=jT(r)}return o}r=u,u=r.parentNode}return null}function yi(r){if(r=r[Jt]||r[tr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function ei(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function rr(r){var o=r[Gc];return o||(o=r[Gc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Kt(r){r[nr]=!0}var Fl=new Set,zl={};function sr(r,o){or(r,o),or(r+"Capture",o)}function or(r,o){for(zl[r]=o,r=0;r<o.length;r++)Fl.add(o[r])}var ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bl={},Hl={};function jc(r){return je.call(Hl,r)?!0:je.call(Bl,r)?!1:ql.test(r)?Hl[r]=!0:(Bl[r]=!0,!1)}function la(r,o,u){if(jc(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function ti(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Qt(r,o,u,d){if(d===null)r.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+d)}}function dn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function cs(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Gl(r,o,u){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,T=d.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return _.call(this)},set:function(x){u=""+x,T.call(this,x)}}),Object.defineProperty(r,o,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function pt(r){if(!r._valueTracker){var o=cs(r)?"checked":"value";r._valueTracker=Gl(r,o,""+r[o])}}function go(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return r&&(d=cs(r)?r.checked?"true":"false":r.value),r=d,r!==u?(o.setValue(r),!0):!1}function ar(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var yo=/[\n"\\]/g;function Gn(r){return r.replace(yo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ua(r,o,u,d,_,T,x,N){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),o!=null?x==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+dn(o)):r.value!==""+dn(o)&&(r.value=""+dn(o)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),o!=null?jl(r,x,dn(o)):u!=null?jl(r,x,dn(u)):d!=null&&r.removeAttribute("value"),_==null&&T!=null&&(r.defaultChecked=!!T),_!=null&&(r.checked=_&&typeof _!="function"&&typeof _!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.name=""+dn(N):r.removeAttribute("name")}function Yc(r,o,u,d,_,T,x,N){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.type=T),o!=null||u!=null){if(!(T!=="submit"&&T!=="reset"||o!=null)){pt(r);return}u=u!=null?""+dn(u):"",o=o!=null?""+dn(o):u,N||o===r.value||(r.value=o),r.defaultValue=o}d=d??_,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=N?r.checked:!!d,r.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x),pt(r)}function jl(r,o,u){o==="number"&&ar(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function fs(r,o,u,d){if(r=r.options,o){o={};for(var _=0;_<u.length;_++)o["$"+u[_]]=!0;for(u=0;u<r.length;u++)_=o.hasOwnProperty("$"+r[u].value),r[u].selected!==_&&(r[u].selected=_),_&&d&&(r[u].defaultSelected=!0)}else{for(u=""+dn(u),o=null,_=0;_<r.length;_++){if(r[_].value===u){r[_].selected=!0,d&&(r[_].defaultSelected=!0);return}o!==null||r[_].disabled||(o=r[_])}o!==null&&(o.selected=!0)}}function $c(r,o,u){if(o!=null&&(o=""+dn(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+dn(u):""}function ds(r,o,u,d){if(o==null){if(d!=null){if(u!=null)throw Error(i(92));if(me(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),o=u}u=dn(o),r.defaultValue=u,d=r.textContent,d===u&&d!==""&&d!==null&&(r.value=d),pt(r)}function jn(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yl(r,o,u){var d=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":d?r.setProperty(o,u):typeof u!="number"||u===0||Jc.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function $l(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var _ in o)d=o[_],o.hasOwnProperty(_)&&u[_]!==d&&Yl(r,_,d)}else for(var T in o)o.hasOwnProperty(T)&&Yl(r,T,o[T])}function ca(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fa(r){return hs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Vi(){}var Jl=null;function _i(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ps=null,lr=null;function _o(r){var o=yi(r);if(o&&(r=o.stateNode)){var u=r[fn]||null;e:switch(r=o.stateNode,o.type){case"input":if(ua(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Gn(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==r&&d.form===r.form){var _=d[fn]||null;if(!_)throw Error(i(90));ua(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(o=0;o<u.length;o++)d=u[o],d.form===r.form&&go(d)}break e;case"textarea":$c(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&fs(r,!!u.multiple,o,!1)}}}var da=!1;function ms(r,o,u){if(da)return r(o,u);da=!0;try{var d=r(o);return d}finally{if(da=!1,(ps!==null||lr!==null)&&(Hf(),ps&&(o=ps,r=lr,lr=ps=null,_o(o),r)))for(o=0;o<r.length;o++)_o(r[o])}}function Ui(r,o){var u=r.stateNode;if(u===null)return null;var d=u[fn]||null;if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if(vi)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){vo=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{vo=!1}var ur=null,Kl=null,To=null;function Ql(){if(To)return To;var r,o=Kl,u=o.length,d,_="value"in ur?ur.value:ur.textContent,T=_.length;for(r=0;r<u&&o[r]===_[r];r++);var x=u-r;for(d=1;d<=x&&o[u-d]===_[T-d];d++);return To=_.slice(r,1<d?1-d:void 0)}function Eo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Nr(){return!0}function Oi(){return!1}function yn(r){function o(u,d,_,T,x){this._reactName=u,this._targetInst=_,this.type=d,this.nativeEvent=T,this.target=x,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(u=r[N],this[N]=u?u(T):T[N]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Nr:Oi,this.isPropagationStopped=Oi,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),o}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=yn(kr),gs=y({},kr,{view:0,detail:0}),Xl=yn(gs),ys,ha,fr,pa=y({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fr&&(fr&&r.type==="mousemove"?(ys=r.screenX-fr.screenX,ha=r.screenY-fr.screenY):ha=ys=0,fr=r),ys)},movementY:function(r){return"movementY"in r?r.movementY:ha}}),Wl=yn(pa),So=y({},pa,{dataTransfer:0}),Qc=yn(So),Xc=y({},gs,{relatedTarget:0}),wo=yn(Xc),Zl=y({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wc=yn(Zl),ma=y({},kr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Zc=yn(ma),ef=y({},kr,{data:0}),dr=yn(ef),tf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sf(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=rf[r])?!!o[r]:!1}function _s(){return sf}var Ln=y({},gs,{key:function(r){if(r.key){var o=tf[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Eo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nf[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(r){return r.type==="keypress"?Eo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Eo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),of=yn(Ln),af=y({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mr=yn(af),g=y({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),A=yn(g),C=y({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=yn(C),Q=y({},pa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=yn(Q),ve=y({},kr,{newState:0,oldState:0}),qe=yn(ve),Ht=[9,13,27,32],dt=vi&&"CompositionEvent"in window,kt=null;vi&&"documentMode"in document&&(kt=document.documentMode);var Ti=vi&&"TextEvent"in window&&!kt,hr=vi&&(!dt||kt&&8<kt&&11>=kt),Fi=" ",zi=!1;function Ao(r,o){switch(r){case"keyup":return Ht.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ga(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ya=!1;function I1(r,o){switch(r){case"compositionend":return ga(o);case"keypress":return o.which!==32?null:(zi=!0,Fi);case"textInput":return r=o.data,r===Fi&&zi?null:r;default:return null}}function R1(r,o){if(ya)return r==="compositionend"||!dt&&Ao(r,o)?(r=Ql(),To=Kl=ur=null,ya=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return hr&&o.locale!=="ko"?null:o.data;default:return null}}var N1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J_(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!N1[r.type]:o==="textarea"}function K_(r,o,u,d){ps?lr?lr.push(d):lr=[d]:ps=d,o=Qf(o,"onChange"),0<o.length&&(u=new cr("onChange","change",null,u,d),r.push({event:u,listeners:o}))}var eu=null,tu=null;function k1(r){kT(r,0)}function lf(r){var o=ei(r);if(go(o))return r}function Q_(r,o){if(r==="change")return o}var X_=!1;if(vi){var $h;if(vi){var Jh="oninput"in document;if(!Jh){var W_=document.createElement("div");W_.setAttribute("oninput","return;"),Jh=typeof W_.oninput=="function"}$h=Jh}else $h=!1;X_=$h&&(!document.documentMode||9<document.documentMode)}function Z_(){eu&&(eu.detachEvent("onpropertychange",ev),tu=eu=null)}function ev(r){if(r.propertyName==="value"&&lf(tu)){var o=[];K_(o,tu,r,_i(r)),ms(k1,o)}}function M1(r,o,u){r==="focusin"?(Z_(),eu=o,tu=u,eu.attachEvent("onpropertychange",ev)):r==="focusout"&&Z_()}function D1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return lf(tu)}function P1(r,o){if(r==="click")return lf(o)}function L1(r,o){if(r==="input"||r==="change")return lf(o)}function V1(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var ni=typeof Object.is=="function"?Object.is:V1;function nu(r,o){if(ni(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var _=u[d];if(!je.call(o,_)||!ni(r[_],o[_]))return!1}return!0}function tv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function nv(r,o){var u=tv(r);r=0;for(var d;u;){if(u.nodeType===3){if(d=r+u.textContent.length,r<=o&&d>=o)return{node:u,offset:o-r};r=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=tv(u)}}function iv(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?iv(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function rv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ar(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=ar(r.document)}return o}function Kh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var U1=vi&&"documentMode"in document&&11>=document.documentMode,_a=null,Qh=null,iu=null,Xh=!1;function sv(r,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Xh||_a==null||_a!==ar(d)||(d=_a,"selectionStart"in d&&Kh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),iu&&nu(iu,d)||(iu=d,d=Qf(Qh,"onSelect"),0<d.length&&(o=new cr("onSelect","select",null,o,u),r.push({event:o,listeners:d}),o.target=_a)))}function xo(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var va={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionrun:xo("Transition","TransitionRun"),transitionstart:xo("Transition","TransitionStart"),transitioncancel:xo("Transition","TransitionCancel"),transitionend:xo("Transition","TransitionEnd")},Wh={},ov={};vi&&(ov=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Co(r){if(Wh[r])return Wh[r];if(!va[r])return r;var o=va[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in ov)return Wh[r]=o[u];return r}var av=Co("animationend"),lv=Co("animationiteration"),uv=Co("animationstart"),O1=Co("transitionrun"),F1=Co("transitionstart"),z1=Co("transitioncancel"),cv=Co("transitionend"),fv=new Map,Zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zh.push("scrollEnd");function qi(r,o){fv.set(r,o),sr(o,[r])}var uf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Ei=[],Ta=0,ep=0;function cf(){for(var r=Ta,o=ep=Ta=0;o<r;){var u=Ei[o];Ei[o++]=null;var d=Ei[o];Ei[o++]=null;var _=Ei[o];Ei[o++]=null;var T=Ei[o];if(Ei[o++]=null,d!==null&&_!==null){var x=d.pending;x===null?_.next=_:(_.next=x.next,x.next=_),d.pending=_}T!==0&&dv(u,_,T)}}function ff(r,o,u,d){Ei[Ta++]=r,Ei[Ta++]=o,Ei[Ta++]=u,Ei[Ta++]=d,ep|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function tp(r,o,u,d){return ff(r,o,u,d),df(r)}function bo(r,o){return ff(r,null,null,o),df(r)}function dv(r,o,u){r.lanes|=u;var d=r.alternate;d!==null&&(d.lanes|=u);for(var _=!1,T=r.return;T!==null;)T.childLanes|=u,d=T.alternate,d!==null&&(d.childLanes|=u),T.tag===22&&(r=T.stateNode,r===null||r._visibility&1||(_=!0)),r=T,T=T.return;return r.tag===3?(T=r.stateNode,_&&o!==null&&(_=31-tt(u),r=T.hiddenUpdates,d=r[_],d===null?r[_]=[o]:d.push(o),o.lane=u|536870912),T):null}function df(r){if(50<xu)throw xu=0,cm=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Ea={};function q1(r,o,u,d){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(r,o,u,d){return new q1(r,o,u,d)}function np(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Dr(r,o){var u=r.alternate;return u===null?(u=ii(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function hv(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function hf(r,o,u,d,_,T){var x=0;if(d=r,typeof r=="function")np(r)&&(x=1);else if(typeof r=="string")x=YR(r,u,se.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case D:return r=ii(31,u,o,_),r.elementType=D,r.lanes=T,r;case L:return Io(u.children,_,T,o);case F:x=8,_|=24;break;case O:return r=ii(12,u,o,_|2),r.elementType=O,r.lanes=T,r;case ne:return r=ii(13,u,o,_),r.elementType=ne,r.lanes=T,r;case Y:return r=ii(19,u,o,_),r.elementType=Y,r.lanes=T,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:x=10;break e;case H:x=9;break e;case X:x=11;break e;case R:x=14;break e;case P:x=16,d=null;break e}x=29,u=Error(i(130,r===null?"null":typeof r,"")),d=null}return o=ii(x,u,o,_),o.elementType=r,o.type=d,o.lanes=T,o}function Io(r,o,u,d){return r=ii(7,r,d,o),r.lanes=u,r}function ip(r,o,u){return r=ii(6,r,null,o),r.lanes=u,r}function pv(r){var o=ii(18,null,null,0);return o.stateNode=r,o}function rp(r,o,u){return o=ii(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var mv=new WeakMap;function Si(r,o){if(typeof r=="object"&&r!==null){var u=mv.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Qi(o)},mv.set(r,o),o)}return{value:r,source:o,stack:Qi(o)}}var Sa=[],wa=0,pf=null,ru=0,wi=[],Ai=0,vs=null,pr=1,mr="";function Pr(r,o){Sa[wa++]=ru,Sa[wa++]=pf,pf=r,ru=o}function gv(r,o,u){wi[Ai++]=pr,wi[Ai++]=mr,wi[Ai++]=vs,vs=r;var d=pr;r=mr;var _=32-tt(d)-1;d&=~(1<<_),u+=1;var T=32-tt(o)+_;if(30<T){var x=_-_%5;T=(d&(1<<x)-1).toString(32),d>>=x,_-=x,pr=1<<32-tt(o)+_|u<<_|d,mr=T+r}else pr=1<<T|u<<_|d,mr=r}function sp(r){r.return!==null&&(Pr(r,1),gv(r,1,0))}function op(r){for(;r===pf;)pf=Sa[--wa],Sa[wa]=null,ru=Sa[--wa],Sa[wa]=null;for(;r===vs;)vs=wi[--Ai],wi[Ai]=null,mr=wi[--Ai],wi[Ai]=null,pr=wi[--Ai],wi[Ai]=null}function yv(r,o){wi[Ai++]=pr,wi[Ai++]=mr,wi[Ai++]=vs,pr=o.id,mr=o.overflow,vs=r}var _n=null,Ct=null,nt=!1,Ts=null,xi=!1,ap=Error(i(519));function Es(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw su(Si(o,r)),ap}function _v(r){var o=r.stateNode,u=r.type,d=r.memoizedProps;switch(o[Jt]=r,o[fn]=d,u){case"dialog":Je("cancel",o),Je("close",o);break;case"iframe":case"object":case"embed":Je("load",o);break;case"video":case"audio":for(u=0;u<bu.length;u++)Je(bu[u],o);break;case"source":Je("error",o);break;case"img":case"image":case"link":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"input":Je("invalid",o),Yc(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Je("invalid",o);break;case"textarea":Je("invalid",o),ds(o,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||d.suppressHydrationWarning===!0||LT(o.textContent,u)?(d.popover!=null&&(Je("beforetoggle",o),Je("toggle",o)),d.onScroll!=null&&Je("scroll",o),d.onScrollEnd!=null&&Je("scrollend",o),d.onClick!=null&&(o.onclick=Vi),o=!0):o=!1,o||Es(r,!0)}function vv(r){for(_n=r.return;_n;)switch(_n.tag){case 5:case 31:case 13:xi=!1;return;case 27:case 3:xi=!0;return;default:_n=_n.return}}function Aa(r){if(r!==_n)return!1;if(!nt)return vv(r),nt=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||xm(r.type,r.memoizedProps)),u=!u),u&&Ct&&Es(r),vv(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ct=GT(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ct=GT(r)}else o===27?(o=Ct,Ls(r.type)?(r=Nm,Nm=null,Ct=r):Ct=o):Ct=_n?bi(r.stateNode.nextSibling):null;return!0}function Ro(){Ct=_n=null,nt=!1}function lp(){var r=Ts;return r!==null&&(Kn===null?Kn=r:Kn.push.apply(Kn,r),Ts=null),r}function su(r){Ts===null?Ts=[r]:Ts.push(r)}var up=G(null),No=null,Lr=null;function Ss(r,o,u){M(up,o._currentValue),o._currentValue=u}function Vr(r){r._currentValue=up.current,W(up)}function cp(r,o,u){for(;r!==null;){var d=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),r===u)break;r=r.return}}function fp(r,o,u,d){var _=r.child;for(_!==null&&(_.return=r);_!==null;){var T=_.dependencies;if(T!==null){var x=_.child;T=T.firstContext;e:for(;T!==null;){var N=T;T=_;for(var j=0;j<o.length;j++)if(N.context===o[j]){T.lanes|=u,N=T.alternate,N!==null&&(N.lanes|=u),cp(T.return,u,r),d||(x=null);break e}T=N.next}}else if(_.tag===18){if(x=_.return,x===null)throw Error(i(341));x.lanes|=u,T=x.alternate,T!==null&&(T.lanes|=u),cp(x,u,r),x=null}else x=_.child;if(x!==null)x.return=_;else for(x=_;x!==null;){if(x===r){x=null;break}if(_=x.sibling,_!==null){_.return=x.return,x=_;break}x=x.return}_=x}}function xa(r,o,u,d){r=null;for(var _=o,T=!1;_!==null;){if(!T){if((_.flags&524288)!==0)T=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var x=_.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var N=_.type;ni(_.pendingProps.value,x.value)||(r!==null?r.push(N):r=[N])}}else if(_===Ae.current){if(x=_.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(r!==null?r.push(Mu):r=[Mu])}_=_.return}r!==null&&fp(o,r,u,d),o.flags|=262144}function mf(r){for(r=r.firstContext;r!==null;){if(!ni(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ko(r){No=r,Lr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function vn(r){return Tv(No,r)}function gf(r,o){return No===null&&ko(r),Tv(r,o)}function Tv(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Lr===null){if(r===null)throw Error(i(308));Lr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Lr=Lr.next=o;return u}var B1=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,d){r.push(d)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},H1=t.unstable_scheduleCallback,G1=t.unstable_NormalPriority,Xt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dp(){return{controller:new B1,data:new Map,refCount:0}}function ou(r){r.refCount--,r.refCount===0&&H1(G1,function(){r.controller.abort()})}var au=null,hp=0,Ca=0,ba=null;function j1(r,o){if(au===null){var u=au=[];hp=0,Ca=gm(),ba={status:"pending",value:void 0,then:function(d){u.push(d)}}}return hp++,o.then(Ev,Ev),o}function Ev(){if(--hp===0&&au!==null){ba!==null&&(ba.status="fulfilled");var r=au;au=null,Ca=0,ba=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Y1(r,o){var u=[],d={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return r.then(function(){d.status="fulfilled",d.value=o;for(var _=0;_<u.length;_++)(0,u[_])(o)},function(_){for(d.status="rejected",d.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),d}var Sv=K.S;K.S=function(r,o){sT=gn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&j1(r,o),Sv!==null&&Sv(r,o)};var Mo=G(null);function pp(){var r=Mo.current;return r!==null?r:wt.pooledCache}function yf(r,o){o===null?M(Mo,Mo.current):M(Mo,o.pool)}function wv(){var r=pp();return r===null?null:{parent:Xt._currentValue,pool:r}}var Ia=Error(i(460)),mp=Error(i(474)),_f=Error(i(542)),vf={then:function(){}};function Av(r){return r=r.status,r==="fulfilled"||r==="rejected"}function xv(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Vi,Vi),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,bv(r),r;default:if(typeof o.status=="string")o.then(Vi,Vi);else{if(r=wt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(d){if(o.status==="pending"){var _=o;_.status="fulfilled",_.value=d}},function(d){if(o.status==="pending"){var _=o;_.status="rejected",_.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,bv(r),r}throw Po=o,Ia}}function Do(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Po=u,Ia):u}}var Po=null;function Cv(){if(Po===null)throw Error(i(459));var r=Po;return Po=null,r}function bv(r){if(r===Ia||r===_f)throw Error(i(483))}var Ra=null,lu=0;function Tf(r){var o=lu;return lu+=1,Ra===null&&(Ra=[]),xv(Ra,r,o)}function uu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Ef(r,o){throw o.$$typeof===E?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Iv(r){function o(J,$){if(r){var Z=J.deletions;Z===null?(J.deletions=[$],J.flags|=16):Z.push($)}}function u(J,$){if(!r)return null;for(;$!==null;)o(J,$),$=$.sibling;return null}function d(J){for(var $=new Map;J!==null;)J.key!==null?$.set(J.key,J):$.set(J.index,J),J=J.sibling;return $}function _(J,$){return J=Dr(J,$),J.index=0,J.sibling=null,J}function T(J,$,Z){return J.index=Z,r?(Z=J.alternate,Z!==null?(Z=Z.index,Z<$?(J.flags|=67108866,$):Z):(J.flags|=67108866,$)):(J.flags|=1048576,$)}function x(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function N(J,$,Z,ce){return $===null||$.tag!==6?($=ip(Z,J.mode,ce),$.return=J,$):($=_($,Z),$.return=J,$)}function j(J,$,Z,ce){var ke=Z.type;return ke===L?ae(J,$,Z.props.children,ce,Z.key):$!==null&&($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===P&&Do(ke)===$.type)?($=_($,Z.props),uu($,Z),$.return=J,$):($=hf(Z.type,Z.key,Z.props,null,J.mode,ce),uu($,Z),$.return=J,$)}function ee(J,$,Z,ce){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=rp(Z,J.mode,ce),$.return=J,$):($=_($,Z.children||[]),$.return=J,$)}function ae(J,$,Z,ce,ke){return $===null||$.tag!==7?($=Io(Z,J.mode,ce,ke),$.return=J,$):($=_($,Z),$.return=J,$)}function fe(J,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=ip(""+$,J.mode,Z),$.return=J,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return Z=hf($.type,$.key,$.props,null,J.mode,Z),uu(Z,$),Z.return=J,Z;case b:return $=rp($,J.mode,Z),$.return=J,$;case P:return $=Do($),fe(J,$,Z)}if(me($)||z($))return $=Io($,J.mode,Z,null),$.return=J,$;if(typeof $.then=="function")return fe(J,Tf($),Z);if($.$$typeof===B)return fe(J,gf(J,$),Z);Ef(J,$)}return null}function te(J,$,Z,ce){var ke=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ke!==null?null:N(J,$,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return Z.key===ke?j(J,$,Z,ce):null;case b:return Z.key===ke?ee(J,$,Z,ce):null;case P:return Z=Do(Z),te(J,$,Z,ce)}if(me(Z)||z(Z))return ke!==null?null:ae(J,$,Z,ce,null);if(typeof Z.then=="function")return te(J,$,Tf(Z),ce);if(Z.$$typeof===B)return te(J,$,gf(J,Z),ce);Ef(J,Z)}return null}function re(J,$,Z,ce,ke){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return J=J.get(Z)||null,N($,J,""+ce,ke);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case w:return J=J.get(ce.key===null?Z:ce.key)||null,j($,J,ce,ke);case b:return J=J.get(ce.key===null?Z:ce.key)||null,ee($,J,ce,ke);case P:return ce=Do(ce),re(J,$,Z,ce,ke)}if(me(ce)||z(ce))return J=J.get(Z)||null,ae($,J,ce,ke,null);if(typeof ce.then=="function")return re(J,$,Z,Tf(ce),ke);if(ce.$$typeof===B)return re(J,$,Z,gf($,ce),ke);Ef($,ce)}return null}function xe(J,$,Z,ce){for(var ke=null,ut=null,be=$,He=$=0,Xe=null;be!==null&&He<Z.length;He++){be.index>He?(Xe=be,be=null):Xe=be.sibling;var ct=te(J,be,Z[He],ce);if(ct===null){be===null&&(be=Xe);break}r&&be&&ct.alternate===null&&o(J,be),$=T(ct,$,He),ut===null?ke=ct:ut.sibling=ct,ut=ct,be=Xe}if(He===Z.length)return u(J,be),nt&&Pr(J,He),ke;if(be===null){for(;He<Z.length;He++)be=fe(J,Z[He],ce),be!==null&&($=T(be,$,He),ut===null?ke=be:ut.sibling=be,ut=be);return nt&&Pr(J,He),ke}for(be=d(be);He<Z.length;He++)Xe=re(be,J,He,Z[He],ce),Xe!==null&&(r&&Xe.alternate!==null&&be.delete(Xe.key===null?He:Xe.key),$=T(Xe,$,He),ut===null?ke=Xe:ut.sibling=Xe,ut=Xe);return r&&be.forEach(function(zs){return o(J,zs)}),nt&&Pr(J,He),ke}function Le(J,$,Z,ce){if(Z==null)throw Error(i(151));for(var ke=null,ut=null,be=$,He=$=0,Xe=null,ct=Z.next();be!==null&&!ct.done;He++,ct=Z.next()){be.index>He?(Xe=be,be=null):Xe=be.sibling;var zs=te(J,be,ct.value,ce);if(zs===null){be===null&&(be=Xe);break}r&&be&&zs.alternate===null&&o(J,be),$=T(zs,$,He),ut===null?ke=zs:ut.sibling=zs,ut=zs,be=Xe}if(ct.done)return u(J,be),nt&&Pr(J,He),ke;if(be===null){for(;!ct.done;He++,ct=Z.next())ct=fe(J,ct.value,ce),ct!==null&&($=T(ct,$,He),ut===null?ke=ct:ut.sibling=ct,ut=ct);return nt&&Pr(J,He),ke}for(be=d(be);!ct.done;He++,ct=Z.next())ct=re(be,J,He,ct.value,ce),ct!==null&&(r&&ct.alternate!==null&&be.delete(ct.key===null?He:ct.key),$=T(ct,$,He),ut===null?ke=ct:ut.sibling=ct,ut=ct);return r&&be.forEach(function(iN){return o(J,iN)}),nt&&Pr(J,He),ke}function Et(J,$,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===L&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:e:{for(var ke=Z.key;$!==null;){if($.key===ke){if(ke=Z.type,ke===L){if($.tag===7){u(J,$.sibling),ce=_($,Z.props.children),ce.return=J,J=ce;break e}}else if($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===P&&Do(ke)===$.type){u(J,$.sibling),ce=_($,Z.props),uu(ce,Z),ce.return=J,J=ce;break e}u(J,$);break}else o(J,$);$=$.sibling}Z.type===L?(ce=Io(Z.props.children,J.mode,ce,Z.key),ce.return=J,J=ce):(ce=hf(Z.type,Z.key,Z.props,null,J.mode,ce),uu(ce,Z),ce.return=J,J=ce)}return x(J);case b:e:{for(ke=Z.key;$!==null;){if($.key===ke)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){u(J,$.sibling),ce=_($,Z.children||[]),ce.return=J,J=ce;break e}else{u(J,$);break}else o(J,$);$=$.sibling}ce=rp(Z,J.mode,ce),ce.return=J,J=ce}return x(J);case P:return Z=Do(Z),Et(J,$,Z,ce)}if(me(Z))return xe(J,$,Z,ce);if(z(Z)){if(ke=z(Z),typeof ke!="function")throw Error(i(150));return Z=ke.call(Z),Le(J,$,Z,ce)}if(typeof Z.then=="function")return Et(J,$,Tf(Z),ce);if(Z.$$typeof===B)return Et(J,$,gf(J,Z),ce);Ef(J,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(u(J,$.sibling),ce=_($,Z),ce.return=J,J=ce):(u(J,$),ce=ip(Z,J.mode,ce),ce.return=J,J=ce),x(J)):u(J,$)}return function(J,$,Z,ce){try{lu=0;var ke=Et(J,$,Z,ce);return Ra=null,ke}catch(be){if(be===Ia||be===_f)throw be;var ut=ii(29,be,null,J.mode);return ut.lanes=ce,ut.return=J,ut}finally{}}}var Lo=Iv(!0),Rv=Iv(!1),ws=!1;function gp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yp(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function As(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function xs(r,o,u){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ht&2)!==0){var _=d.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),d.pending=o,o=df(r),dv(r,null,u),o}return ff(r,d,o,u),df(r)}function cu(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var d=o.lanes;d&=r.pendingLanes,u|=d,o.lanes=u,Ul(r,u)}}function _p(r,o){var u=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var _=null,T=null;if(u=u.firstBaseUpdate,u!==null){do{var x={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};T===null?_=T=x:T=T.next=x,u=u.next}while(u!==null);T===null?_=T=o:T=T.next=o}else _=T=o;u={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:T,shared:d.shared,callbacks:d.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var vp=!1;function fu(){if(vp){var r=ba;if(r!==null)throw r}}function du(r,o,u,d){vp=!1;var _=r.updateQueue;ws=!1;var T=_.firstBaseUpdate,x=_.lastBaseUpdate,N=_.shared.pending;if(N!==null){_.shared.pending=null;var j=N,ee=j.next;j.next=null,x===null?T=ee:x.next=ee,x=j;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,N=ae.lastBaseUpdate,N!==x&&(N===null?ae.firstBaseUpdate=ee:N.next=ee,ae.lastBaseUpdate=j))}if(T!==null){var fe=_.baseState;x=0,ae=ee=j=null,N=T;do{var te=N.lane&-536870913,re=te!==N.lane;if(re?(Qe&te)===te:(d&te)===te){te!==0&&te===Ca&&(vp=!0),ae!==null&&(ae=ae.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var xe=r,Le=N;te=o;var Et=u;switch(Le.tag){case 1:if(xe=Le.payload,typeof xe=="function"){fe=xe.call(Et,fe,te);break e}fe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Le.payload,te=typeof xe=="function"?xe.call(Et,fe,te):xe,te==null)break e;fe=y({},fe,te);break e;case 2:ws=!0}}te=N.callback,te!==null&&(r.flags|=64,re&&(r.flags|=8192),re=_.callbacks,re===null?_.callbacks=[te]:re.push(te))}else re={lane:te,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ae===null?(ee=ae=re,j=fe):ae=ae.next=re,x|=te;if(N=N.next,N===null){if(N=_.shared.pending,N===null)break;re=N,N=re.next,re.next=null,_.lastBaseUpdate=re,_.shared.pending=null}}while(!0);ae===null&&(j=fe),_.baseState=j,_.firstBaseUpdate=ee,_.lastBaseUpdate=ae,T===null&&(_.shared.lanes=0),Ns|=x,r.lanes=x,r.memoizedState=fe}}function Nv(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function kv(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Nv(u[r],o)}var Na=G(null),Sf=G(0);function Mv(r,o){r=jr,M(Sf,r),M(Na,o),jr=r|o.baseLanes}function Tp(){M(Sf,jr),M(Na,Na.current)}function Ep(){jr=Sf.current,W(Na),W(Sf)}var ri=G(null),Ci=null;function Cs(r){var o=r.alternate;M(Gt,Gt.current&1),M(ri,r),Ci===null&&(o===null||Na.current!==null||o.memoizedState!==null)&&(Ci=r)}function Sp(r){M(Gt,Gt.current),M(ri,r),Ci===null&&(Ci=r)}function Dv(r){r.tag===22?(M(Gt,Gt.current),M(ri,r),Ci===null&&(Ci=r)):bs()}function bs(){M(Gt,Gt.current),M(ri,ri.current)}function si(r){W(ri),Ci===r&&(Ci=null),W(Gt)}var Gt=G(0);function wf(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Im(u)||Rm(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ur=0,Be=null,vt=null,Wt=null,Af=!1,ka=!1,Vo=!1,xf=0,hu=0,Ma=null,$1=0;function Ut(){throw Error(i(321))}function wp(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!ni(r[u],o[u]))return!1;return!0}function Ap(r,o,u,d,_,T){return Ur=T,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,K.H=r===null||r.memoizedState===null?g0:Fp,Vo=!1,T=u(d,_),Vo=!1,ka&&(T=Lv(o,u,d,_)),Pv(r),T}function Pv(r){K.H=gu;var o=vt!==null&&vt.next!==null;if(Ur=0,Wt=vt=Be=null,Af=!1,hu=0,Ma=null,o)throw Error(i(300));r===null||Zt||(r=r.dependencies,r!==null&&mf(r)&&(Zt=!0))}function Lv(r,o,u,d){Be=r;var _=0;do{if(ka&&(Ma=null),hu=0,ka=!1,25<=_)throw Error(i(301));if(_+=1,Wt=vt=null,r.updateQueue!=null){var T=r.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}K.H=y0,T=o(u,d)}while(ka);return T}function J1(){var r=K.H,o=r.useState()[0];return o=typeof o.then=="function"?pu(o):o,r=r.useState()[0],(vt!==null?vt.memoizedState:null)!==r&&(Be.flags|=1024),o}function xp(){var r=xf!==0;return xf=0,r}function Cp(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function bp(r){if(Af){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Af=!1}Ur=0,Wt=vt=Be=null,ka=!1,hu=xf=0,Ma=null}function Vn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Be.memoizedState=Wt=r:Wt=Wt.next=r,Wt}function jt(){if(vt===null){var r=Be.alternate;r=r!==null?r.memoizedState:null}else r=vt.next;var o=Wt===null?Be.memoizedState:Wt.next;if(o!==null)Wt=o,vt=r;else{if(r===null)throw Be.alternate===null?Error(i(467)):Error(i(310));vt=r,r={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Wt===null?Be.memoizedState=Wt=r:Wt=Wt.next=r}return Wt}function Cf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pu(r){var o=hu;return hu+=1,Ma===null&&(Ma=[]),r=xv(Ma,r,o),o=Be,(Wt===null?o.memoizedState:Wt.next)===null&&(o=o.alternate,K.H=o===null||o.memoizedState===null?g0:Fp),r}function bf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return pu(r);if(r.$$typeof===B)return vn(r)}throw Error(i(438,String(r)))}function Ip(r){var o=null,u=Be.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var d=Be.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(_){return _.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Cf(),Be.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),d=0;d<r;d++)u[d]=I;return o.index++,u}function Or(r,o){return typeof o=="function"?o(r):o}function If(r){var o=jt();return Rp(o,vt,r)}function Rp(r,o,u){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var _=r.baseQueue,T=d.pending;if(T!==null){if(_!==null){var x=_.next;_.next=T.next,T.next=x}o.baseQueue=_=T,d.pending=null}if(T=r.baseState,_===null)r.memoizedState=T;else{o=_.next;var N=x=null,j=null,ee=o,ae=!1;do{var fe=ee.lane&-536870913;if(fe!==ee.lane?(Qe&fe)===fe:(Ur&fe)===fe){var te=ee.revertLane;if(te===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),fe===Ca&&(ae=!0);else if((Ur&te)===te){ee=ee.next,te===Ca&&(ae=!0);continue}else fe={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},j===null?(N=j=fe,x=T):j=j.next=fe,Be.lanes|=te,Ns|=te;fe=ee.action,Vo&&u(T,fe),T=ee.hasEagerState?ee.eagerState:u(T,fe)}else te={lane:fe,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},j===null?(N=j=te,x=T):j=j.next=te,Be.lanes|=fe,Ns|=fe;ee=ee.next}while(ee!==null&&ee!==o);if(j===null?x=T:j.next=N,!ni(T,r.memoizedState)&&(Zt=!0,ae&&(u=ba,u!==null)))throw u;r.memoizedState=T,r.baseState=x,r.baseQueue=j,d.lastRenderedState=T}return _===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Np(r){var o=jt(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var d=u.dispatch,_=u.pending,T=o.memoizedState;if(_!==null){u.pending=null;var x=_=_.next;do T=r(T,x.action),x=x.next;while(x!==_);ni(T,o.memoizedState)||(Zt=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),u.lastRenderedState=T}return[T,d]}function Vv(r,o,u){var d=Be,_=jt(),T=nt;if(T){if(u===void 0)throw Error(i(407));u=u()}else u=o();var x=!ni((vt||_).memoizedState,u);if(x&&(_.memoizedState=u,Zt=!0),_=_.queue,Dp(Fv.bind(null,d,_,r),[r]),_.getSnapshot!==o||x||Wt!==null&&Wt.memoizedState.tag&1){if(d.flags|=2048,Da(9,{destroy:void 0},Ov.bind(null,d,_,u,o),null),wt===null)throw Error(i(349));T||(Ur&127)!==0||Uv(d,o,u)}return u}function Uv(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=Be.updateQueue,o===null?(o=Cf(),Be.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function Ov(r,o,u,d){o.value=u,o.getSnapshot=d,zv(o)&&qv(r)}function Fv(r,o,u){return u(function(){zv(o)&&qv(r)})}function zv(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!ni(r,u)}catch{return!0}}function qv(r){var o=bo(r,2);o!==null&&Qn(o,r,2)}function kp(r){var o=Vn();if(typeof r=="function"){var u=r;if(r=u(),Vo){cn(!0);try{u()}finally{cn(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:r},o}function Bv(r,o,u,d){return r.baseState=u,Rp(r,vt,typeof d=="function"?d:Or)}function K1(r,o,u,d,_){if(kf(r))throw Error(i(485));if(r=o.action,r!==null){var T={payload:_,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){T.listeners.push(x)}};K.T!==null?u(!0):T.isTransition=!1,d(T),u=o.pending,u===null?(T.next=o.pending=T,Hv(o,T)):(T.next=u.next,o.pending=u.next=T)}}function Hv(r,o){var u=o.action,d=o.payload,_=r.state;if(o.isTransition){var T=K.T,x={};K.T=x;try{var N=u(_,d),j=K.S;j!==null&&j(x,N),Gv(r,o,N)}catch(ee){Mp(r,o,ee)}finally{T!==null&&x.types!==null&&(T.types=x.types),K.T=T}}else try{T=u(_,d),Gv(r,o,T)}catch(ee){Mp(r,o,ee)}}function Gv(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){jv(r,o,d)},function(d){return Mp(r,o,d)}):jv(r,o,u)}function jv(r,o,u){o.status="fulfilled",o.value=u,Yv(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,Hv(r,u)))}function Mp(r,o,u){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=u,Yv(o),o=o.next;while(o!==d)}r.action=null}function Yv(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function $v(r,o){return o}function Jv(r,o){if(nt){var u=wt.formState;if(u!==null){e:{var d=Be;if(nt){if(Ct){t:{for(var _=Ct,T=xi;_.nodeType!==8;){if(!T){_=null;break t}if(_=bi(_.nextSibling),_===null){_=null;break t}}T=_.data,_=T==="F!"||T==="F"?_:null}if(_){Ct=bi(_.nextSibling),d=_.data==="F!";break e}}Es(d)}d=!1}d&&(o=u[0])}}return u=Vn(),u.memoizedState=u.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$v,lastRenderedState:o},u.queue=d,u=h0.bind(null,Be,d),d.dispatch=u,d=kp(!1),T=Op.bind(null,Be,!1,d.queue),d=Vn(),_={state:o,dispatch:null,action:r,pending:null},d.queue=_,u=K1.bind(null,Be,_,T,u),_.dispatch=u,d.memoizedState=r,[o,u,!1]}function Kv(r){var o=jt();return Qv(o,vt,r)}function Qv(r,o,u){if(o=Rp(r,o,$v)[0],r=If(Or)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=pu(o)}catch(x){throw x===Ia?_f:x}else d=o;o=jt();var _=o.queue,T=_.dispatch;return u!==o.memoizedState&&(Be.flags|=2048,Da(9,{destroy:void 0},Q1.bind(null,_,u),null)),[d,T,r]}function Q1(r,o){r.action=o}function Xv(r){var o=jt(),u=vt;if(u!==null)return Qv(o,u,r);jt(),o=o.memoizedState,u=jt();var d=u.queue.dispatch;return u.memoizedState=r,[o,d,!1]}function Da(r,o,u,d){return r={tag:r,create:u,deps:d,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Cf(),Be.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(d=u.next,u.next=r,r.next=d,o.lastEffect=r),r}function Wv(){return jt().memoizedState}function Rf(r,o,u,d){var _=Vn();Be.flags|=r,_.memoizedState=Da(1|o,{destroy:void 0},u,d===void 0?null:d)}function Nf(r,o,u,d){var _=jt();d=d===void 0?null:d;var T=_.memoizedState.inst;vt!==null&&d!==null&&wp(d,vt.memoizedState.deps)?_.memoizedState=Da(o,T,u,d):(Be.flags|=r,_.memoizedState=Da(1|o,T,u,d))}function Zv(r,o){Rf(8390656,8,r,o)}function Dp(r,o){Nf(2048,8,r,o)}function X1(r){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Cf(),Be.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function e0(r){var o=jt().memoizedState;return X1({ref:o,nextImpl:r}),function(){if((ht&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function t0(r,o){return Nf(4,2,r,o)}function n0(r,o){return Nf(4,4,r,o)}function i0(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function r0(r,o,u){u=u!=null?u.concat([r]):null,Nf(4,4,i0.bind(null,o,r),u)}function Pp(){}function s0(r,o){var u=jt();o=o===void 0?null:o;var d=u.memoizedState;return o!==null&&wp(o,d[1])?d[0]:(u.memoizedState=[r,o],r)}function o0(r,o){var u=jt();o=o===void 0?null:o;var d=u.memoizedState;if(o!==null&&wp(o,d[1]))return d[0];if(d=r(),Vo){cn(!0);try{r()}finally{cn(!1)}}return u.memoizedState=[d,o],d}function Lp(r,o,u){return u===void 0||(Ur&1073741824)!==0&&(Qe&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=aT(),Be.lanes|=r,Ns|=r,u)}function a0(r,o,u,d){return ni(u,o)?u:Na.current!==null?(r=Lp(r,u,d),ni(r,o)||(Zt=!0),r):(Ur&42)===0||(Ur&1073741824)!==0&&(Qe&261930)===0?(Zt=!0,r.memoizedState=u):(r=aT(),Be.lanes|=r,Ns|=r,o)}function l0(r,o,u,d,_){var T=he.p;he.p=T!==0&&8>T?T:8;var x=K.T,N={};K.T=N,Op(r,!1,o,u);try{var j=_(),ee=K.S;if(ee!==null&&ee(N,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ae=Y1(j,d);mu(r,o,ae,li(r))}else mu(r,o,d,li(r))}catch(fe){mu(r,o,{then:function(){},status:"rejected",reason:fe},li())}finally{he.p=T,x!==null&&N.types!==null&&(x.types=N.types),K.T=x}}function W1(){}function Vp(r,o,u,d){if(r.tag!==5)throw Error(i(476));var _=u0(r).queue;l0(r,_,o,Se,u===null?W1:function(){return c0(r),u(d)})}function u0(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:Se},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function c0(r){var o=u0(r);o.next===null&&(o=r.alternate.memoizedState),mu(r,o.next.queue,{},li())}function Up(){return vn(Mu)}function f0(){return jt().memoizedState}function d0(){return jt().memoizedState}function Z1(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=li();r=As(u);var d=xs(o,r,u);d!==null&&(Qn(d,o,u),cu(d,o,u)),o={cache:dp()},r.payload=o;return}o=o.return}}function eR(r,o,u){var d=li();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},kf(r)?p0(o,u):(u=tp(r,o,u,d),u!==null&&(Qn(u,r,d),m0(u,o,d)))}function h0(r,o,u){var d=li();mu(r,o,u,d)}function mu(r,o,u,d){var _={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(kf(r))p0(o,_);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var x=o.lastRenderedState,N=T(x,u);if(_.hasEagerState=!0,_.eagerState=N,ni(N,x))return ff(r,o,_,0),wt===null&&cf(),!1}catch{}finally{}if(u=tp(r,o,_,d),u!==null)return Qn(u,r,d),m0(u,o,d),!0}return!1}function Op(r,o,u,d){if(d={lane:2,revertLane:gm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},kf(r)){if(o)throw Error(i(479))}else o=tp(r,u,d,2),o!==null&&Qn(o,r,2)}function kf(r){var o=r.alternate;return r===Be||o!==null&&o===Be}function p0(r,o){ka=Af=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function m0(r,o,u){if((u&4194048)!==0){var d=o.lanes;d&=r.pendingLanes,u|=d,o.lanes=u,Ul(r,u)}}var gu={readContext:vn,use:bf,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};gu.useEffectEvent=Ut;var g0={readContext:vn,use:bf,useCallback:function(r,o){return Vn().memoizedState=[r,o===void 0?null:o],r},useContext:vn,useEffect:Zv,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Rf(4194308,4,i0.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Rf(4194308,4,r,o)},useInsertionEffect:function(r,o){Rf(4,2,r,o)},useMemo:function(r,o){var u=Vn();o=o===void 0?null:o;var d=r();if(Vo){cn(!0);try{r()}finally{cn(!1)}}return u.memoizedState=[d,o],d},useReducer:function(r,o,u){var d=Vn();if(u!==void 0){var _=u(o);if(Vo){cn(!0);try{u(o)}finally{cn(!1)}}}else _=o;return d.memoizedState=d.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},d.queue=r,r=r.dispatch=eR.bind(null,Be,r),[d.memoizedState,r]},useRef:function(r){var o=Vn();return r={current:r},o.memoizedState=r},useState:function(r){r=kp(r);var o=r.queue,u=h0.bind(null,Be,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Pp,useDeferredValue:function(r,o){var u=Vn();return Lp(u,r,o)},useTransition:function(){var r=kp(!1);return r=l0.bind(null,Be,r.queue,!0,!1),Vn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var d=Be,_=Vn();if(nt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),wt===null)throw Error(i(349));(Qe&127)!==0||Uv(d,o,u)}_.memoizedState=u;var T={value:u,getSnapshot:o};return _.queue=T,Zv(Fv.bind(null,d,T,r),[r]),d.flags|=2048,Da(9,{destroy:void 0},Ov.bind(null,d,T,u,o),null),u},useId:function(){var r=Vn(),o=wt.identifierPrefix;if(nt){var u=mr,d=pr;u=(d&~(1<<32-tt(d)-1)).toString(32)+u,o="_"+o+"R_"+u,u=xf++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=$1++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Up,useFormState:Jv,useActionState:Jv,useOptimistic:function(r){var o=Vn();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Op.bind(null,Be,!0,u),u.dispatch=o,[r,o]},useMemoCache:Ip,useCacheRefresh:function(){return Vn().memoizedState=Z1.bind(null,Be)},useEffectEvent:function(r){var o=Vn(),u={impl:r};return o.memoizedState=u,function(){if((ht&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Fp={readContext:vn,use:bf,useCallback:s0,useContext:vn,useEffect:Dp,useImperativeHandle:r0,useInsertionEffect:t0,useLayoutEffect:n0,useMemo:o0,useReducer:If,useRef:Wv,useState:function(){return If(Or)},useDebugValue:Pp,useDeferredValue:function(r,o){var u=jt();return a0(u,vt.memoizedState,r,o)},useTransition:function(){var r=If(Or)[0],o=jt().memoizedState;return[typeof r=="boolean"?r:pu(r),o]},useSyncExternalStore:Vv,useId:f0,useHostTransitionStatus:Up,useFormState:Kv,useActionState:Kv,useOptimistic:function(r,o){var u=jt();return Bv(u,vt,r,o)},useMemoCache:Ip,useCacheRefresh:d0};Fp.useEffectEvent=e0;var y0={readContext:vn,use:bf,useCallback:s0,useContext:vn,useEffect:Dp,useImperativeHandle:r0,useInsertionEffect:t0,useLayoutEffect:n0,useMemo:o0,useReducer:Np,useRef:Wv,useState:function(){return Np(Or)},useDebugValue:Pp,useDeferredValue:function(r,o){var u=jt();return vt===null?Lp(u,r,o):a0(u,vt.memoizedState,r,o)},useTransition:function(){var r=Np(Or)[0],o=jt().memoizedState;return[typeof r=="boolean"?r:pu(r),o]},useSyncExternalStore:Vv,useId:f0,useHostTransitionStatus:Up,useFormState:Xv,useActionState:Xv,useOptimistic:function(r,o){var u=jt();return vt!==null?Bv(u,vt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Ip,useCacheRefresh:d0};y0.useEffectEvent=e0;function zp(r,o,u,d){o=r.memoizedState,u=u(d,o),u=u==null?o:y({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var qp={enqueueSetState:function(r,o,u){r=r._reactInternals;var d=li(),_=As(d);_.payload=o,u!=null&&(_.callback=u),o=xs(r,_,d),o!==null&&(Qn(o,r,d),cu(o,r,d))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var d=li(),_=As(d);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=xs(r,_,d),o!==null&&(Qn(o,r,d),cu(o,r,d))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=li(),d=As(u);d.tag=2,o!=null&&(d.callback=o),o=xs(r,d,u),o!==null&&(Qn(o,r,u),cu(o,r,u))}};function _0(r,o,u,d,_,T,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,T,x):o.prototype&&o.prototype.isPureReactComponent?!nu(u,d)||!nu(_,T):!0}function v0(r,o,u,d){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==r&&qp.enqueueReplaceState(o,o.state,null)}function Uo(r,o){var u=o;if("ref"in o){u={};for(var d in o)d!=="ref"&&(u[d]=o[d])}if(r=r.defaultProps){u===o&&(u=y({},u));for(var _ in r)u[_]===void 0&&(u[_]=r[_])}return u}function T0(r){uf(r)}function E0(r){console.error(r)}function S0(r){uf(r)}function Mf(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function w0(r,o,u){try{var d=r.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Bp(r,o,u){return u=As(u),u.tag=3,u.payload={element:null},u.callback=function(){Mf(r,o)},u}function A0(r){return r=As(r),r.tag=3,r}function x0(r,o,u,d){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var T=d.value;r.payload=function(){return _(T)},r.callback=function(){w0(o,u,d)}}var x=u.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){w0(o,u,d),typeof _!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function tR(r,o,u,d,_){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=u.alternate,o!==null&&xa(o,u,_,!0),u=ri.current,u!==null){switch(u.tag){case 31:case 13:return Ci===null?Gf():u.alternate===null&&Ot===0&&(Ot=3),u.flags&=-257,u.flags|=65536,u.lanes=_,d===vf?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([d]):o.add(d),hm(r,d,_)),!1;case 22:return u.flags|=65536,d===vf?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([d]):u.add(d)),hm(r,d,_)),!1}throw Error(i(435,u.tag))}return hm(r,d,_),Gf(),!1}if(nt)return o=ri.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=_,d!==ap&&(r=Error(i(422),{cause:d}),su(Si(r,u)))):(d!==ap&&(o=Error(i(423),{cause:d}),su(Si(o,u))),r=r.current.alternate,r.flags|=65536,_&=-_,r.lanes|=_,d=Si(d,u),_=Bp(r.stateNode,d,_),_p(r,_),Ot!==4&&(Ot=2)),!1;var T=Error(i(520),{cause:d});if(T=Si(T,u),Au===null?Au=[T]:Au.push(T),Ot!==4&&(Ot=2),o===null)return!0;d=Si(d,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=_&-_,u.lanes|=r,r=Bp(u.stateNode,d,r),_p(u,r),!1;case 1:if(o=u.type,T=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ks===null||!ks.has(T))))return u.flags|=65536,_&=-_,u.lanes|=_,_=A0(_),x0(_,r,u,d),_p(u,_),!1}u=u.return}while(u!==null);return!1}var Hp=Error(i(461)),Zt=!1;function Tn(r,o,u,d){o.child=r===null?Rv(o,null,u,d):Lo(o,r.child,u,d)}function C0(r,o,u,d,_){u=u.render;var T=o.ref;if("ref"in d){var x={};for(var N in d)N!=="ref"&&(x[N]=d[N])}else x=d;return ko(o),d=Ap(r,o,u,x,T,_),N=xp(),r!==null&&!Zt?(Cp(r,o,_),Fr(r,o,_)):(nt&&N&&sp(o),o.flags|=1,Tn(r,o,d,_),o.child)}function b0(r,o,u,d,_){if(r===null){var T=u.type;return typeof T=="function"&&!np(T)&&T.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=T,I0(r,o,T,d,_)):(r=hf(u.type,null,d,o,o.mode,_),r.ref=o.ref,r.return=o,o.child=r)}if(T=r.child,!Xp(r,_)){var x=T.memoizedProps;if(u=u.compare,u=u!==null?u:nu,u(x,d)&&r.ref===o.ref)return Fr(r,o,_)}return o.flags|=1,r=Dr(T,d),r.ref=o.ref,r.return=o,o.child=r}function I0(r,o,u,d,_){if(r!==null){var T=r.memoizedProps;if(nu(T,d)&&r.ref===o.ref)if(Zt=!1,o.pendingProps=d=T,Xp(r,_))(r.flags&131072)!==0&&(Zt=!0);else return o.lanes=r.lanes,Fr(r,o,_)}return Gp(r,o,u,d,_)}function R0(r,o,u,d){var _=d.children,T=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(T=T!==null?T.baseLanes|u:u,r!==null){for(d=o.child=r.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;d=_&~T}else d=0,o.child=null;return N0(r,o,T,u,d)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&yf(o,T!==null?T.cachePool:null),T!==null?Mv(o,T):Tp(),Dv(o);else return d=o.lanes=536870912,N0(r,o,T!==null?T.baseLanes|u:u,u,d)}else T!==null?(yf(o,T.cachePool),Mv(o,T),bs(),o.memoizedState=null):(r!==null&&yf(o,null),Tp(),bs());return Tn(r,o,_,u),o.child}function yu(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function N0(r,o,u,d,_){var T=pp();return T=T===null?null:{parent:Xt._currentValue,pool:T},o.memoizedState={baseLanes:u,cachePool:T},r!==null&&yf(o,null),Tp(),Dv(o),r!==null&&xa(r,o,d,!0),o.childLanes=_,null}function Df(r,o){return o=Lf({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function k0(r,o,u){return Lo(o,r.child,null,u),r=Df(o,o.pendingProps),r.flags|=2,si(o),o.memoizedState=null,r}function nR(r,o,u){var d=o.pendingProps,_=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(nt){if(d.mode==="hidden")return r=Df(o,d),o.lanes=536870912,yu(null,r);if(Sp(o),(r=Ct)?(r=HT(r,xi),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:vs!==null?{id:pr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},u=pv(r),u.return=o,o.child=u,_n=o,Ct=null)):r=null,r===null)throw Es(o);return o.lanes=536870912,null}return Df(o,d)}var T=r.memoizedState;if(T!==null){var x=T.dehydrated;if(Sp(o),_)if(o.flags&256)o.flags&=-257,o=k0(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(Zt||xa(r,o,u,!1),_=(u&r.childLanes)!==0,Zt||_){if(d=wt,d!==null&&(x=Ol(d,u),x!==0&&x!==T.retryLane))throw T.retryLane=x,bo(r,x),Qn(d,r,x),Hp;Gf(),o=k0(r,o,u)}else r=T.treeContext,Ct=bi(x.nextSibling),_n=o,nt=!0,Ts=null,xi=!1,r!==null&&yv(o,r),o=Df(o,d),o.flags|=4096;return o}return r=Dr(r.child,{mode:d.mode,children:d.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Pf(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Gp(r,o,u,d,_){return ko(o),u=Ap(r,o,u,d,void 0,_),d=xp(),r!==null&&!Zt?(Cp(r,o,_),Fr(r,o,_)):(nt&&d&&sp(o),o.flags|=1,Tn(r,o,u,_),o.child)}function M0(r,o,u,d,_,T){return ko(o),o.updateQueue=null,u=Lv(o,d,u,_),Pv(r),d=xp(),r!==null&&!Zt?(Cp(r,o,T),Fr(r,o,T)):(nt&&d&&sp(o),o.flags|=1,Tn(r,o,u,T),o.child)}function D0(r,o,u,d,_){if(ko(o),o.stateNode===null){var T=Ea,x=u.contextType;typeof x=="object"&&x!==null&&(T=vn(x)),T=new u(d,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=qp,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=d,T.state=o.memoizedState,T.refs={},gp(o),x=u.contextType,T.context=typeof x=="object"&&x!==null?vn(x):Ea,T.state=o.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(zp(o,u,x,d),T.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(x=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),x!==T.state&&qp.enqueueReplaceState(T,T.state,null),du(o,d,T,_),fu(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(r===null){T=o.stateNode;var N=o.memoizedProps,j=Uo(u,N);T.props=j;var ee=T.context,ae=u.contextType;x=Ea,typeof ae=="object"&&ae!==null&&(x=vn(ae));var fe=u.getDerivedStateFromProps;ae=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,ae||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(N||ee!==x)&&v0(o,T,d,x),ws=!1;var te=o.memoizedState;T.state=te,du(o,d,T,_),fu(),ee=o.memoizedState,N||te!==ee||ws?(typeof fe=="function"&&(zp(o,u,fe,d),ee=o.memoizedState),(j=ws||_0(o,u,j,d,te,ee,x))?(ae||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=ee),T.props=d,T.state=ee,T.context=x,d=j):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{T=o.stateNode,yp(r,o),x=o.memoizedProps,ae=Uo(u,x),T.props=ae,fe=o.pendingProps,te=T.context,ee=u.contextType,j=Ea,typeof ee=="object"&&ee!==null&&(j=vn(ee)),N=u.getDerivedStateFromProps,(ee=typeof N=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(x!==fe||te!==j)&&v0(o,T,d,j),ws=!1,te=o.memoizedState,T.state=te,du(o,d,T,_),fu();var re=o.memoizedState;x!==fe||te!==re||ws||r!==null&&r.dependencies!==null&&mf(r.dependencies)?(typeof N=="function"&&(zp(o,u,N,d),re=o.memoizedState),(ae=ws||_0(o,u,ae,d,te,re,j)||r!==null&&r.dependencies!==null&&mf(r.dependencies))?(ee||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,re,j),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,re,j)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||x===r.memoizedProps&&te===r.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&te===r.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=re),T.props=d,T.state=re,T.context=j,d=ae):(typeof T.componentDidUpdate!="function"||x===r.memoizedProps&&te===r.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&te===r.memoizedState||(o.flags|=1024),d=!1)}return T=d,Pf(r,o),d=(o.flags&128)!==0,T||d?(T=o.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,r!==null&&d?(o.child=Lo(o,r.child,null,_),o.child=Lo(o,null,u,_)):Tn(r,o,u,_),o.memoizedState=T.state,r=o.child):r=Fr(r,o,_),r}function P0(r,o,u,d){return Ro(),o.flags|=256,Tn(r,o,u,d),o.child}var jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yp(r){return{baseLanes:r,cachePool:wv()}}function $p(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=ai),r}function L0(r,o,u){var d=o.pendingProps,_=!1,T=(o.flags&128)!==0,x;if((x=T)||(x=r!==null&&r.memoizedState===null?!1:(Gt.current&2)!==0),x&&(_=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,r===null){if(nt){if(_?Cs(o):bs(),(r=Ct)?(r=HT(r,xi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:vs!==null?{id:pr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},u=pv(r),u.return=o,o.child=u,_n=o,Ct=null)):r=null,r===null)throw Es(o);return Rm(r)?o.lanes=32:o.lanes=536870912,null}var N=d.children;return d=d.fallback,_?(bs(),_=o.mode,N=Lf({mode:"hidden",children:N},_),d=Io(d,_,u,null),N.return=o,d.return=o,N.sibling=d,o.child=N,d=o.child,d.memoizedState=Yp(u),d.childLanes=$p(r,x,u),o.memoizedState=jp,yu(null,d)):(Cs(o),Jp(o,N))}var j=r.memoizedState;if(j!==null&&(N=j.dehydrated,N!==null)){if(T)o.flags&256?(Cs(o),o.flags&=-257,o=Kp(r,o,u)):o.memoizedState!==null?(bs(),o.child=r.child,o.flags|=128,o=null):(bs(),N=d.fallback,_=o.mode,d=Lf({mode:"visible",children:d.children},_),N=Io(N,_,u,null),N.flags|=2,d.return=o,N.return=o,d.sibling=N,o.child=d,Lo(o,r.child,null,u),d=o.child,d.memoizedState=Yp(u),d.childLanes=$p(r,x,u),o.memoizedState=jp,o=yu(null,d));else if(Cs(o),Rm(N)){if(x=N.nextSibling&&N.nextSibling.dataset,x)var ee=x.dgst;x=ee,d=Error(i(419)),d.stack="",d.digest=x,su({value:d,source:null,stack:null}),o=Kp(r,o,u)}else if(Zt||xa(r,o,u,!1),x=(u&r.childLanes)!==0,Zt||x){if(x=wt,x!==null&&(d=Ol(x,u),d!==0&&d!==j.retryLane))throw j.retryLane=d,bo(r,d),Qn(x,r,d),Hp;Im(N)||Gf(),o=Kp(r,o,u)}else Im(N)?(o.flags|=192,o.child=r.child,o=null):(r=j.treeContext,Ct=bi(N.nextSibling),_n=o,nt=!0,Ts=null,xi=!1,r!==null&&yv(o,r),o=Jp(o,d.children),o.flags|=4096);return o}return _?(bs(),N=d.fallback,_=o.mode,j=r.child,ee=j.sibling,d=Dr(j,{mode:"hidden",children:d.children}),d.subtreeFlags=j.subtreeFlags&65011712,ee!==null?N=Dr(ee,N):(N=Io(N,_,u,null),N.flags|=2),N.return=o,d.return=o,d.sibling=N,o.child=d,yu(null,d),d=o.child,N=r.child.memoizedState,N===null?N=Yp(u):(_=N.cachePool,_!==null?(j=Xt._currentValue,_=_.parent!==j?{parent:j,pool:j}:_):_=wv(),N={baseLanes:N.baseLanes|u,cachePool:_}),d.memoizedState=N,d.childLanes=$p(r,x,u),o.memoizedState=jp,yu(r.child,d)):(Cs(o),u=r.child,r=u.sibling,u=Dr(u,{mode:"visible",children:d.children}),u.return=o,u.sibling=null,r!==null&&(x=o.deletions,x===null?(o.deletions=[r],o.flags|=16):x.push(r)),o.child=u,o.memoizedState=null,u)}function Jp(r,o){return o=Lf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Lf(r,o){return r=ii(22,r,null,o),r.lanes=0,r}function Kp(r,o,u){return Lo(o,r.child,null,u),r=Jp(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function V0(r,o,u){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o),cp(r.return,o,u)}function Qp(r,o,u,d,_,T){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:_,treeForkCount:T}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=u,x.tailMode=_,x.treeForkCount=T)}function U0(r,o,u){var d=o.pendingProps,_=d.revealOrder,T=d.tail;d=d.children;var x=Gt.current,N=(x&2)!==0;if(N?(x=x&1|2,o.flags|=128):x&=1,M(Gt,x),Tn(r,o,d,u),d=nt?ru:0,!N&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&V0(r,u,o);else if(r.tag===19)V0(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(_){case"forwards":for(u=o.child,_=null;u!==null;)r=u.alternate,r!==null&&wf(r)===null&&(_=u),u=u.sibling;u=_,u===null?(_=o.child,o.child=null):(_=u.sibling,u.sibling=null),Qp(o,!1,_,u,T,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=o.child,o.child=null;_!==null;){if(r=_.alternate,r!==null&&wf(r)===null){o.child=_;break}r=_.sibling,_.sibling=u,u=_,_=r}Qp(o,!0,u,null,T,d);break;case"together":Qp(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Fr(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Ns|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(xa(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=Dr(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Dr(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Xp(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&mf(r)))}function iR(r,o,u){switch(o.tag){case 3:Re(o,o.stateNode.containerInfo),Ss(o,Xt,r.memoizedState.cache),Ro();break;case 27:case 5:on(o);break;case 4:Re(o,o.stateNode.containerInfo);break;case 10:Ss(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Sp(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Cs(o),o.flags|=128,null):(u&o.child.childLanes)!==0?L0(r,o,u):(Cs(o),r=Fr(r,o,u),r!==null?r.sibling:null);Cs(o);break;case 19:var _=(r.flags&128)!==0;if(d=(u&o.childLanes)!==0,d||(xa(r,o,u,!1),d=(u&o.childLanes)!==0),_){if(d)return U0(r,o,u);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),M(Gt,Gt.current),d)break;return null;case 22:return o.lanes=0,R0(r,o,u,o.pendingProps);case 24:Ss(o,Xt,r.memoizedState.cache)}return Fr(r,o,u)}function O0(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)Zt=!0;else{if(!Xp(r,u)&&(o.flags&128)===0)return Zt=!1,iR(r,o,u);Zt=(r.flags&131072)!==0}else Zt=!1,nt&&(o.flags&1048576)!==0&&gv(o,ru,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(r=Do(o.elementType),o.type=r,typeof r=="function")np(r)?(d=Uo(r,d),o.tag=1,o=D0(null,o,r,d,u)):(o.tag=0,o=Gp(null,o,r,d,u));else{if(r!=null){var _=r.$$typeof;if(_===X){o.tag=11,o=C0(null,o,r,d,u);break e}else if(_===R){o.tag=14,o=b0(null,o,r,d,u);break e}}throw o=oe(r)||r,Error(i(306,o,""))}}return o;case 0:return Gp(r,o,o.type,o.pendingProps,u);case 1:return d=o.type,_=Uo(d,o.pendingProps),D0(r,o,d,_,u);case 3:e:{if(Re(o,o.stateNode.containerInfo),r===null)throw Error(i(387));d=o.pendingProps;var T=o.memoizedState;_=T.element,yp(r,o),du(o,d,null,u);var x=o.memoizedState;if(d=x.cache,Ss(o,Xt,d),d!==T.cache&&fp(o,[Xt],u,!0),fu(),d=x.element,T.isDehydrated)if(T={element:d,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=P0(r,o,d,u);break e}else if(d!==_){_=Si(Error(i(424)),o),su(_),o=P0(r,o,d,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ct=bi(r.firstChild),_n=o,nt=!0,Ts=null,xi=!0,u=Rv(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ro(),d===_){o=Fr(r,o,u);break e}Tn(r,o,d,u)}o=o.child}return o;case 26:return Pf(r,o),r===null?(u=KT(o.type,null,o.pendingProps,null))?o.memoizedState=u:nt||(u=o.type,r=o.pendingProps,d=Xf(Te.current).createElement(u),d[Jt]=o,d[fn]=r,En(d,u,r),Kt(d),o.stateNode=d):o.memoizedState=KT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return on(o),r===null&&nt&&(d=o.stateNode=YT(o.type,o.pendingProps,Te.current),_n=o,xi=!0,_=Ct,Ls(o.type)?(Nm=_,Ct=bi(d.firstChild)):Ct=_),Tn(r,o,o.pendingProps.children,u),Pf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&nt&&((_=d=Ct)&&(d=DR(d,o.type,o.pendingProps,xi),d!==null?(o.stateNode=d,_n=o,Ct=bi(d.firstChild),xi=!1,_=!0):_=!1),_||Es(o)),on(o),_=o.type,T=o.pendingProps,x=r!==null?r.memoizedProps:null,d=T.children,xm(_,T)?d=null:x!==null&&xm(_,x)&&(o.flags|=32),o.memoizedState!==null&&(_=Ap(r,o,J1,null,null,u),Mu._currentValue=_),Pf(r,o),Tn(r,o,d,u),o.child;case 6:return r===null&&nt&&((r=u=Ct)&&(u=PR(u,o.pendingProps,xi),u!==null?(o.stateNode=u,_n=o,Ct=null,r=!0):r=!1),r||Es(o)),null;case 13:return L0(r,o,u);case 4:return Re(o,o.stateNode.containerInfo),d=o.pendingProps,r===null?o.child=Lo(o,null,d,u):Tn(r,o,d,u),o.child;case 11:return C0(r,o,o.type,o.pendingProps,u);case 7:return Tn(r,o,o.pendingProps,u),o.child;case 8:return Tn(r,o,o.pendingProps.children,u),o.child;case 12:return Tn(r,o,o.pendingProps.children,u),o.child;case 10:return d=o.pendingProps,Ss(o,o.type,d.value),Tn(r,o,d.children,u),o.child;case 9:return _=o.type._context,d=o.pendingProps.children,ko(o),_=vn(_),d=d(_),o.flags|=1,Tn(r,o,d,u),o.child;case 14:return b0(r,o,o.type,o.pendingProps,u);case 15:return I0(r,o,o.type,o.pendingProps,u);case 19:return U0(r,o,u);case 31:return nR(r,o,u);case 22:return R0(r,o,u,o.pendingProps);case 24:return ko(o),d=vn(Xt),r===null?(_=pp(),_===null&&(_=wt,T=dp(),_.pooledCache=T,T.refCount++,T!==null&&(_.pooledCacheLanes|=u),_=T),o.memoizedState={parent:d,cache:_},gp(o),Ss(o,Xt,_)):((r.lanes&u)!==0&&(yp(r,o),du(o,null,null,u),fu()),_=r.memoizedState,T=o.memoizedState,_.parent!==d?(_={parent:d,cache:d},o.memoizedState=_,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=_),Ss(o,Xt,d)):(d=T.cache,Ss(o,Xt,d),d!==_.cache&&fp(o,[Xt],u,!0))),Tn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function zr(r){r.flags|=4}function Wp(r,o,u,d,_){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(_&335544128)===_)if(r.stateNode.complete)r.flags|=8192;else if(fT())r.flags|=8192;else throw Po=vf,mp}else r.flags&=-16777217}function F0(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!eE(o))if(fT())r.flags|=8192;else throw Po=vf,mp}function Vf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?qc():536870912,r.lanes|=o,Ua|=o)}function _u(r,o){if(!nt)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function bt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,d=0;if(o)for(var _=r.child;_!==null;)u|=_.lanes|_.childLanes,d|=_.subtreeFlags&65011712,d|=_.flags&65011712,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)u|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=d,r.childLanes=u,o}function rR(r,o,u){var d=o.pendingProps;switch(op(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(o),null;case 1:return bt(o),null;case 3:return u=o.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Vr(Xt),ze(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Aa(o)?zr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,lp())),bt(o),null;case 26:var _=o.type,T=o.memoizedState;return r===null?(zr(o),T!==null?(bt(o),F0(o,T)):(bt(o),Wp(o,_,null,d,u))):T?T!==r.memoizedState?(zr(o),bt(o),F0(o,T)):(bt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==d&&zr(o),bt(o),Wp(o,_,r,d,u)),null;case 27:if(Dt(o),u=Te.current,_=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&zr(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return bt(o),null}r=se.current,Aa(o)?_v(o):(r=YT(_,d,u),o.stateNode=r,zr(o))}return bt(o),null;case 5:if(Dt(o),_=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&zr(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return bt(o),null}if(T=se.current,Aa(o))_v(o);else{var x=Xf(Te.current);switch(T){case 1:T=x.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:T=x.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":T=x.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":T=x.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":T=x.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof d.is=="string"?x.createElement("select",{is:d.is}):x.createElement("select"),d.multiple?T.multiple=!0:d.size&&(T.size=d.size);break;default:T=typeof d.is=="string"?x.createElement(_,{is:d.is}):x.createElement(_)}}T[Jt]=o,T[fn]=d;e:for(x=o.child;x!==null;){if(x.tag===5||x.tag===6)T.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===o)break e;for(;x.sibling===null;){if(x.return===null||x.return===o)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}o.stateNode=T;e:switch(En(T,_,d),_){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&zr(o)}}return bt(o),Wp(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==d&&zr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(i(166));if(r=Te.current,Aa(o)){if(r=o.stateNode,u=o.memoizedProps,d=null,_=_n,_!==null)switch(_.tag){case 27:case 5:d=_.memoizedProps}r[Jt]=o,r=!!(r.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||LT(r.nodeValue,u)),r||Es(o,!0)}else r=Xf(r).createTextNode(d),r[Jt]=o,o.stateNode=r}return bt(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(d=Aa(o),u!==null){if(r===null){if(!d)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Jt]=o}else Ro(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;bt(o),r=!1}else u=lp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(si(o),o):(si(o),null);if((o.flags&128)!==0)throw Error(i(558))}return bt(o),null;case 13:if(d=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_=Aa(o),d!==null&&d.dehydrated!==null){if(r===null){if(!_)throw Error(i(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Jt]=o}else Ro(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;bt(o),_=!1}else _=lp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=_),_=!0;if(!_)return o.flags&256?(si(o),o):(si(o),null)}return si(o),(o.flags&128)!==0?(o.lanes=u,o):(u=d!==null,r=r!==null&&r.memoizedState!==null,u&&(d=o.child,_=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(_=d.alternate.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==_&&(d.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),Vf(o,o.updateQueue),bt(o),null);case 4:return ze(),r===null&&Tm(o.stateNode.containerInfo),bt(o),null;case 10:return Vr(o.type),bt(o),null;case 19:if(W(Gt),d=o.memoizedState,d===null)return bt(o),null;if(_=(o.flags&128)!==0,T=d.rendering,T===null)if(_)_u(d,!1);else{if(Ot!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(T=wf(r),T!==null){for(o.flags|=128,_u(d,!1),r=T.updateQueue,o.updateQueue=r,Vf(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)hv(u,r),u=u.sibling;return M(Gt,Gt.current&1|2),nt&&Pr(o,d.treeForkCount),o.child}r=r.sibling}d.tail!==null&&gn()>qf&&(o.flags|=128,_=!0,_u(d,!1),o.lanes=4194304)}else{if(!_)if(r=wf(T),r!==null){if(o.flags|=128,_=!0,r=r.updateQueue,o.updateQueue=r,Vf(o,r),_u(d,!0),d.tail===null&&d.tailMode==="hidden"&&!T.alternate&&!nt)return bt(o),null}else 2*gn()-d.renderingStartTime>qf&&u!==536870912&&(o.flags|=128,_=!0,_u(d,!1),o.lanes=4194304);d.isBackwards?(T.sibling=o.child,o.child=T):(r=d.last,r!==null?r.sibling=T:o.child=T,d.last=T)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=gn(),r.sibling=null,u=Gt.current,M(Gt,_?u&1|2:u&1),nt&&Pr(o,d.treeForkCount),r):(bt(o),null);case 22:case 23:return si(o),Ep(),d=o.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(u&536870912)!==0&&(o.flags&128)===0&&(bt(o),o.subtreeFlags&6&&(o.flags|=8192)):bt(o),u=o.updateQueue,u!==null&&Vf(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048),r!==null&&W(Mo),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Vr(Xt),bt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function sR(r,o){switch(op(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Vr(Xt),ze(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Dt(o),null;case 31:if(o.memoizedState!==null){if(si(o),o.alternate===null)throw Error(i(340));Ro()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(si(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Ro()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return W(Gt),null;case 4:return ze(),null;case 10:return Vr(o.type),null;case 22:case 23:return si(o),Ep(),r!==null&&W(Mo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Vr(Xt),null;case 25:return null;default:return null}}function z0(r,o){switch(op(o),o.tag){case 3:Vr(Xt),ze();break;case 26:case 27:case 5:Dt(o);break;case 4:ze();break;case 31:o.memoizedState!==null&&si(o);break;case 13:si(o);break;case 19:W(Gt);break;case 10:Vr(o.type);break;case 22:case 23:si(o),Ep(),r!==null&&W(Mo);break;case 24:Vr(Xt)}}function vu(r,o){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var _=d.next;u=_;do{if((u.tag&r)===r){d=void 0;var T=u.create,x=u.inst;d=T(),x.destroy=d}u=u.next}while(u!==_)}}catch(N){gt(o,o.return,N)}}function Is(r,o,u){try{var d=o.updateQueue,_=d!==null?d.lastEffect:null;if(_!==null){var T=_.next;d=T;do{if((d.tag&r)===r){var x=d.inst,N=x.destroy;if(N!==void 0){x.destroy=void 0,_=o;var j=u,ee=N;try{ee()}catch(ae){gt(_,j,ae)}}}d=d.next}while(d!==T)}}catch(ae){gt(o,o.return,ae)}}function q0(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{kv(o,u)}catch(d){gt(r,r.return,d)}}}function B0(r,o,u){u.props=Uo(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(d){gt(r,o,d)}}function Tu(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof u=="function"?r.refCleanup=u(d):u.current=d}}catch(_){gt(r,o,_)}}function gr(r,o){var u=r.ref,d=r.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(_){gt(r,o,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){gt(r,o,_)}else u.current=null}function H0(r){var o=r.type,u=r.memoizedProps,d=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(_){gt(r,r.return,_)}}function Zp(r,o,u){try{var d=r.stateNode;bR(d,r.type,u,o),d[fn]=o}catch(_){gt(r,r.return,_)}}function G0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ls(r.type)||r.tag===4}function em(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||G0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ls(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tm(r,o,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Vi));else if(d!==4&&(d===27&&Ls(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(tm(r,o,u),r=r.sibling;r!==null;)tm(r,o,u),r=r.sibling}function Uf(r,o,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(d!==4&&(d===27&&Ls(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Uf(r,o,u),r=r.sibling;r!==null;)Uf(r,o,u),r=r.sibling}function j0(r){var o=r.stateNode,u=r.memoizedProps;try{for(var d=r.type,_=o.attributes;_.length;)o.removeAttributeNode(_[0]);En(o,d,u),o[Jt]=r,o[fn]=u}catch(T){gt(r,r.return,T)}}var qr=!1,en=!1,nm=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,hn=null;function oR(r,o){if(r=r.containerInfo,wm=rd,r=rv(r),Kh(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var _=d.anchorOffset,T=d.focusNode;d=d.focusOffset;try{u.nodeType,T.nodeType}catch{u=null;break e}var x=0,N=-1,j=-1,ee=0,ae=0,fe=r,te=null;t:for(;;){for(var re;fe!==u||_!==0&&fe.nodeType!==3||(N=x+_),fe!==T||d!==0&&fe.nodeType!==3||(j=x+d),fe.nodeType===3&&(x+=fe.nodeValue.length),(re=fe.firstChild)!==null;)te=fe,fe=re;for(;;){if(fe===r)break t;if(te===u&&++ee===_&&(N=x),te===T&&++ae===d&&(j=x),(re=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=re}u=N===-1||j===-1?null:{start:N,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(Am={focusedElem:r,selectionRange:u},rd=!1,hn=o;hn!==null;)if(o=hn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,hn=r;else for(;hn!==null;){switch(o=hn,T=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)_=r[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&T!==null){r=void 0,u=o,_=T.memoizedProps,T=T.memoizedState,d=u.stateNode;try{var xe=Uo(u.type,_);r=d.getSnapshotBeforeUpdate(xe,T),d.__reactInternalSnapshotBeforeUpdate=r}catch(Le){gt(u,u.return,Le)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)bm(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":bm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,hn=r;break}hn=o.return}}function $0(r,o,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Hr(r,u),d&4&&vu(5,u);break;case 1:if(Hr(r,u),d&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(x){gt(u,u.return,x)}else{var _=Uo(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(_,o,r.__reactInternalSnapshotBeforeUpdate)}catch(x){gt(u,u.return,x)}}d&64&&q0(u),d&512&&Tu(u,u.return);break;case 3:if(Hr(r,u),d&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{kv(r,o)}catch(x){gt(u,u.return,x)}}break;case 27:o===null&&d&4&&j0(u);case 26:case 5:Hr(r,u),o===null&&d&4&&H0(u),d&512&&Tu(u,u.return);break;case 12:Hr(r,u);break;case 31:Hr(r,u),d&4&&Q0(r,u);break;case 13:Hr(r,u),d&4&&X0(r,u),d&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=mR.bind(null,u),LR(r,u))));break;case 22:if(d=u.memoizedState!==null||qr,!d){o=o!==null&&o.memoizedState!==null||en,_=qr;var T=en;qr=d,(en=o)&&!T?Gr(r,u,(u.subtreeFlags&8772)!==0):Hr(r,u),qr=_,en=T}break;case 30:break;default:Hr(r,u)}}function J0(r){var o=r.alternate;o!==null&&(r.alternate=null,J0(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&aa(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Mt=null,Yn=!1;function Br(r,o,u){for(u=u.child;u!==null;)K0(r,o,u),u=u.sibling}function K0(r,o,u){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Bt,u)}catch{}switch(u.tag){case 26:en||gr(u,o),Br(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:en||gr(u,o);var d=Mt,_=Yn;Ls(u.type)&&(Mt=u.stateNode,Yn=!1),Br(r,o,u),Ru(u.stateNode),Mt=d,Yn=_;break;case 5:en||gr(u,o);case 6:if(d=Mt,_=Yn,Mt=null,Br(r,o,u),Mt=d,Yn=_,Mt!==null)if(Yn)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(u.stateNode)}catch(T){gt(u,o,T)}else try{Mt.removeChild(u.stateNode)}catch(T){gt(u,o,T)}break;case 18:Mt!==null&&(Yn?(r=Mt,qT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),ja(r)):qT(Mt,u.stateNode));break;case 4:d=Mt,_=Yn,Mt=u.stateNode.containerInfo,Yn=!0,Br(r,o,u),Mt=d,Yn=_;break;case 0:case 11:case 14:case 15:Is(2,u,o),en||Is(4,u,o),Br(r,o,u);break;case 1:en||(gr(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"&&B0(u,o,d)),Br(r,o,u);break;case 21:Br(r,o,u);break;case 22:en=(d=en)||u.memoizedState!==null,Br(r,o,u),en=d;break;default:Br(r,o,u)}}function Q0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ja(r)}catch(u){gt(o,o.return,u)}}}function X0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ja(r)}catch(u){gt(o,o.return,u)}}function aR(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Y0),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Y0),o;default:throw Error(i(435,r.tag))}}function Of(r,o){var u=aR(r);o.forEach(function(d){if(!u.has(d)){u.add(d);var _=gR.bind(null,r,d);d.then(_,_)}})}function $n(r,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var _=u[d],T=r,x=o,N=x;e:for(;N!==null;){switch(N.tag){case 27:if(Ls(N.type)){Mt=N.stateNode,Yn=!1;break e}break;case 5:Mt=N.stateNode,Yn=!1;break e;case 3:case 4:Mt=N.stateNode.containerInfo,Yn=!0;break e}N=N.return}if(Mt===null)throw Error(i(160));K0(T,x,_),Mt=null,Yn=!1,T=_.alternate,T!==null&&(T.return=null),_.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)W0(o,r),o=o.sibling}var Bi=null;function W0(r,o){var u=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:$n(o,r),Jn(r),d&4&&(Is(3,r,r.return),vu(3,r),Is(5,r,r.return));break;case 1:$n(o,r),Jn(r),d&512&&(en||u===null||gr(u,u.return)),d&64&&qr&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var _=Bi;if($n(o,r),Jn(r),d&512&&(en||u===null||gr(u,u.return)),d&4){var T=u!==null?u.memoizedState:null;if(d=r.memoizedState,u===null)if(d===null)if(r.stateNode===null){e:{d=r.type,u=r.memoizedProps,_=_.ownerDocument||_;t:switch(d){case"title":T=_.getElementsByTagName("title")[0],(!T||T[nr]||T[Jt]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=_.createElement(d),_.head.insertBefore(T,_.querySelector("head > title"))),En(T,d,u),T[Jt]=r,Kt(T),d=T;break e;case"link":var x=WT("link","href",_).get(d+(u.href||""));if(x){for(var N=0;N<x.length;N++)if(T=x[N],T.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&T.getAttribute("rel")===(u.rel==null?null:u.rel)&&T.getAttribute("title")===(u.title==null?null:u.title)&&T.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){x.splice(N,1);break t}}T=_.createElement(d),En(T,d,u),_.head.appendChild(T);break;case"meta":if(x=WT("meta","content",_).get(d+(u.content||""))){for(N=0;N<x.length;N++)if(T=x[N],T.getAttribute("content")===(u.content==null?null:""+u.content)&&T.getAttribute("name")===(u.name==null?null:u.name)&&T.getAttribute("property")===(u.property==null?null:u.property)&&T.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&T.getAttribute("charset")===(u.charSet==null?null:u.charSet)){x.splice(N,1);break t}}T=_.createElement(d),En(T,d,u),_.head.appendChild(T);break;default:throw Error(i(468,d))}T[Jt]=r,Kt(T),d=T}r.stateNode=d}else ZT(_,r.type,r.stateNode);else r.stateNode=XT(_,d,r.memoizedProps);else T!==d?(T===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):T.count--,d===null?ZT(_,r.type,r.stateNode):XT(_,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Zp(r,r.memoizedProps,u.memoizedProps)}break;case 27:$n(o,r),Jn(r),d&512&&(en||u===null||gr(u,u.return)),u!==null&&d&4&&Zp(r,r.memoizedProps,u.memoizedProps);break;case 5:if($n(o,r),Jn(r),d&512&&(en||u===null||gr(u,u.return)),r.flags&32){_=r.stateNode;try{jn(_,"")}catch(xe){gt(r,r.return,xe)}}d&4&&r.stateNode!=null&&(_=r.memoizedProps,Zp(r,_,u!==null?u.memoizedProps:_)),d&1024&&(nm=!0);break;case 6:if($n(o,r),Jn(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,u=r.stateNode;try{u.nodeValue=d}catch(xe){gt(r,r.return,xe)}}break;case 3:if(ed=null,_=Bi,Bi=Wf(o.containerInfo),$n(o,r),Bi=_,Jn(r),d&4&&u!==null&&u.memoizedState.isDehydrated)try{ja(o.containerInfo)}catch(xe){gt(r,r.return,xe)}nm&&(nm=!1,Z0(r));break;case 4:d=Bi,Bi=Wf(r.stateNode.containerInfo),$n(o,r),Jn(r),Bi=d;break;case 12:$n(o,r),Jn(r);break;case 31:$n(o,r),Jn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Of(r,d)));break;case 13:$n(o,r),Jn(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(zf=gn()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Of(r,d)));break;case 22:_=r.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,ee=qr,ae=en;if(qr=ee||_,en=ae||j,$n(o,r),en=ae,qr=ee,Jn(r),d&8192)e:for(o=r.stateNode,o._visibility=_?o._visibility&-2:o._visibility|1,_&&(u===null||j||qr||en||Oo(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){j=u=o;try{if(T=j.stateNode,_)x=T.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{N=j.stateNode;var fe=j.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;N.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(xe){gt(j,j.return,xe)}}}else if(o.tag===6){if(u===null){j=o;try{j.stateNode.nodeValue=_?"":j.memoizedProps}catch(xe){gt(j,j.return,xe)}}}else if(o.tag===18){if(u===null){j=o;try{var re=j.stateNode;_?BT(re,!0):BT(j.stateNode,!1)}catch(xe){gt(j,j.return,xe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=r.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Of(r,u))));break;case 19:$n(o,r),Jn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Of(r,d)));break;case 30:break;case 21:break;default:$n(o,r),Jn(r)}}function Jn(r){var o=r.flags;if(o&2){try{for(var u,d=r.return;d!==null;){if(G0(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,T=em(r);Uf(r,T,_);break;case 5:var x=u.stateNode;u.flags&32&&(jn(x,""),u.flags&=-33);var N=em(r);Uf(r,N,x);break;case 3:case 4:var j=u.stateNode.containerInfo,ee=em(r);tm(r,ee,j);break;default:throw Error(i(161))}}catch(ae){gt(r,r.return,ae)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Z0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;Z0(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Hr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)$0(r,o.alternate,o),o=o.sibling}function Oo(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Is(4,o,o.return),Oo(o);break;case 1:gr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&B0(o,o.return,u),Oo(o);break;case 27:Ru(o.stateNode);case 26:case 5:gr(o,o.return),Oo(o);break;case 22:o.memoizedState===null&&Oo(o);break;case 30:Oo(o);break;default:Oo(o)}r=r.sibling}}function Gr(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,_=r,T=o,x=T.flags;switch(T.tag){case 0:case 11:case 15:Gr(_,T,u),vu(4,T);break;case 1:if(Gr(_,T,u),d=T,_=d.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ee){gt(d,d.return,ee)}if(d=T,_=d.updateQueue,_!==null){var N=d.stateNode;try{var j=_.shared.hiddenCallbacks;if(j!==null)for(_.shared.hiddenCallbacks=null,_=0;_<j.length;_++)Nv(j[_],N)}catch(ee){gt(d,d.return,ee)}}u&&x&64&&q0(T),Tu(T,T.return);break;case 27:j0(T);case 26:case 5:Gr(_,T,u),u&&d===null&&x&4&&H0(T),Tu(T,T.return);break;case 12:Gr(_,T,u);break;case 31:Gr(_,T,u),u&&x&4&&Q0(_,T);break;case 13:Gr(_,T,u),u&&x&4&&X0(_,T);break;case 22:T.memoizedState===null&&Gr(_,T,u),Tu(T,T.return);break;case 30:break;default:Gr(_,T,u)}o=o.sibling}}function im(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&ou(u))}function rm(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ou(r))}function Hi(r,o,u,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)eT(r,o,u,d),o=o.sibling}function eT(r,o,u,d){var _=o.flags;switch(o.tag){case 0:case 11:case 15:Hi(r,o,u,d),_&2048&&vu(9,o);break;case 1:Hi(r,o,u,d);break;case 3:Hi(r,o,u,d),_&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ou(r)));break;case 12:if(_&2048){Hi(r,o,u,d),r=o.stateNode;try{var T=o.memoizedProps,x=T.id,N=T.onPostCommit;typeof N=="function"&&N(x,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){gt(o,o.return,j)}}else Hi(r,o,u,d);break;case 31:Hi(r,o,u,d);break;case 13:Hi(r,o,u,d);break;case 23:break;case 22:T=o.stateNode,x=o.alternate,o.memoizedState!==null?T._visibility&2?Hi(r,o,u,d):Eu(r,o):T._visibility&2?Hi(r,o,u,d):(T._visibility|=2,Pa(r,o,u,d,(o.subtreeFlags&10256)!==0||!1)),_&2048&&im(x,o);break;case 24:Hi(r,o,u,d),_&2048&&rm(o.alternate,o);break;default:Hi(r,o,u,d)}}function Pa(r,o,u,d,_){for(_=_&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var T=r,x=o,N=u,j=d,ee=x.flags;switch(x.tag){case 0:case 11:case 15:Pa(T,x,N,j,_),vu(8,x);break;case 23:break;case 22:var ae=x.stateNode;x.memoizedState!==null?ae._visibility&2?Pa(T,x,N,j,_):Eu(T,x):(ae._visibility|=2,Pa(T,x,N,j,_)),_&&ee&2048&&im(x.alternate,x);break;case 24:Pa(T,x,N,j,_),_&&ee&2048&&rm(x.alternate,x);break;default:Pa(T,x,N,j,_)}o=o.sibling}}function Eu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,d=o,_=d.flags;switch(d.tag){case 22:Eu(u,d),_&2048&&im(d.alternate,d);break;case 24:Eu(u,d),_&2048&&rm(d.alternate,d);break;default:Eu(u,d)}o=o.sibling}}var Su=8192;function La(r,o,u){if(r.subtreeFlags&Su)for(r=r.child;r!==null;)tT(r,o,u),r=r.sibling}function tT(r,o,u){switch(r.tag){case 26:La(r,o,u),r.flags&Su&&r.memoizedState!==null&&$R(u,Bi,r.memoizedState,r.memoizedProps);break;case 5:La(r,o,u);break;case 3:case 4:var d=Bi;Bi=Wf(r.stateNode.containerInfo),La(r,o,u),Bi=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=Su,Su=16777216,La(r,o,u),Su=d):La(r,o,u));break;default:La(r,o,u)}}function nT(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function wu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];hn=d,rT(d,r)}nT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iT(r),r=r.sibling}function iT(r){switch(r.tag){case 0:case 11:case 15:wu(r),r.flags&2048&&Is(9,r,r.return);break;case 3:wu(r);break;case 12:wu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Ff(r)):wu(r);break;default:wu(r)}}function Ff(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];hn=d,rT(d,r)}nT(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Is(8,o,o.return),Ff(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Ff(o));break;default:Ff(o)}r=r.sibling}}function rT(r,o){for(;hn!==null;){var u=hn;switch(u.tag){case 0:case 11:case 15:Is(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ou(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,hn=d;else e:for(u=r;hn!==null;){d=hn;var _=d.sibling,T=d.return;if(J0(d),d===u){hn=null;break e}if(_!==null){_.return=T,hn=_;break e}hn=T}}}var lR={getCacheForType:function(r){var o=vn(Xt),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return vn(Xt).controller.signal}},uR=typeof WeakMap=="function"?WeakMap:Map,ht=0,wt=null,$e=null,Qe=0,mt=0,oi=null,Rs=!1,Va=!1,sm=!1,jr=0,Ot=0,Ns=0,Fo=0,om=0,ai=0,Ua=0,Au=null,Kn=null,am=!1,zf=0,sT=0,qf=1/0,Bf=null,ks=null,an=0,Ms=null,Oa=null,Yr=0,lm=0,um=null,oT=null,xu=0,cm=null;function li(){return(ht&2)!==0&&Qe!==0?Qe&-Qe:K.T!==null?gm():Bc()}function aT(){if(ai===0)if((Qe&536870912)===0||nt){var r=fo;fo<<=1,(fo&3932160)===0&&(fo=262144),ai=r}else ai=536870912;return r=ri.current,r!==null&&(r.flags|=32),ai}function Qn(r,o,u){(r===wt&&(mt===2||mt===9)||r.cancelPendingCommit!==null)&&(Fa(r,0),Ds(r,Qe,ai,!1)),ho(r,u),((ht&2)===0||r!==wt)&&(r===wt&&((ht&2)===0&&(Fo|=u),Ot===4&&Ds(r,Qe,ai,!1)),yr(r))}function lT(r,o,u){if((ht&6)!==0)throw Error(i(327));var d=!u&&(o&127)===0&&(o&r.expiredLanes)===0||Di(r,o),_=d?dR(r,o):dm(r,o,!0),T=d;do{if(_===0){Va&&!d&&Ds(r,o,0,!1);break}else{if(u=r.current.alternate,T&&!cR(u)){_=dm(r,o,!1),T=!1;continue}if(_===2){if(T=o,r.errorRecoveryDisabledLanes&T)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var N=r;_=Au;var j=N.current.memoizedState.isDehydrated;if(j&&(Fa(N,x).flags|=256),x=dm(N,x,!1),x!==2){if(sm&&!j){N.errorRecoveryDisabledLanes|=T,Fo|=T,_=4;break e}T=Kn,Kn=_,T!==null&&(Kn===null?Kn=T:Kn.push.apply(Kn,T))}_=x}if(T=!1,_!==2)continue}}if(_===1){Fa(r,0),Ds(r,o,0,!0);break}e:{switch(d=r,T=_,T){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ds(d,o,ai,!Rs);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(_=zf+300-gn(),10<_)){if(Ds(d,o,ai,!Rs),Zi(d,0,!0)!==0)break e;Yr=o,d.timeoutHandle=FT(uT.bind(null,d,u,Kn,Bf,am,o,ai,Fo,Ua,Rs,T,"Throttled",-0,0),_);break e}uT(d,u,Kn,Bf,am,o,ai,Fo,Ua,Rs,T,null,-0,0)}}break}while(!0);yr(r)}function uT(r,o,u,d,_,T,x,N,j,ee,ae,fe,te,re){if(r.timeoutHandle=-1,fe=o.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},tT(o,T,fe);var xe=(T&62914560)===T?zf-gn():(T&4194048)===T?sT-gn():0;if(xe=JR(fe,xe),xe!==null){Yr=T,r.cancelPendingCommit=xe(yT.bind(null,r,o,T,u,d,_,x,N,j,ae,fe,null,te,re)),Ds(r,T,x,!ee);return}}yT(r,o,T,u,d,_,x,N,j)}function cR(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var _=u[d],T=_.getSnapshot;_=_.value;try{if(!ni(T(),_))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ds(r,o,u,d){o&=~om,o&=~Fo,r.suspendedLanes|=o,r.pingedLanes&=~o,d&&(r.warmLanes|=o),d=r.expirationTimes;for(var _=o;0<_;){var T=31-tt(_),x=1<<T;d[T]=-1,_&=~x}u!==0&&po(r,u,o)}function Hf(){return(ht&6)===0?(Cu(0),!1):!0}function fm(){if($e!==null){if(mt===0)var r=$e.return;else r=$e,Lr=No=null,bp(r),Ra=null,lu=0,r=$e;for(;r!==null;)z0(r.alternate,r),r=r.return;$e=null}}function Fa(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,NR(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Yr=0,fm(),wt=r,$e=u=Dr(r.current,null),Qe=o,mt=0,oi=null,Rs=!1,Va=Di(r,o),sm=!1,Ua=ai=om=Fo=Ns=Ot=0,Kn=Au=null,am=!1,(o&8)!==0&&(o|=o&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=o;0<d;){var _=31-tt(d),T=1<<_;o|=r[_],d&=~T}return jr=o,cf(),u}function cT(r,o){Be=null,K.H=gu,o===Ia||o===_f?(o=Cv(),mt=3):o===mp?(o=Cv(),mt=4):mt=o===Hp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,oi=o,$e===null&&(Ot=1,Mf(r,Si(o,r.current)))}function fT(){var r=ri.current;return r===null?!0:(Qe&4194048)===Qe?Ci===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?r===Ci:!1}function dT(){var r=K.H;return K.H=gu,r===null?gu:r}function hT(){var r=K.A;return K.A=lR,r}function Gf(){Ot=4,Rs||(Qe&4194048)!==Qe&&ri.current!==null||(Va=!0),(Ns&134217727)===0&&(Fo&134217727)===0||wt===null||Ds(wt,Qe,ai,!1)}function dm(r,o,u){var d=ht;ht|=2;var _=dT(),T=hT();(wt!==r||Qe!==o)&&(Bf=null,Fa(r,o)),o=!1;var x=Ot;e:do try{if(mt!==0&&$e!==null){var N=$e,j=oi;switch(mt){case 8:fm(),x=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(o=!0);var ee=mt;if(mt=0,oi=null,za(r,N,j,ee),u&&Va){x=0;break e}break;default:ee=mt,mt=0,oi=null,za(r,N,j,ee)}}fR(),x=Ot;break}catch(ae){cT(r,ae)}while(!0);return o&&r.shellSuspendCounter++,Lr=No=null,ht=d,K.H=_,K.A=T,$e===null&&(wt=null,Qe=0,cf()),x}function fR(){for(;$e!==null;)pT($e)}function dR(r,o){var u=ht;ht|=2;var d=dT(),_=hT();wt!==r||Qe!==o?(Bf=null,qf=gn()+500,Fa(r,o)):Va=Di(r,o);e:do try{if(mt!==0&&$e!==null){o=$e;var T=oi;t:switch(mt){case 1:mt=0,oi=null,za(r,o,T,1);break;case 2:case 9:if(Av(T)){mt=0,oi=null,mT(o);break}o=function(){mt!==2&&mt!==9||wt!==r||(mt=7),yr(r)},T.then(o,o);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Av(T)?(mt=0,oi=null,mT(o)):(mt=0,oi=null,za(r,o,T,7));break;case 5:var x=null;switch($e.tag){case 26:x=$e.memoizedState;case 5:case 27:var N=$e;if(x?eE(x):N.stateNode.complete){mt=0,oi=null;var j=N.sibling;if(j!==null)$e=j;else{var ee=N.return;ee!==null?($e=ee,jf(ee)):$e=null}break t}}mt=0,oi=null,za(r,o,T,5);break;case 6:mt=0,oi=null,za(r,o,T,6);break;case 8:fm(),Ot=6;break e;default:throw Error(i(462))}}hR();break}catch(ae){cT(r,ae)}while(!0);return Lr=No=null,K.H=d,K.A=_,ht=u,$e!==null?0:(wt=null,Qe=0,cf(),Ot)}function hR(){for(;$e!==null&&!us();)pT($e)}function pT(r){var o=O0(r.alternate,r,jr);r.memoizedProps=r.pendingProps,o===null?jf(r):$e=o}function mT(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=M0(u,o,o.pendingProps,o.type,void 0,Qe);break;case 11:o=M0(u,o,o.pendingProps,o.type.render,o.ref,Qe);break;case 5:bp(o);default:z0(u,o),o=$e=hv(o,jr),o=O0(u,o,jr)}r.memoizedProps=r.pendingProps,o===null?jf(r):$e=o}function za(r,o,u,d){Lr=No=null,bp(o),Ra=null,lu=0;var _=o.return;try{if(tR(r,_,o,u,Qe)){Ot=1,Mf(r,Si(u,r.current)),$e=null;return}}catch(T){if(_!==null)throw $e=_,T;Ot=1,Mf(r,Si(u,r.current)),$e=null;return}o.flags&32768?(nt||d===1?r=!0:Va||(Qe&536870912)!==0?r=!1:(Rs=r=!0,(d===2||d===9||d===3||d===6)&&(d=ri.current,d!==null&&d.tag===13&&(d.flags|=16384))),gT(o,r)):jf(o)}function jf(r){var o=r;do{if((o.flags&32768)!==0){gT(o,Rs);return}r=o.return;var u=rR(o.alternate,o,jr);if(u!==null){$e=u;return}if(o=o.sibling,o!==null){$e=o;return}$e=o=r}while(o!==null);Ot===0&&(Ot=5)}function gT(r,o){do{var u=sR(r.alternate,r);if(u!==null){u.flags&=32767,$e=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){$e=r;return}$e=r=u}while(r!==null);Ot=6,$e=null}function yT(r,o,u,d,_,T,x,N,j){r.cancelPendingCommit=null;do Yf();while(an!==0);if((ht&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(T=o.lanes|o.childLanes,T|=ep,jh(r,u,T,x,N,j),r===wt&&($e=wt=null,Qe=0),Oa=o,Ms=r,Yr=u,lm=T,um=_,oT=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,yR(De,function(){return ST(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=K.T,K.T=null,_=he.p,he.p=2,x=ht,ht|=4;try{oR(r,o,u)}finally{ht=x,he.p=_,K.T=d}}an=1,_T(),vT(),TT()}}function _T(){if(an===1){an=0;var r=Ms,o=Oa,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=K.T,K.T=null;var d=he.p;he.p=2;var _=ht;ht|=4;try{W0(o,r);var T=Am,x=rv(r.containerInfo),N=T.focusedElem,j=T.selectionRange;if(x!==N&&N&&N.ownerDocument&&iv(N.ownerDocument.documentElement,N)){if(j!==null&&Kh(N)){var ee=j.start,ae=j.end;if(ae===void 0&&(ae=ee),"selectionStart"in N)N.selectionStart=ee,N.selectionEnd=Math.min(ae,N.value.length);else{var fe=N.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var re=te.getSelection(),xe=N.textContent.length,Le=Math.min(j.start,xe),Et=j.end===void 0?Le:Math.min(j.end,xe);!re.extend&&Le>Et&&(x=Et,Et=Le,Le=x);var J=nv(N,Le),$=nv(N,Et);if(J&&$&&(re.rangeCount!==1||re.anchorNode!==J.node||re.anchorOffset!==J.offset||re.focusNode!==$.node||re.focusOffset!==$.offset)){var Z=fe.createRange();Z.setStart(J.node,J.offset),re.removeAllRanges(),Le>Et?(re.addRange(Z),re.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),re.addRange(Z))}}}}for(fe=[],re=N;re=re.parentNode;)re.nodeType===1&&fe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<fe.length;N++){var ce=fe[N];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}rd=!!wm,Am=wm=null}finally{ht=_,he.p=d,K.T=u}}r.current=o,an=2}}function vT(){if(an===2){an=0;var r=Ms,o=Oa,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=K.T,K.T=null;var d=he.p;he.p=2;var _=ht;ht|=4;try{$0(r,o.alternate,o)}finally{ht=_,he.p=d,K.T=u}}an=3}}function TT(){if(an===4||an===3){an=0,sa();var r=Ms,o=Oa,u=Yr,d=oT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?an=5:(an=0,Oa=Ms=null,ET(r,r.pendingLanes));var _=r.pendingLanes;if(_===0&&(ks=null),Rr(u),o=o.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Bt,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=K.T,_=he.p,he.p=2,K.T=null;try{for(var T=r.onRecoverableError,x=0;x<d.length;x++){var N=d[x];T(N.value,{componentStack:N.stack})}}finally{K.T=o,he.p=_}}(Yr&3)!==0&&Yf(),yr(r),_=r.pendingLanes,(u&261930)!==0&&(_&42)!==0?r===cm?xu++:(xu=0,cm=r):xu=0,Cu(0)}}function ET(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,ou(o)))}function Yf(){return _T(),vT(),TT(),ST()}function ST(){if(an!==5)return!1;var r=Ms,o=lm;lm=0;var u=Rr(Yr),d=K.T,_=he.p;try{he.p=32>u?32:u,K.T=null,u=um,um=null;var T=Ms,x=Yr;if(an=0,Oa=Ms=null,Yr=0,(ht&6)!==0)throw Error(i(331));var N=ht;if(ht|=4,iT(T.current),eT(T,T.current,x,u),ht=N,Cu(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Bt,T)}catch{}return!0}finally{he.p=_,K.T=d,ET(r,o)}}function wT(r,o,u){o=Si(u,o),o=Bp(r.stateNode,o,2),r=xs(r,o,2),r!==null&&(ho(r,2),yr(r))}function gt(r,o,u){if(r.tag===3)wT(r,r,u);else for(;o!==null;){if(o.tag===3){wT(o,r,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ks===null||!ks.has(d))){r=Si(u,r),u=A0(2),d=xs(o,u,2),d!==null&&(x0(u,d,o,r),ho(d,2),yr(d));break}}o=o.return}}function hm(r,o,u){var d=r.pingCache;if(d===null){d=r.pingCache=new uR;var _=new Set;d.set(o,_)}else _=d.get(o),_===void 0&&(_=new Set,d.set(o,_));_.has(u)||(sm=!0,_.add(u),r=pR.bind(null,r,o,u),o.then(r,r))}function pR(r,o,u){var d=r.pingCache;d!==null&&d.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,wt===r&&(Qe&u)===u&&(Ot===4||Ot===3&&(Qe&62914560)===Qe&&300>gn()-zf?(ht&2)===0&&Fa(r,0):om|=u,Ua===Qe&&(Ua=0)),yr(r)}function AT(r,o){o===0&&(o=qc()),r=bo(r,o),r!==null&&(ho(r,o),yr(r))}function mR(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),AT(r,u)}function gR(r,o){var u=0;switch(r.tag){case 31:case 13:var d=r.stateNode,_=r.memoizedState;_!==null&&(u=_.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(o),AT(r,u)}function yR(r,o){return rt(r,o)}var $f=null,qa=null,pm=!1,Jf=!1,mm=!1,Ps=0;function yr(r){r!==qa&&r.next===null&&(qa===null?$f=qa=r:qa=qa.next=r),Jf=!0,pm||(pm=!0,vR())}function Cu(r,o){if(!mm&&Jf){mm=!0;do for(var u=!1,d=$f;d!==null;){if(r!==0){var _=d.pendingLanes;if(_===0)var T=0;else{var x=d.suspendedLanes,N=d.pingedLanes;T=(1<<31-tt(42|r)+1)-1,T&=_&~(x&~N),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(u=!0,IT(d,T))}else T=Qe,T=Zi(d,d===wt?T:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(T&3)===0||Di(d,T)||(u=!0,IT(d,T));d=d.next}while(u);mm=!1}}function _R(){xT()}function xT(){Jf=pm=!1;var r=0;Ps!==0&&RR()&&(r=Ps);for(var o=gn(),u=null,d=$f;d!==null;){var _=d.next,T=CT(d,o);T===0?(d.next=null,u===null?$f=_:u.next=_,_===null&&(qa=u)):(u=d,(r!==0||(T&3)!==0)&&(Jf=!0)),d=_}an!==0&&an!==5||Cu(r),Ps!==0&&(Ps=0)}function CT(r,o){for(var u=r.suspendedLanes,d=r.pingedLanes,_=r.expirationTimes,T=r.pendingLanes&-62914561;0<T;){var x=31-tt(T),N=1<<x,j=_[x];j===-1?((N&u)===0||(N&d)!==0)&&(_[x]=Gh(N,o)):j<=o&&(r.expiredLanes|=N),T&=~N}if(o=wt,u=Qe,u=Zi(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,u===0||r===o&&(mt===2||mt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Hn(d),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Di(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(d!==null&&Hn(d),Rr(u)){case 2:case 8:u=_e;break;case 32:u=De;break;case 268435456:u=lt;break;default:u=De}return d=bT.bind(null,r),u=rt(u,d),r.callbackPriority=o,r.callbackNode=u,o}return d!==null&&d!==null&&Hn(d),r.callbackPriority=2,r.callbackNode=null,2}function bT(r,o){if(an!==0&&an!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Yf()&&r.callbackNode!==u)return null;var d=Qe;return d=Zi(r,r===wt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(lT(r,d,o),CT(r,gn()),r.callbackNode!=null&&r.callbackNode===u?bT.bind(null,r):null)}function IT(r,o){if(Yf())return null;lT(r,o,!0)}function vR(){kR(function(){(ht&6)!==0?rt(ue,_R):xT()})}function gm(){if(Ps===0){var r=Ca;r===0&&(r=Xi,Xi<<=1,(Xi&261888)===0&&(Xi=256)),Ps=r}return Ps}function RT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:fa(""+r)}function NT(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function TR(r,o,u,d,_){if(o==="submit"&&u&&u.stateNode===_){var T=RT((_[fn]||null).action),x=d.submitter;x&&(o=(o=x[fn]||null)?RT(o.formAction):x.getAttribute("formAction"),o!==null&&(T=o,x=null));var N=new cr("action","action",null,d,_);r.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ps!==0){var j=x?NT(_,x):new FormData(_);Vp(u,{pending:!0,data:j,method:_.method,action:T},null,j)}}else typeof T=="function"&&(N.preventDefault(),j=x?NT(_,x):new FormData(_),Vp(u,{pending:!0,data:j,method:_.method,action:T},T,j))},currentTarget:_}]})}}for(var ym=0;ym<Zh.length;ym++){var _m=Zh[ym],ER=_m.toLowerCase(),SR=_m[0].toUpperCase()+_m.slice(1);qi(ER,"on"+SR)}qi(av,"onAnimationEnd"),qi(lv,"onAnimationIteration"),qi(uv,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(O1,"onTransitionRun"),qi(F1,"onTransitionStart"),qi(z1,"onTransitionCancel"),qi(cv,"onTransitionEnd"),or("onMouseEnter",["mouseout","mouseover"]),or("onMouseLeave",["mouseout","mouseover"]),or("onPointerEnter",["pointerout","pointerover"]),or("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function kT(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var d=r[u],_=d.event;d=d.listeners;e:{var T=void 0;if(o)for(var x=d.length-1;0<=x;x--){var N=d[x],j=N.instance,ee=N.currentTarget;if(N=N.listener,j!==T&&_.isPropagationStopped())break e;T=N,_.currentTarget=ee;try{T(_)}catch(ae){uf(ae)}_.currentTarget=null,T=j}else for(x=0;x<d.length;x++){if(N=d[x],j=N.instance,ee=N.currentTarget,N=N.listener,j!==T&&_.isPropagationStopped())break e;T=N,_.currentTarget=ee;try{T(_)}catch(ae){uf(ae)}_.currentTarget=null,T=j}}}}function Je(r,o){var u=o[oa];u===void 0&&(u=o[oa]=new Set);var d=r+"__bubble";u.has(d)||(MT(o,r,2,!1),u.add(d))}function vm(r,o,u){var d=0;o&&(d|=4),MT(u,r,d,o)}var Kf="_reactListening"+Math.random().toString(36).slice(2);function Tm(r){if(!r[Kf]){r[Kf]=!0,Fl.forEach(function(u){u!=="selectionchange"&&(wR.has(u)||vm(u,!1,r),vm(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Kf]||(o[Kf]=!0,vm("selectionchange",!1,o))}}function MT(r,o,u,d){switch(aE(o)){case 2:var _=XR;break;case 8:_=WR;break;default:_=Lm}u=_.bind(null,o,u,r),_=void 0,!vo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),d?_!==void 0?r.addEventListener(o,u,{capture:!0,passive:_}):r.addEventListener(o,u,!0):_!==void 0?r.addEventListener(o,u,{passive:_}):r.addEventListener(o,u,!1)}function Em(r,o,u,d,_){var T=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var N=d.stateNode.containerInfo;if(N===_)break;if(x===4)for(x=d.return;x!==null;){var j=x.tag;if((j===3||j===4)&&x.stateNode.containerInfo===_)return;x=x.return}for(;N!==null;){if(x=ir(N),x===null)return;if(j=x.tag,j===5||j===6||j===26||j===27){d=T=x;continue e}N=N.parentNode}}d=d.return}ms(function(){var ee=T,ae=_i(u),fe=[];e:{var te=fv.get(r);if(te!==void 0){var re=cr,xe=r;switch(r){case"keypress":if(Eo(u)===0)break e;case"keydown":case"keyup":re=of;break;case"focusin":xe="focus",re=wo;break;case"focusout":xe="blur",re=wo;break;case"beforeblur":case"afterblur":re=wo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=A;break;case av:case lv:case uv:re=Wc;break;case cv:re=V;break;case"scroll":case"scrollend":re=Xl;break;case"wheel":re=ie;break;case"copy":case"cut":case"paste":re=Zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Mr;break;case"toggle":case"beforetoggle":re=qe}var Le=(o&4)!==0,Et=!Le&&(r==="scroll"||r==="scrollend"),J=Le?te!==null?te+"Capture":null:te;Le=[];for(var $=ee,Z;$!==null;){var ce=$;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||J===null||(ce=Ui($,J),ce!=null&&Le.push(Iu($,ce,Z))),Et)break;$=$.return}0<Le.length&&(te=new re(te,xe,null,u,ae),fe.push({event:te,listeners:Le}))}}if((o&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",te&&u!==Jl&&(xe=u.relatedTarget||u.fromElement)&&(ir(xe)||xe[tr]))break e;if((re||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,re?(xe=u.relatedTarget||u.toElement,re=ee,xe=xe?ir(xe):null,xe!==null&&(Et=a(xe),Le=xe.tag,xe!==Et||Le!==5&&Le!==27&&Le!==6)&&(xe=null)):(re=null,xe=ee),re!==xe)){if(Le=Wl,ce="onMouseLeave",J="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(Le=Mr,ce="onPointerLeave",J="onPointerEnter",$="pointer"),Et=re==null?te:ei(re),Z=xe==null?te:ei(xe),te=new Le(ce,$+"leave",re,u,ae),te.target=Et,te.relatedTarget=Z,ce=null,ir(ae)===ee&&(Le=new Le(J,$+"enter",xe,u,ae),Le.target=Z,Le.relatedTarget=Et,ce=Le),Et=ce,re&&xe)t:{for(Le=AR,J=re,$=xe,Z=0,ce=J;ce;ce=Le(ce))Z++;ce=0;for(var ke=$;ke;ke=Le(ke))ce++;for(;0<Z-ce;)J=Le(J),Z--;for(;0<ce-Z;)$=Le($),ce--;for(;Z--;){if(J===$||$!==null&&J===$.alternate){Le=J;break t}J=Le(J),$=Le($)}Le=null}else Le=null;re!==null&&DT(fe,te,re,Le,!1),xe!==null&&Et!==null&&DT(fe,Et,xe,Le,!0)}}e:{if(te=ee?ei(ee):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var ut=Q_;else if(J_(te))if(X_)ut=L1;else{ut=D1;var be=M1}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&ca(ee.elementType)&&(ut=Q_):ut=P1;if(ut&&(ut=ut(r,ee))){K_(fe,ut,u,ae);break e}be&&be(r,te,ee),r==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&jl(te,"number",te.value)}switch(be=ee?ei(ee):window,r){case"focusin":(J_(be)||be.contentEditable==="true")&&(_a=be,Qh=ee,iu=null);break;case"focusout":iu=Qh=_a=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,sv(fe,u,ae);break;case"selectionchange":if(U1)break;case"keydown":case"keyup":sv(fe,u,ae)}var He;if(dt)e:{switch(r){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else ya?Ao(r,u)&&(Xe="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Xe="onCompositionStart");Xe&&(hr&&u.locale!=="ko"&&(ya||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&ya&&(He=Ql()):(ur=ae,Kl="value"in ur?ur.value:ur.textContent,ya=!0)),be=Qf(ee,Xe),0<be.length&&(Xe=new dr(Xe,r,null,u,ae),fe.push({event:Xe,listeners:be}),He?Xe.data=He:(He=ga(u),He!==null&&(Xe.data=He)))),(He=Ti?I1(r,u):R1(r,u))&&(Xe=Qf(ee,"onBeforeInput"),0<Xe.length&&(be=new dr("onBeforeInput","beforeinput",null,u,ae),fe.push({event:be,listeners:Xe}),be.data=He)),TR(fe,r,ee,u,ae)}kT(fe,o)})}function Iu(r,o,u){return{instance:r,listener:o,currentTarget:u}}function Qf(r,o){for(var u=o+"Capture",d=[];r!==null;){var _=r,T=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||T===null||(_=Ui(r,u),_!=null&&d.unshift(Iu(r,_,T)),_=Ui(r,o),_!=null&&d.push(Iu(r,_,T))),r.tag===3)return d;r=r.return}return[]}function AR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function DT(r,o,u,d,_){for(var T=o._reactName,x=[];u!==null&&u!==d;){var N=u,j=N.alternate,ee=N.stateNode;if(N=N.tag,j!==null&&j===d)break;N!==5&&N!==26&&N!==27||ee===null||(j=ee,_?(ee=Ui(u,T),ee!=null&&x.unshift(Iu(u,ee,j))):_||(ee=Ui(u,T),ee!=null&&x.push(Iu(u,ee,j)))),u=u.return}x.length!==0&&r.push({event:o,listeners:x})}var xR=/\r\n?/g,CR=/\u0000|\uFFFD/g;function PT(r){return(typeof r=="string"?r:""+r).replace(xR,`
`).replace(CR,"")}function LT(r,o){return o=PT(o),PT(r)===o}function Tt(r,o,u,d,_,T){switch(u){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||jn(r,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&jn(r,""+d);break;case"className":ti(r,"class",d);break;case"tabIndex":ti(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(r,u,d);break;case"style":$l(r,d,T);break;case"data":if(o!=="object"){ti(r,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=fa(""+d),r.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(u==="formAction"?(o!=="input"&&Tt(r,o,"name",_.name,_,null),Tt(r,o,"formEncType",_.formEncType,_,null),Tt(r,o,"formMethod",_.formMethod,_,null),Tt(r,o,"formTarget",_.formTarget,_,null)):(Tt(r,o,"encType",_.encType,_,null),Tt(r,o,"method",_.method,_,null),Tt(r,o,"target",_.target,_,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=fa(""+d),r.setAttribute(u,d);break;case"onClick":d!=null&&(r.onclick=Vi);break;case"onScroll":d!=null&&Je("scroll",r);break;case"onScrollEnd":d!=null&&Je("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(_.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}u=fa(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""+d):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":d===!0?r.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,d):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(u,d):r.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(u):r.setAttribute(u,d);break;case"popover":Je("beforetoggle",r),Je("toggle",r),la(r,"popover",d);break;case"xlinkActuate":Qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Qt(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Qt(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Qt(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Qt(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":la(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Kc.get(u)||u,la(r,u,d))}}function Sm(r,o,u,d,_,T){switch(u){case"style":$l(r,d,T);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(_.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof d=="string"?jn(r,d):(typeof d=="number"||typeof d=="bigint")&&jn(r,""+d);break;case"onScroll":d!=null&&Je("scroll",r);break;case"onScrollEnd":d!=null&&Je("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zl.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),o=u.slice(2,_?u.length-7:void 0),T=r[fn]||null,T=T!=null?T[u]:null,typeof T=="function"&&r.removeEventListener(o,T,_),typeof d=="function")){typeof T!="function"&&T!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,d,_);break e}u in r?r[u]=d:d===!0?r.setAttribute(u,""):la(r,u,d)}}}function En(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",r),Je("load",r);var d=!1,_=!1,T;for(T in u)if(u.hasOwnProperty(T)){var x=u[T];if(x!=null)switch(T){case"src":d=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Tt(r,o,T,x,u,null)}}_&&Tt(r,o,"srcSet",u.srcSet,u,null),d&&Tt(r,o,"src",u.src,u,null);return;case"input":Je("invalid",r);var N=T=x=_=null,j=null,ee=null;for(d in u)if(u.hasOwnProperty(d)){var ae=u[d];if(ae!=null)switch(d){case"name":_=ae;break;case"type":x=ae;break;case"checked":j=ae;break;case"defaultChecked":ee=ae;break;case"value":T=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,o));break;default:Tt(r,o,d,ae,u,null)}}Yc(r,T,N,j,ee,x,_,!1);return;case"select":Je("invalid",r),d=x=T=null;for(_ in u)if(u.hasOwnProperty(_)&&(N=u[_],N!=null))switch(_){case"value":T=N;break;case"defaultValue":x=N;break;case"multiple":d=N;default:Tt(r,o,_,N,u,null)}o=T,u=x,r.multiple=!!d,o!=null?fs(r,!!d,o,!1):u!=null&&fs(r,!!d,u,!0);return;case"textarea":Je("invalid",r),T=_=d=null;for(x in u)if(u.hasOwnProperty(x)&&(N=u[x],N!=null))switch(x){case"value":d=N;break;case"defaultValue":_=N;break;case"children":T=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:Tt(r,o,x,N,u,null)}ds(r,d,_,T);return;case"option":for(j in u)if(u.hasOwnProperty(j)&&(d=u[j],d!=null))switch(j){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Tt(r,o,j,d,u,null)}return;case"dialog":Je("beforetoggle",r),Je("toggle",r),Je("cancel",r),Je("close",r);break;case"iframe":case"object":Je("load",r);break;case"video":case"audio":for(d=0;d<bu.length;d++)Je(bu[d],r);break;case"image":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"embed":case"source":case"link":Je("error",r),Je("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in u)if(u.hasOwnProperty(ee)&&(d=u[ee],d!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Tt(r,o,ee,d,u,null)}return;default:if(ca(o)){for(ae in u)u.hasOwnProperty(ae)&&(d=u[ae],d!==void 0&&Sm(r,o,ae,d,u,void 0));return}}for(N in u)u.hasOwnProperty(N)&&(d=u[N],d!=null&&Tt(r,o,N,d,u,null))}function bR(r,o,u,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,T=null,x=null,N=null,j=null,ee=null,ae=null;for(re in u){var fe=u[re];if(u.hasOwnProperty(re)&&fe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":j=fe;default:d.hasOwnProperty(re)||Tt(r,o,re,null,d,fe)}}for(var te in d){var re=d[te];if(fe=u[te],d.hasOwnProperty(te)&&(re!=null||fe!=null))switch(te){case"type":T=re;break;case"name":_=re;break;case"checked":ee=re;break;case"defaultChecked":ae=re;break;case"value":x=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:re!==fe&&Tt(r,o,te,re,d,fe)}}ua(r,x,N,j,ee,ae,T,_);return;case"select":re=x=N=te=null;for(T in u)if(j=u[T],u.hasOwnProperty(T)&&j!=null)switch(T){case"value":break;case"multiple":re=j;default:d.hasOwnProperty(T)||Tt(r,o,T,null,d,j)}for(_ in d)if(T=d[_],j=u[_],d.hasOwnProperty(_)&&(T!=null||j!=null))switch(_){case"value":te=T;break;case"defaultValue":N=T;break;case"multiple":x=T;default:T!==j&&Tt(r,o,_,T,d,j)}o=N,u=x,d=re,te!=null?fs(r,!!u,te,!1):!!d!=!!u&&(o!=null?fs(r,!!u,o,!0):fs(r,!!u,u?[]:"",!1));return;case"textarea":re=te=null;for(N in u)if(_=u[N],u.hasOwnProperty(N)&&_!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Tt(r,o,N,null,d,_)}for(x in d)if(_=d[x],T=u[x],d.hasOwnProperty(x)&&(_!=null||T!=null))switch(x){case"value":te=_;break;case"defaultValue":re=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==T&&Tt(r,o,x,_,d,T)}$c(r,te,re);return;case"option":for(var xe in u)if(te=u[xe],u.hasOwnProperty(xe)&&te!=null&&!d.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:Tt(r,o,xe,null,d,te)}for(j in d)if(te=d[j],re=u[j],d.hasOwnProperty(j)&&te!==re&&(te!=null||re!=null))switch(j){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Tt(r,o,j,te,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)te=u[Le],u.hasOwnProperty(Le)&&te!=null&&!d.hasOwnProperty(Le)&&Tt(r,o,Le,null,d,te);for(ee in d)if(te=d[ee],re=u[ee],d.hasOwnProperty(ee)&&te!==re&&(te!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:Tt(r,o,ee,te,d,re)}return;default:if(ca(o)){for(var Et in u)te=u[Et],u.hasOwnProperty(Et)&&te!==void 0&&!d.hasOwnProperty(Et)&&Sm(r,o,Et,void 0,d,te);for(ae in d)te=d[ae],re=u[ae],!d.hasOwnProperty(ae)||te===re||te===void 0&&re===void 0||Sm(r,o,ae,te,d,re);return}}for(var J in u)te=u[J],u.hasOwnProperty(J)&&te!=null&&!d.hasOwnProperty(J)&&Tt(r,o,J,null,d,te);for(fe in d)te=d[fe],re=u[fe],!d.hasOwnProperty(fe)||te===re||te==null&&re==null||Tt(r,o,fe,te,d,re)}function VT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var _=u[d],T=_.transferSize,x=_.initiatorType,N=_.duration;if(T&&N&&VT(x)){for(x=0,N=_.responseEnd,d+=1;d<u.length;d++){var j=u[d],ee=j.startTime;if(ee>N)break;var ae=j.transferSize,fe=j.initiatorType;ae&&VT(fe)&&(j=j.responseEnd,x+=ae*(j<N?1:(N-ee)/(j-ee)))}if(--d,o+=8*(T+x)/(_.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var wm=null,Am=null;function Xf(r){return r.nodeType===9?r:r.ownerDocument}function UT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function xm(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Cm=null;function RR(){var r=window.event;return r&&r.type==="popstate"?r===Cm?!1:(Cm=r,!0):(Cm=null,!1)}var FT=typeof setTimeout=="function"?setTimeout:void 0,NR=typeof clearTimeout=="function"?clearTimeout:void 0,zT=typeof Promise=="function"?Promise:void 0,kR=typeof queueMicrotask=="function"?queueMicrotask:typeof zT<"u"?function(r){return zT.resolve(null).then(r).catch(MR)}:FT;function MR(r){setTimeout(function(){throw r})}function Ls(r){return r==="head"}function qT(r,o){var u=o,d=0;do{var _=u.nextSibling;if(r.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(d===0){r.removeChild(_),ja(o);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")Ru(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Ru(u);for(var T=u.firstChild;T;){var x=T.nextSibling,N=T.nodeName;T[nr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&T.rel.toLowerCase()==="stylesheet"||u.removeChild(T),T=x}}else u==="body"&&Ru(r.ownerDocument.body);u=_}while(u);ja(o)}function BT(r,o){var u=r;r=0;do{var d=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=d}while(u)}function bm(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":bm(u),aa(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function DR(r,o,u,d){for(;r.nodeType===1;){var _=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[nr])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(T=r.getAttribute("rel"),T==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(T!==_.rel||r.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||r.getAttribute("title")!==(_.title==null?null:_.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(T=r.getAttribute("src"),(T!==(_.src==null?null:_.src)||r.getAttribute("type")!==(_.type==null?null:_.type)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&T&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var T=_.name==null?null:""+_.name;if(_.type==="hidden"&&r.getAttribute("name")===T)return r}else return r;if(r=bi(r.nextSibling),r===null)break}return null}function PR(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=bi(r.nextSibling),r===null))return null;return r}function HT(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=bi(r.nextSibling),r===null))return null;return r}function Im(r){return r.data==="$?"||r.data==="$~"}function Rm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function LR(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var d=function(){o(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function bi(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Nm=null;function GT(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return bi(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function jT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function YT(r,o,u){switch(o=Xf(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ru(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);aa(r)}var Ii=new Map,$T=new Set;function Wf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var $r=he.d;he.d={f:VR,r:UR,D:OR,C:FR,L:zR,m:qR,X:HR,S:BR,M:GR};function VR(){var r=$r.f(),o=Hf();return r||o}function UR(r){var o=yi(r);o!==null&&o.tag===5&&o.type==="form"?c0(o):$r.r(r)}var Ba=typeof document>"u"?null:document;function JT(r,o,u){var d=Ba;if(d&&typeof o=="string"&&o){var _=Gn(o);_='link[rel="'+r+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),$T.has(_)||($T.add(_),r={rel:r,crossOrigin:u,href:o},d.querySelector(_)===null&&(o=d.createElement("link"),En(o,"link",r),Kt(o),d.head.appendChild(o)))}}function OR(r){$r.D(r),JT("dns-prefetch",r,null)}function FR(r,o){$r.C(r,o),JT("preconnect",r,o)}function zR(r,o,u){$r.L(r,o,u);var d=Ba;if(d&&r&&o){var _='link[rel="preload"][as="'+Gn(o)+'"]';o==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+Gn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+Gn(u.imageSizes)+'"]')):_+='[href="'+Gn(r)+'"]';var T=_;switch(o){case"style":T=Ha(r);break;case"script":T=Ga(r)}Ii.has(T)||(r=y({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),Ii.set(T,r),d.querySelector(_)!==null||o==="style"&&d.querySelector(Nu(T))||o==="script"&&d.querySelector(ku(T))||(o=d.createElement("link"),En(o,"link",r),Kt(o),d.head.appendChild(o)))}}function qR(r,o){$r.m(r,o);var u=Ba;if(u&&r){var d=o&&typeof o.as=="string"?o.as:"script",_='link[rel="modulepreload"][as="'+Gn(d)+'"][href="'+Gn(r)+'"]',T=_;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ga(r)}if(!Ii.has(T)&&(r=y({rel:"modulepreload",href:r},o),Ii.set(T,r),u.querySelector(_)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ku(T)))return}d=u.createElement("link"),En(d,"link",r),Kt(d),u.head.appendChild(d)}}}function BR(r,o,u){$r.S(r,o,u);var d=Ba;if(d&&r){var _=rr(d).hoistableStyles,T=Ha(r);o=o||"default";var x=_.get(T);if(!x){var N={loading:0,preload:null};if(x=d.querySelector(Nu(T)))N.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":o},u),(u=Ii.get(T))&&km(r,u);var j=x=d.createElement("link");Kt(j),En(j,"link",r),j._p=new Promise(function(ee,ae){j.onload=ee,j.onerror=ae}),j.addEventListener("load",function(){N.loading|=1}),j.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Zf(x,o,d)}x={type:"stylesheet",instance:x,count:1,state:N},_.set(T,x)}}}function HR(r,o){$r.X(r,o);var u=Ba;if(u&&r){var d=rr(u).hoistableScripts,_=Ga(r),T=d.get(_);T||(T=u.querySelector(ku(_)),T||(r=y({src:r,async:!0},o),(o=Ii.get(_))&&Mm(r,o),T=u.createElement("script"),Kt(T),En(T,"link",r),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(_,T))}}function GR(r,o){$r.M(r,o);var u=Ba;if(u&&r){var d=rr(u).hoistableScripts,_=Ga(r),T=d.get(_);T||(T=u.querySelector(ku(_)),T||(r=y({src:r,async:!0,type:"module"},o),(o=Ii.get(_))&&Mm(r,o),T=u.createElement("script"),Kt(T),En(T,"link",r),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(_,T))}}function KT(r,o,u,d){var _=(_=Te.current)?Wf(_):null;if(!_)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Ha(u.href),u=rr(_).hoistableStyles,d=u.get(o),d||(d={type:"style",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Ha(u.href);var T=rr(_).hoistableStyles,x=T.get(r);if(x||(_=_.ownerDocument||_,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(r,x),(T=_.querySelector(Nu(r)))&&!T._p&&(x.instance=T,x.state.loading=5),Ii.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ii.set(r,u),T||jR(_,r,u,x.state))),o&&d===null)throw Error(i(528,""));return x}if(o&&d!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ga(u),u=rr(_).hoistableScripts,d=u.get(o),d||(d={type:"script",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Ha(r){return'href="'+Gn(r)+'"'}function Nu(r){return'link[rel="stylesheet"]['+r+"]"}function QT(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function jR(r,o,u,d){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=r.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),En(o,"link",u),Kt(o),r.head.appendChild(o))}function Ga(r){return'[src="'+Gn(r)+'"]'}function ku(r){return"script[async]"+r}function XT(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var d=r.querySelector('style[data-href~="'+Gn(u.href)+'"]');if(d)return o.instance=d,Kt(d),d;var _=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),Kt(d),En(d,"style",_),Zf(d,u.precedence,r),o.instance=d;case"stylesheet":_=Ha(u.href);var T=r.querySelector(Nu(_));if(T)return o.state.loading|=4,o.instance=T,Kt(T),T;d=QT(u),(_=Ii.get(_))&&km(d,_),T=(r.ownerDocument||r).createElement("link"),Kt(T);var x=T;return x._p=new Promise(function(N,j){x.onload=N,x.onerror=j}),En(T,"link",d),o.state.loading|=4,Zf(T,u.precedence,r),o.instance=T;case"script":return T=Ga(u.src),(_=r.querySelector(ku(T)))?(o.instance=_,Kt(_),_):(d=u,(_=Ii.get(T))&&(d=y({},u),Mm(d,_)),r=r.ownerDocument||r,_=r.createElement("script"),Kt(_),En(_,"link",d),r.head.appendChild(_),o.instance=_);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Zf(d,u.precedence,r));return o.instance}function Zf(r,o,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=d.length?d[d.length-1]:null,T=_,x=0;x<d.length;x++){var N=d[x];if(N.dataset.precedence===o)T=N;else if(T!==_)break}T?T.parentNode.insertBefore(r,T.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function km(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Mm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var ed=null;function WT(r,o,u){if(ed===null){var d=new Map,_=ed=new Map;_.set(u,d)}else _=ed,d=_.get(u),d||(d=new Map,_.set(u,d));if(d.has(r))return d;for(d.set(r,null),u=u.getElementsByTagName(r),_=0;_<u.length;_++){var T=u[_];if(!(T[nr]||T[Jt]||r==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var x=T.getAttribute(o)||"";x=r+x;var N=d.get(x);N?N.push(T):d.set(x,[T])}}return d}function ZT(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function YR(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function eE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function $R(r,o,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Ha(d.href),T=o.querySelector(Nu(_));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=td.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=T,Kt(T);return}T=o.ownerDocument||o,d=QT(d),(_=Ii.get(_))&&km(d,_),T=T.createElement("link"),Kt(T);var x=T;x._p=new Promise(function(N,j){x.onload=N,x.onerror=j}),En(T,"link",d),u.instance=T}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=td.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var Dm=0;function JR(r,o){return r.stylesheets&&r.count===0&&id(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var d=setTimeout(function(){if(r.stylesheets&&id(r,r.stylesheets),r.unsuspend){var T=r.unsuspend;r.unsuspend=null,T()}},6e4+o);0<r.imgBytes&&Dm===0&&(Dm=62500*IR());var _=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&id(r,r.stylesheets),r.unsuspend)){var T=r.unsuspend;r.unsuspend=null,T()}},(r.imgBytes>Dm?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(_)}}:null}function td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var nd=null;function id(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,nd=new Map,o.forEach(KR,r),nd=null,td.call(r))}function KR(r,o){if(!(o.state.loading&4)){var u=nd.get(r);if(u)var d=u.get(null);else{u=new Map,nd.set(r,u);for(var _=r.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<_.length;T++){var x=_[T];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(u.set(x.dataset.precedence,x),d=x)}d&&u.set(null,d)}_=o.instance,x=_.getAttribute("data-precedence"),T=u.get(x)||d,T===d&&u.set(null,_),u.set(x,_),this.count++,d=td.bind(this),_.addEventListener("load",d),_.addEventListener("error",d),T?T.parentNode.insertBefore(_,T.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(_,r.firstChild)),o.state.loading|=4}}var Mu={$$typeof:B,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function QR(r,o,u,d,_,T,x,N,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=d,this.onUncaughtError=_,this.onCaughtError=T,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function tE(r,o,u,d,_,T,x,N,j,ee,ae,fe){return r=new QR(r,o,u,x,j,ee,ae,fe,N),o=1,T===!0&&(o|=24),T=ii(3,null,null,o),r.current=T,T.stateNode=r,o=dp(),o.refCount++,r.pooledCache=o,o.refCount++,T.memoizedState={element:d,isDehydrated:u,cache:o},gp(T),r}function nE(r){return r?(r=Ea,r):Ea}function iE(r,o,u,d,_,T){_=nE(_),d.context===null?d.context=_:d.pendingContext=_,d=As(o),d.payload={element:u},T=T===void 0?null:T,T!==null&&(d.callback=T),u=xs(r,d,o),u!==null&&(Qn(u,r,o),cu(u,r,o))}function rE(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Pm(r,o){rE(r,o),(r=r.alternate)&&rE(r,o)}function sE(r){if(r.tag===13||r.tag===31){var o=bo(r,67108864);o!==null&&Qn(o,r,67108864),Pm(r,67108864)}}function oE(r){if(r.tag===13||r.tag===31){var o=li();o=mo(o);var u=bo(r,o);u!==null&&Qn(u,r,o),Pm(r,o)}}var rd=!0;function XR(r,o,u,d){var _=K.T;K.T=null;var T=he.p;try{he.p=2,Lm(r,o,u,d)}finally{he.p=T,K.T=_}}function WR(r,o,u,d){var _=K.T;K.T=null;var T=he.p;try{he.p=8,Lm(r,o,u,d)}finally{he.p=T,K.T=_}}function Lm(r,o,u,d){if(rd){var _=Vm(d);if(_===null)Em(r,o,d,sd,u),lE(r,d);else if(eN(_,r,o,u,d))d.stopPropagation();else if(lE(r,d),o&4&&-1<ZR.indexOf(r)){for(;_!==null;){var T=yi(_);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var x=Wi(T.pendingLanes);if(x!==0){var N=T;for(N.pendingLanes|=2,N.entangledLanes|=2;x;){var j=1<<31-tt(x);N.entanglements[1]|=j,x&=~j}yr(T),(ht&6)===0&&(qf=gn()+500,Cu(0))}}break;case 31:case 13:N=bo(T,2),N!==null&&Qn(N,T,2),Hf(),Pm(T,2)}if(T=Vm(d),T===null&&Em(r,o,d,sd,u),T===_)break;_=T}_!==null&&d.stopPropagation()}else Em(r,o,d,null,u)}}function Vm(r){return r=_i(r),Um(r)}var sd=null;function Um(r){if(sd=null,r=ir(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return sd=r,null}function aE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ir()){case ue:return 2;case _e:return 8;case De:case Ye:return 32;case lt:return 268435456;default:return 32}default:return 32}}var Om=!1,Vs=null,Us=null,Os=null,Du=new Map,Pu=new Map,Fs=[],ZR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lE(r,o){switch(r){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":Du.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(o.pointerId)}}function Lu(r,o,u,d,_,T){return r===null||r.nativeEvent!==T?(r={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:T,targetContainers:[_]},o!==null&&(o=yi(o),o!==null&&sE(o)),r):(r.eventSystemFlags|=d,o=r.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),r)}function eN(r,o,u,d,_){switch(o){case"focusin":return Vs=Lu(Vs,r,o,u,d,_),!0;case"dragenter":return Us=Lu(Us,r,o,u,d,_),!0;case"mouseover":return Os=Lu(Os,r,o,u,d,_),!0;case"pointerover":var T=_.pointerId;return Du.set(T,Lu(Du.get(T)||null,r,o,u,d,_)),!0;case"gotpointercapture":return T=_.pointerId,Pu.set(T,Lu(Pu.get(T)||null,r,o,u,d,_)),!0}return!1}function uE(r){var o=ir(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,Pi(r.priority,function(){oE(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,Pi(r.priority,function(){oE(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function od(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Vm(r.nativeEvent);if(u===null){u=r.nativeEvent;var d=new u.constructor(u.type,u);Jl=d,u.target.dispatchEvent(d),Jl=null}else return o=yi(u),o!==null&&sE(o),r.blockedOn=u,!1;o.shift()}return!0}function cE(r,o,u){od(r)&&u.delete(o)}function tN(){Om=!1,Vs!==null&&od(Vs)&&(Vs=null),Us!==null&&od(Us)&&(Us=null),Os!==null&&od(Os)&&(Os=null),Du.forEach(cE),Pu.forEach(cE)}function ad(r,o){r.blockedOn===o&&(r.blockedOn=null,Om||(Om=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tN)))}var ld=null;function fE(r){ld!==r&&(ld=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ld===r&&(ld=null);for(var o=0;o<r.length;o+=3){var u=r[o],d=r[o+1],_=r[o+2];if(typeof d!="function"){if(Um(d||u)===null)continue;break}var T=yi(u);T!==null&&(r.splice(o,3),o-=3,Vp(T,{pending:!0,data:_,method:u.method,action:d},d,_))}}))}function ja(r){function o(j){return ad(j,r)}Vs!==null&&ad(Vs,r),Us!==null&&ad(Us,r),Os!==null&&ad(Os,r),Du.forEach(o),Pu.forEach(o);for(var u=0;u<Fs.length;u++){var d=Fs[u];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Fs.length&&(u=Fs[0],u.blockedOn===null);)uE(u),u.blockedOn===null&&Fs.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var _=u[d],T=u[d+1],x=_[fn]||null;if(typeof T=="function")x||fE(u);else if(x){var N=null;if(T&&T.hasAttribute("formAction")){if(_=T,x=T[fn]||null)N=x.formAction;else if(Um(_)!==null)continue}else N=x.action;typeof N=="function"?u[d+1]=N:(u.splice(d,3),d-=3),fE(u)}}}function dE(){function r(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(x){return _=x})},focusReset:"manual",scroll:"manual"})}function o(){_!==null&&(_(),_=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,_=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),_!==null&&(_(),_=null)}}}function Fm(r){this._internalRoot=r}ud.prototype.render=Fm.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,d=li();iE(u,d,r,o,null,null)},ud.prototype.unmount=Fm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;iE(r.current,2,null,r,null,null),Hf(),o[tr]=null}};function ud(r){this._internalRoot=r}ud.prototype.unstable_scheduleHydration=function(r){if(r){var o=Bc();r={blockedOn:null,target:r,priority:o};for(var u=0;u<Fs.length&&o!==0&&o<Fs[u].priority;u++);Fs.splice(u,0,r),u===0&&uE(r)}};var hE=e.version;if(hE!=="19.2.0")throw Error(i(527,hE,"19.2.0"));he.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(o),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var nN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{Bt=cd.inject(nN),Pt=cd}catch{}}return Uu.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,d="",_=T0,T=E0,x=S0;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=tE(r,1,!1,null,null,u,d,null,_,T,x,dE),r[tr]=o.current,Tm(r),new Fm(o)},Uu.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var d=!1,_="",T=T0,x=E0,N=S0,j=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(N=u.onRecoverableError),u.formState!==void 0&&(j=u.formState)),o=tE(r,1,!0,o,u??null,d,_,j,T,x,N,dE),o.context=nE(null),u=o.current,d=li(),d=mo(d),_=As(d),_.callback=null,xs(u,_,d),u=d,o.current.lanes=u,ho(o,u),yr(o),r[tr]=o.current,Tm(r),new ud(o)},Uu.version="19.2.0",Uu}var wE;function dN(){if(wE)return Bm.exports;wE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bm.exports=fN(),Bm.exports}var hN=dN();const pN=fh(hN),mN=()=>{};var AE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gN=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],c=t[n++],h=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},px={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,c=l?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,p=a>>2,y=(a&3)<<4|c>>4;let E=(c&15)<<2|f>>6,w=f&63;h||(w=64,l||(E=64)),i.push(n[p],n[y],n[E],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||f==null||y==null)throw new yN;const E=a<<2|c>>4;if(i.push(E),f!==64){const w=c<<4&240|f>>2;if(i.push(w),y!==64){const b=f<<6&192|y;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _N=function(t){const e=hx(t);return px.encodeByteArray(e,!0)},Ld=function(t){return _N(t).replace(/\./g,"")},mx=function(t){try{return px.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=()=>vN().__FIREBASE_DEFAULTS__,EN=()=>{if(typeof process>"u"||typeof AE>"u")return;const t=AE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mx(t[1]);return e&&JSON.parse(e)},dh=()=>{try{return mN()||TN()||EN()||SN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gx=t=>{var e,n;return(n=(e=dh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wN=t=>{const e=gx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},yx=()=>{var t;return(t=dh())==null?void 0:t.config},_x=t=>{var e;return(e=dh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ld(JSON.stringify(n)),Ld(JSON.stringify(l)),""].join(".")}const Ju={};function CN(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ju))Ju[e]?t.emulator.push(e):t.prod.push(e);return t}function bN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xE=!1;function Tx(t,e){if(typeof window>"u"||typeof document>"u"||!El(window.location.host)||Ju[t]===e||Ju[t]||xE)return;Ju[t]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=CN().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function c(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function h(E,w){E.setAttribute("width","24"),E.setAttribute("id",w),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{xE=!0,l()},E}function p(E,w){E.setAttribute("id",w),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function y(){const E=bN(i),w=n("text"),b=document.getElementById(w)||document.createElement("span"),L=n("learnmore"),F=document.getElementById(L)||document.createElement("a"),O=n("preprendIcon"),H=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const B=E.element;c(B),p(F,L);const X=f();h(H,O),B.append(H,b,F,X),document.body.appendChild(B)}a?(b.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function RN(){var e;const t=(e=dh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DN(){const t=Dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PN(){return!RN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LN(){try{return typeof indexedDB=="object"}catch{return!1}}function VN(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="FirebaseError";class ns extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=UN,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sc.prototype.create)}}class Sc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?ON(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new ns(s,c,i)}}function ON(t,e){return t.replace(FN,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const FN=/\{\$([^}]+)}/g;function zN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],l=e[s];if(CE(a)&&CE(l)){if(!Yo(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function CE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Gu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qN(t,e){const n=new BN(t,e);return n.subscribe.bind(n)}class BN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");HN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Ym),s.error===void 0&&(s.error=Ym),s.complete===void 0&&(s.complete=Ym);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class $o{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new AN;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YN(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jN(t){return t===qo?void 0:t}function YN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const JN={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},KN=We.INFO,QN={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},XN=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=QN[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _y{constructor(e){this.name=e,this._logLevel=KN,this._logHandler=XN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const WN=(t,e)=>e.some(n=>t instanceof n);let bE,IE;function ZN(){return bE||(bE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ek(){return IE||(IE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ex=new WeakMap,Ag=new WeakMap,Sx=new WeakMap,$m=new WeakMap,vy=new WeakMap;function tk(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Js(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Ex.set(n,t)}).catch(()=>{}),vy.set(e,t),e}function nk(t){if(Ag.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Ag.set(t,e)}let xg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ag.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Sx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ik(t){xg=t(xg)}function rk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Jm(this),e,...n);return Sx.set(i,e.sort?e.sort():[e]),Js(i)}:ek().includes(t)?function(...e){return t.apply(Jm(this),e),Js(Ex.get(this))}:function(...e){return Js(t.apply(Jm(this),e))}}function sk(t){return typeof t=="function"?rk(t):(t instanceof IDBTransaction&&nk(t),WN(t,ZN())?new Proxy(t,xg):t)}function Js(t){if(t instanceof IDBRequest)return tk(t);if($m.has(t))return $m.get(t);const e=sk(t);return e!==t&&($m.set(t,e),vy.set(e,t)),e}const Jm=t=>vy.get(t);function ok(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),c=Js(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Js(l.result),h.oldVersion,h.newVersion,Js(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const ak=["get","getKey","getAll","getAllKeys","count"],lk=["put","add","delete","clear"],Km=new Map;function RE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Km.get(e))return Km.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=lk.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||ak.includes(n)))return;const a=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),s&&h.done]))[0]};return Km.set(e,a),a}ik(t=>({...t,get:(e,n,i)=>RE(e,n)||t.get(e,n,i),has:(e,n)=>!!RE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ck(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ck(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cg="@firebase/app",NE="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new _y("@firebase/app"),fk="@firebase/app-compat",dk="@firebase/analytics-compat",hk="@firebase/analytics",pk="@firebase/app-check-compat",mk="@firebase/app-check",gk="@firebase/auth",yk="@firebase/auth-compat",_k="@firebase/database",vk="@firebase/data-connect",Tk="@firebase/database-compat",Ek="@firebase/functions",Sk="@firebase/functions-compat",wk="@firebase/installations",Ak="@firebase/installations-compat",xk="@firebase/messaging",Ck="@firebase/messaging-compat",bk="@firebase/performance",Ik="@firebase/performance-compat",Rk="@firebase/remote-config",Nk="@firebase/remote-config-compat",kk="@firebase/storage",Mk="@firebase/storage-compat",Dk="@firebase/firestore",Pk="@firebase/ai",Lk="@firebase/firestore-compat",Vk="firebase",Uk="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="[DEFAULT]",Ok={[Cg]:"fire-core",[fk]:"fire-core-compat",[hk]:"fire-analytics",[dk]:"fire-analytics-compat",[mk]:"fire-app-check",[pk]:"fire-app-check-compat",[gk]:"fire-auth",[yk]:"fire-auth-compat",[_k]:"fire-rtdb",[vk]:"fire-data-connect",[Tk]:"fire-rtdb-compat",[Ek]:"fire-fn",[Sk]:"fire-fn-compat",[wk]:"fire-iid",[Ak]:"fire-iid-compat",[xk]:"fire-fcm",[Ck]:"fire-fcm-compat",[bk]:"fire-perf",[Ik]:"fire-perf-compat",[Rk]:"fire-rc",[Nk]:"fire-rc-compat",[kk]:"fire-gcs",[Mk]:"fire-gcs-compat",[Dk]:"fire-fst",[Lk]:"fire-fst-compat",[Pk]:"fire-vertex","fire-js":"fire-js",[Vk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,Fk=new Map,Ig=new Map;function kE(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cl(t){const e=t.name;if(Ig.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Ig.set(e,t);for(const n of ac.values())kE(n,t);for(const n of Fk.values())kE(n,t);return!0}function Ty(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ci(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new Sc("app","Firebase",zk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $o("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=Uk;function wx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:bg,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Ks.create("bad-app-name",{appName:String(s)});if(n||(n=yx()),!n)throw Ks.create("no-options");const a=ac.get(s);if(a){if(Yo(n,a.options)&&Yo(i,a.config))return a;throw Ks.create("duplicate-app",{appName:s})}const l=new $N(s);for(const h of Ig.values())l.addComponent(h);const c=new qk(n,i,l);return ac.set(s,c),c}function Ax(t=bg){const e=ac.get(t);if(!e&&t===bg&&yx())return wx();if(!e)throw Ks.create("no-app",{appName:t});return e}function Bk(){return Array.from(ac.values())}function Qs(t,e,n){let i=Ok[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(l.join(" "));return}cl(new $o(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="firebase-heartbeat-database",Gk=1,lc="firebase-heartbeat-store";let Qm=null;function xx(){return Qm||(Qm=ok(Hk,Gk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ks.create("idb-open",{originalErrorMessage:t.message})})),Qm}async function jk(t){try{const n=(await xx()).transaction(lc),i=await n.objectStore(lc).get(Cx(t));return await n.done,i}catch(e){if(e instanceof ns)Wr.warn(e.message);else{const n=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(n.message)}}}async function ME(t,e){try{const i=(await xx()).transaction(lc,"readwrite");await i.objectStore(lc).put(e,Cx(t)),await i.done}catch(n){if(n instanceof ns)Wr.warn(n.message);else{const i=Ks.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wr.warn(i.message)}}}function Cx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=1024,$k=30;class Jk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=DE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>$k){const l=Xk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=DE(),{heartbeatsToSend:i,unsentEntries:s}=Kk(this._heartbeatsCache.heartbeats),a=Ld(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Wr.warn(n),""}}}function DE(){return new Date().toISOString().substring(0,10)}function Kk(t,e=Yk){const n=[];let i=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),PE(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),PE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Qk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LN()?VN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ME(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ME(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function PE(t){return Ld(JSON.stringify({version:2,heartbeats:t})).length}function Xk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){cl(new $o("platform-logger",e=>new uk(e),"PRIVATE")),cl(new $o("heartbeat",e=>new Jk(e),"PRIVATE")),Qs(Cg,NE,t),Qs(Cg,NE,"esm2020"),Qs("fire-js","")}Wk("");var Zk="firebase",e2="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qs(Zk,e2,"app");function bx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t2=bx,Ix=new Sc("auth","Firebase",bx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new _y("@firebase/auth");function n2(t,...e){Vd.logLevel<=We.WARN&&Vd.warn(`Auth (${Sl}): ${t}`,...e)}function Sd(t,...e){Vd.logLevel<=We.ERROR&&Vd.error(`Auth (${Sl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t,...e){throw Sy(t,...e)}function Yi(t,...e){return Sy(t,...e)}function Ey(t,e,n){const i={...t2(),[e]:n};return new Sc("auth","Firebase",i).create(e,{appName:t.name})}function Xr(t){return Ey(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function i2(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ki(t,"argument-error"),Ey(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Ix.create(t,...e)}function Ue(t,e,...n){if(!t)throw Sy(e,...n)}function Kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sd(e),new Error(e)}function Zr(t,e){t||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function r2(){return LE()==="http:"||LE()==="https:"}function LE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r2()||kN()||"connection"in navigator)?navigator.onLine:!0}function o2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zr(n>e,"Short delay should be less than long delay!"),this.isMobile=IN()||MN()}get(){return s2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t,e){Zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],u2=new Ac(3e4,6e4);function is(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function rs(t,e,n,i,s={}){return Nx(t,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=wc({key:t.config.apiKey,...l}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...a};return NN()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&El(t.emulatorConfig.host)&&(f.credentials="include"),Rx.fetch()(await kx(t,t.config.apiHost,n,c),f)})}async function Nx(t,e,n){t._canInitEmulator=!1;const i={...a2,...e};try{const s=new f2(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw fd(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw fd(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw fd(t,"user-disabled",l);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Ey(t,p,f);ki(t,p)}}catch(s){if(s instanceof ns)throw s;ki(t,"network-request-failed",{message:String(s)})}}async function xc(t,e,n,i,s={}){const a=await rs(t,e,n,i,s);return"mfaPendingCredential"in a&&ki(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function kx(t,e,n,i){const s=`${e}${n}?${i}`,a=t,l=a.config.emulator?wy(t.config,s):`${t.config.apiScheme}://${s}`;return l2.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function c2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class f2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Yi(this.auth,"network-request-failed")),u2.get())})}}function fd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Yi(t,e,i);return s.customData._tokenResponse=n,s}function VE(t){return t!==void 0&&t.enterprise!==void 0}class d2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return c2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function h2(t,e){return rs(t,"GET","/v2/recaptchaConfig",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e){return rs(t,"POST","/v1/accounts:delete",e)}async function Ud(t,e){return rs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function m2(t,e=!1){const n=zt(t),i=await n.getIdToken(e),s=Ay(i);Ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Ku(Xm(s.auth_time)),issuedAtTime:Ku(Xm(s.iat)),expirationTime:Ku(Xm(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Xm(t){return Number(t)*1e3}function Ay(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{const s=mx(n);return s?JSON.parse(s):(Sd("Failed to decode base64 JWT payload"),null)}catch(s){return Sd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function UE(t){const e=Ay(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ns&&g2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function g2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t){var y;const e=t.auth,n=await t.getIdToken(),i=await uc(t,Ud(e,{idToken:n}));Ue(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=(y=s.providerUserInfo)!=null&&y.length?Mx(s.providerUserInfo):[],l=v2(t.providerData,a),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=c?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ng(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function _2(t){const e=zt(t);await Od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v2(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Mx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e){const n=await Nx(t,{},async()=>{const i=wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=await kx(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:i};return t.emulatorConfig&&El(t.emulatorConfig.host)&&(h.credentials="include"),Rx.fetch()(l,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function E2(t,e){return rs(t,"POST","/v2/accounts:revokeToken",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=UE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await T2(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,l=new nl;return i&&(Ue(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Ue(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Ue(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nl,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ji{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new y2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ng(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return m2(this,e)}reload(){return _2(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ji({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Od(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await uc(this,p2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,c=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:y,emailVerified:E,isAnonymous:w,providerData:b,stsTokenManager:L}=n;Ue(y&&L,e,"internal-error");const F=nl.fromJSON(this.name,L);Ue(typeof y=="string",e,"internal-error"),qs(i,e.name),qs(s,e.name),Ue(typeof E=="boolean",e,"internal-error"),Ue(typeof w=="boolean",e,"internal-error"),qs(a,e.name),qs(l,e.name),qs(c,e.name),qs(h,e.name),qs(f,e.name),qs(p,e.name);const O=new ji({uid:y,auth:e,email:s,emailVerified:E,displayName:i,isAnonymous:w,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:F,createdAt:f,lastLoginAt:p});return b&&Array.isArray(b)&&(O.providerData=b.map(H=>({...H}))),h&&(O._redirectEventId=h),O}static async _fromIdTokenResponse(e,n,i=!1){const s=new nl;s.updateFromServerResponse(n);const a=new ji({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Od(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Ue(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Mx(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new nl;c.updateFromIdToken(i);const h=new ji({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ng(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;function Qr(t){Zr(t instanceof Function,"Expected a class definition");let e=OE.get(t);return e?(Zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Dx.type="NONE";const FE=Dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e,n){return`firebase:${t}:${e}:${n}`}class il{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=wd(this.userKey,s.apiKey,a),this.fullPersistenceKey=wd("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ud(this.auth,{idToken:e}).catch(()=>{});return n?ji._fromGetAccountInfoResponse(this.auth,n,e):null}return ji._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new il(Qr(FE),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Qr(FE);const l=wd(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(l);if(p){let y;if(typeof p=="string"){const E=await Ud(e,{idToken:p}).catch(()=>{});if(!E)break;y=await ji._fromGetAccountInfoResponse(e,E,p)}else y=ji._fromJSON(e,p);f!==a&&(c=y),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new il(a,e,i):(a=h[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new il(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ux(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Px(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fx(e))return"Blackberry";if(zx(e))return"Webos";if(Lx(e))return"Safari";if((e.includes("chrome/")||Vx(e))&&!e.includes("edge/"))return"Chrome";if(Ox(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Px(t=Dn()){return/firefox\//i.test(t)}function Lx(t=Dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vx(t=Dn()){return/crios\//i.test(t)}function Ux(t=Dn()){return/iemobile/i.test(t)}function Ox(t=Dn()){return/android/i.test(t)}function Fx(t=Dn()){return/blackberry/i.test(t)}function zx(t=Dn()){return/webos/i.test(t)}function xy(t=Dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function S2(t=Dn()){var e;return xy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function w2(){return DN()&&document.documentMode===10}function qx(t=Dn()){return xy(t)||Ox(t)||zx(t)||Fx(t)||/windows phone/i.test(t)||Ux(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e=[]){let n;switch(t){case"Browser":n=zE(Dn());break;case"Worker":n=`${zE(Dn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((l,c)=>{try{const h=e(a);l(h)}catch(h){c(h)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e={}){return rs(t,"GET","/v2/passwordPolicy",is(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=6;class b2{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??C2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qE(this),this.idTokenSubscription=new qE(this),this.beforeStateQueue=new A2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ix,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qr(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ud(this,{idToken:e}),i=await ji._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ci(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Od(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(Xr(this));const n=e?zt(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x2(this),n=new b2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await E2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qr(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,s);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&n2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ss(t){return zt(t)}let qE=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qN(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R2(t){hh=t}function Hx(t){return hh.loadJS(t)}function N2(){return hh.recaptchaEnterpriseScript}function k2(){return hh.gapiScript}function M2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class D2{constructor(){this.enterprise=new P2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class P2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const L2="recaptcha-enterprise",Gx="NO_RECAPTCHA";class V2{constructor(e){this.type=L2,this.auth=ss(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{h2(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new d2(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function s(a,l,c){const h=window.grecaptcha;VE(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{l(f)}).catch(()=>{l(Gx)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D2().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!n&&VE(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=N2();h.length!==0&&(h+=c),Hx(h).then(()=>{s(c,a,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function BE(t,e,n,i=!1,s=!1){const a=new V2(t);let l;if(s)l=Gx;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Fd(t,e,n,i,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await BE(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await BE(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t,e){const n=Ty(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Yo(a,e??{}))return s;ki(s,"already-initialized")}return n.initialize({options:e})}function O2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Qr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function F2(t,e,n){const i=ss(t);Ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=jx(e),{host:l,port:c}=z2(e),h=c===null?"":`:${c}`,f={url:`${a}//${l}${h}/`},p=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ue(Yo(f,i.config.emulator)&&Yo(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,El(l)?(vx(`${a}//${l}${h}`),Tx("Auth",!0)):q2()}function jx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function z2(t){const e=jx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:HE(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:HE(l)}}}function HE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function q2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function B2(t,e){return rs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(t,e){return xc(t,"POST","/v1/accounts:signInWithPassword",is(t,e))}async function G2(t,e){return rs(t,"POST","/v1/accounts:sendOobCode",is(t,e))}async function j2(t,e){return G2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}async function $2(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends Cy{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new cc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new cc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fd(e,n,"signInWithPassword",H2);case"emailLink":return Y2(e,{email:this._email,oobCode:this._password});default:ki(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fd(e,i,"signUpPassword",B2);case"emailLink":return $2(e,{idToken:n,email:this._email,oobCode:this._password});default:ki(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t,e){return xc(t,"POST","/v1/accounts:signInWithIdp",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="http://localhost";class Jo extends Cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...a}=n;if(!i||!s)return null;const l=new Jo(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return rl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,rl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rl(e,n)}buildRequest(){const e={requestUri:J2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Q2(t){const e=Hu(Gu(t)).link,n=e?Hu(Gu(e)).deep_link_id:null,i=Hu(Gu(t)).deep_link_id;return(i?Hu(Gu(i)).link:null)||i||n||e||t}class by{constructor(e){const n=Hu(Gu(e)),i=n.apiKey??null,s=n.oobCode??null,a=K2(n.mode??null);Ue(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Q2(e);try{return new by(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.providerId=wl.PROVIDER_ID}static credential(e,n){return cc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=by.parseLink(n);return Ue(i,"argument-error"),cc._fromEmailAndCode(e,i.code,i.tenantId)}}wl.PROVIDER_ID="password";wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends Iy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Cc{constructor(){super("facebook.com")}static credential(e){return Jo._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jo._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Jr.credential(n,i)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Cc{constructor(){super("github.com")}static credential(e){return Jo._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Cc{constructor(){super("twitter.com")}static credential(e,n){return Jo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return js.credential(n,i)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return xc(t,"POST","/v1/accounts:signUp",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await ji._fromIdTokenResponse(e,i,s),l=GE(i);return new Ko({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=GE(i);return new Ko({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function GE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends ns{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,zd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new zd(e,n,i,s)}}function Yx(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?zd._fromErrorAndOperation(t,a,e,i):a})}async function W2(t,e,n=!1){const i=await uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ko._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e,n=!1){const{auth:i}=t;if(ci(i.app))return Promise.reject(Xr(i));const s="reauthenticate";try{const a=await uc(t,Yx(i,s,e,t),n);Ue(a.idToken,i,"internal-error");const l=Ay(a.idToken);Ue(l,i,"internal-error");const{sub:c}=l;return Ue(t.uid===c,i,"user-mismatch"),Ko._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ki(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(t,e,n=!1){if(ci(t.app))return Promise.reject(Xr(t));const i="signIn",s=await Yx(t,i,e),a=await Ko._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function eM(t,e){return $x(ss(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(t){const e=ss(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tM(t,e,n){const i=ss(t);await Fd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",j2)}async function nM(t,e,n){if(ci(t.app))return Promise.reject(Xr(t));const i=ss(t),l=await Fd(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",X2).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Jx(t),h}),c=await Ko._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function iM(t,e,n){return ci(t.app)?Promise.reject(Xr(t)):eM(zt(t),wl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Jx(t),i})}function rM(t,e,n,i){return zt(t).onIdTokenChanged(e,n,i)}function sM(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function oM(t,e,n,i){return zt(t).onAuthStateChanged(e,n,i)}function aM(t){return zt(t).signOut()}const qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qd,"1"),this.storage.removeItem(qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=1e3,uM=10;class Qx extends Kx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);w2()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,uM):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},lM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qx.type="LOCAL";const cM=Qx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx extends Kx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Xx.type="SESSION";const Wx=Xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new ph(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async f=>f(n.origin,a)),h=await fM(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,h)=>{const f=Ry("",20);s.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(y){const E=y;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(E.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function hM(t){Tr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function pM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function gM(){return Zx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebaseLocalStorageDb",yM=1,Bd="firebaseLocalStorage",tC="fbase_key";class bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mh(t,e){return t.transaction([Bd],e?"readwrite":"readonly").objectStore(Bd)}function _M(){const t=indexedDB.deleteDatabase(eC);return new bc(t).toPromise()}function kg(){const t=indexedDB.open(eC,yM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Bd,{keyPath:tC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Bd)?e(i):(i.close(),await _M(),e(await kg()))})})}async function jE(t,e,n){const i=mh(t,!0).put({[tC]:e,value:n});return new bc(i).toPromise()}async function vM(t,e){const n=mh(t,!1).get(e),i=await new bc(n).toPromise();return i===void 0?null:i.value}function YE(t,e){const n=mh(t,!0).delete(e);return new bc(n).toPromise()}const TM=800,EM=3;class nC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>EM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(gM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await pM(),!this.activeServiceWorker)return;this.sender=new dM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kg();return await jE(e,qd,"1"),await YE(e,qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>jE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>vM(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>YE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=mh(s,!1).getAll();return new bc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nC.type="LOCAL";const SM=nC;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t,e){return e?Qr(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny extends Cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wM(t){return $x(t.auth,new Ny(t),t.bypassAuthState)}function AM(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),Z2(n,new Ny(t),t.bypassAuthState)}async function xM(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),W2(n,new Ny(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wM;case"linkViaPopup":case"linkViaRedirect":return xM;case"reauthViaPopup":case"reauthViaRedirect":return AM;default:ki(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new Ac(2e3,1e4);async function sC(t,e,n){if(ci(t.app))return Promise.reject(Yi(t,"operation-not-supported-in-this-environment"));const i=ss(t);i2(t,e,Iy);const s=iC(i,n);return new Bo(i,"signInViaPopup",e,s).executeNotNull()}class Bo extends rC{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Zr(this.filter.length===1,"Popup operations only handle one event");const e=Ry();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CM.get())};e()}}Bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="pendingRedirect",Ad=new Map;class IM extends rC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ad.get(this.auth._key());if(!e){try{const i=await RM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ad.set(this.auth._key(),e)}return this.bypassAuthState||Ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RM(t,e){const n=MM(e),i=kM(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function NM(t,e){Ad.set(t._key(),e)}function kM(t){return Qr(t._redirectPersistence)}function MM(t){return wd(bM,t.config.apiKey,t.name)}async function DM(t,e,n=!1){if(ci(t.app))return Promise.reject(Xr(t));const i=ss(t),s=iC(i,e),l=await new IM(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=600*1e3;class LM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!oC(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Yi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PM&&this.cachedEventUids.clear(),this.cachedEventUids.has($E(e))}saveEventToCache(e){this.cachedEventUids.add($E(e)),this.lastProcessedEventTime=Date.now()}}function $E(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(t,e={}){return rs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FM=/^https?/;async function zM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UM(t);for(const n of e)try{if(qM(n))return}catch{}ki(t,"unauthorized-domain")}function qM(t){const e=Rg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!FM.test(n))return!1;if(OM.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new Ac(3e4,6e4);function JE(){const t=Tr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HM(t){return new Promise((e,n)=>{var s,a,l;function i(){JE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JE(),n(Yi(t,"network-request-failed"))},timeout:BM.get()})}if((a=(s=Tr().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=Tr().gapi)!=null&&l.load)i();else{const c=M2("iframefcb");return Tr()[c]=()=>{gapi.load?i():n(Yi(t,"network-request-failed"))},Hx(`${k2()}?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw xd=null,e})}let xd=null;function GM(t){return xd=xd||HM(t),xd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new Ac(5e3,15e3),YM="__/auth/iframe",$M="emulator/auth/iframe",JM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QM(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wy(e,$M):`https://${t.config.authDomain}/${YM}`,i={apiKey:e.apiKey,appName:t.name,v:Sl},s=KM.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${wc(i).slice(1)}`}async function XM(t){const e=await GM(t),n=Tr().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:QM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JM,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=Yi(t,"network-request-failed"),c=Tr().setTimeout(()=>{a(l)},jM.get());function h(){Tr().clearTimeout(c),s(i)}i.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZM=500,eD=600,tD="_blank",nD="http://localhost";class KE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iD(t,e,n,i=ZM,s=eD){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h={...WM,width:i.toString(),height:s.toString(),top:a,left:l},f=Dn().toLowerCase();n&&(c=Vx(f)?tD:n),Px(f)&&(e=e||nD,h.scrollbars="yes");const p=Object.entries(h).reduce((E,[w,b])=>`${E}${w}=${b},`,"");if(S2(f)&&c!=="_self")return rD(e||"",c),new KE(null);const y=window.open(e||"",c,p);Ue(y,t,"popup-blocked");try{y.focus()}catch{}return new KE(y)}function rD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="__/auth/handler",oD="emulator/auth/handler",aD=encodeURIComponent("fac");async function QE(t,e,n,i,s,a){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Sl,eventId:s};if(e instanceof Iy){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",zN(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))l[p]=y}if(e instanceof Cc){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const h=await t._getAppCheckToken(),f=h?`#${aD}=${encodeURIComponent(h)}`:"";return`${lD(t)}?${wc(c).slice(1)}${f}`}function lD({config:t}){return t.emulator?wy(t,oD):`https://${t.authDomain}/${sD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="webStorageSupport";class uD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wx,this._completeRedirectFn=DM,this._overrideRedirectResult=NM}async _openPopup(e,n,i,s){var l;Zr((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await QE(e,n,i,Rg(),s);return iD(e,a,Ry())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await QE(e,n,i,Rg(),s);return hM(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Zr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await XM(e),i=new LM(e);return n.register("authEvent",s=>(Ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wm,{type:Wm},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[Wm];a!==void 0&&n(!!a),ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qx()||Lx()||xy()}}const cD=uD;var XE="@firebase/auth",WE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hD(t){cl(new $o("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Ue(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bx(t)},f=new I2(i,s,a,h);return O2(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),cl(new $o("auth-internal",e=>{const n=ss(e.getProvider("auth").getImmediate());return(i=>new fD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(XE,WE,dD(t)),Qs(XE,WE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=300,mD=_x("authIdTokenMaxAge")||pD;let ZE=null;const gD=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>mD)return;const s=n==null?void 0:n.token;ZE!==s&&(ZE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function yD(t=Ax()){const e=Ty(t,"auth");if(e.isInitialized())return e.getImmediate();const n=U2(t,{popupRedirectResolver:cD,persistence:[SM,cM,Wx]}),i=_x("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=gD(a.toString());sM(n,l,()=>l(n.currentUser)),rM(n,c=>l(c))}}const s=gx("auth");return s&&F2(n,`http://${s}`),n}function _D(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}R2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Yi("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",_D().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hD("Browser");var eS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,aC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,P){function D(){}D.prototype=P.prototype,R.F=P.prototype,R.prototype=new D,R.prototype.constructor=R,R.D=function(I,U,z){for(var k=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)k[oe-2]=arguments[oe];return P.prototype[U].apply(I,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,P,D){D||(D=0);const I=Array(16);if(typeof P=="string")for(var U=0;U<16;++U)I[U]=P.charCodeAt(D++)|P.charCodeAt(D++)<<8|P.charCodeAt(D++)<<16|P.charCodeAt(D++)<<24;else for(U=0;U<16;++U)I[U]=P[D++]|P[D++]<<8|P[D++]<<16|P[D++]<<24;P=R.g[0],D=R.g[1],U=R.g[2];let z=R.g[3],k;k=P+(z^D&(U^z))+I[0]+3614090360&4294967295,P=D+(k<<7&4294967295|k>>>25),k=z+(U^P&(D^U))+I[1]+3905402710&4294967295,z=P+(k<<12&4294967295|k>>>20),k=U+(D^z&(P^D))+I[2]+606105819&4294967295,U=z+(k<<17&4294967295|k>>>15),k=D+(P^U&(z^P))+I[3]+3250441966&4294967295,D=U+(k<<22&4294967295|k>>>10),k=P+(z^D&(U^z))+I[4]+4118548399&4294967295,P=D+(k<<7&4294967295|k>>>25),k=z+(U^P&(D^U))+I[5]+1200080426&4294967295,z=P+(k<<12&4294967295|k>>>20),k=U+(D^z&(P^D))+I[6]+2821735955&4294967295,U=z+(k<<17&4294967295|k>>>15),k=D+(P^U&(z^P))+I[7]+4249261313&4294967295,D=U+(k<<22&4294967295|k>>>10),k=P+(z^D&(U^z))+I[8]+1770035416&4294967295,P=D+(k<<7&4294967295|k>>>25),k=z+(U^P&(D^U))+I[9]+2336552879&4294967295,z=P+(k<<12&4294967295|k>>>20),k=U+(D^z&(P^D))+I[10]+4294925233&4294967295,U=z+(k<<17&4294967295|k>>>15),k=D+(P^U&(z^P))+I[11]+2304563134&4294967295,D=U+(k<<22&4294967295|k>>>10),k=P+(z^D&(U^z))+I[12]+1804603682&4294967295,P=D+(k<<7&4294967295|k>>>25),k=z+(U^P&(D^U))+I[13]+4254626195&4294967295,z=P+(k<<12&4294967295|k>>>20),k=U+(D^z&(P^D))+I[14]+2792965006&4294967295,U=z+(k<<17&4294967295|k>>>15),k=D+(P^U&(z^P))+I[15]+1236535329&4294967295,D=U+(k<<22&4294967295|k>>>10),k=P+(U^z&(D^U))+I[1]+4129170786&4294967295,P=D+(k<<5&4294967295|k>>>27),k=z+(D^U&(P^D))+I[6]+3225465664&4294967295,z=P+(k<<9&4294967295|k>>>23),k=U+(P^D&(z^P))+I[11]+643717713&4294967295,U=z+(k<<14&4294967295|k>>>18),k=D+(z^P&(U^z))+I[0]+3921069994&4294967295,D=U+(k<<20&4294967295|k>>>12),k=P+(U^z&(D^U))+I[5]+3593408605&4294967295,P=D+(k<<5&4294967295|k>>>27),k=z+(D^U&(P^D))+I[10]+38016083&4294967295,z=P+(k<<9&4294967295|k>>>23),k=U+(P^D&(z^P))+I[15]+3634488961&4294967295,U=z+(k<<14&4294967295|k>>>18),k=D+(z^P&(U^z))+I[4]+3889429448&4294967295,D=U+(k<<20&4294967295|k>>>12),k=P+(U^z&(D^U))+I[9]+568446438&4294967295,P=D+(k<<5&4294967295|k>>>27),k=z+(D^U&(P^D))+I[14]+3275163606&4294967295,z=P+(k<<9&4294967295|k>>>23),k=U+(P^D&(z^P))+I[3]+4107603335&4294967295,U=z+(k<<14&4294967295|k>>>18),k=D+(z^P&(U^z))+I[8]+1163531501&4294967295,D=U+(k<<20&4294967295|k>>>12),k=P+(U^z&(D^U))+I[13]+2850285829&4294967295,P=D+(k<<5&4294967295|k>>>27),k=z+(D^U&(P^D))+I[2]+4243563512&4294967295,z=P+(k<<9&4294967295|k>>>23),k=U+(P^D&(z^P))+I[7]+1735328473&4294967295,U=z+(k<<14&4294967295|k>>>18),k=D+(z^P&(U^z))+I[12]+2368359562&4294967295,D=U+(k<<20&4294967295|k>>>12),k=P+(D^U^z)+I[5]+4294588738&4294967295,P=D+(k<<4&4294967295|k>>>28),k=z+(P^D^U)+I[8]+2272392833&4294967295,z=P+(k<<11&4294967295|k>>>21),k=U+(z^P^D)+I[11]+1839030562&4294967295,U=z+(k<<16&4294967295|k>>>16),k=D+(U^z^P)+I[14]+4259657740&4294967295,D=U+(k<<23&4294967295|k>>>9),k=P+(D^U^z)+I[1]+2763975236&4294967295,P=D+(k<<4&4294967295|k>>>28),k=z+(P^D^U)+I[4]+1272893353&4294967295,z=P+(k<<11&4294967295|k>>>21),k=U+(z^P^D)+I[7]+4139469664&4294967295,U=z+(k<<16&4294967295|k>>>16),k=D+(U^z^P)+I[10]+3200236656&4294967295,D=U+(k<<23&4294967295|k>>>9),k=P+(D^U^z)+I[13]+681279174&4294967295,P=D+(k<<4&4294967295|k>>>28),k=z+(P^D^U)+I[0]+3936430074&4294967295,z=P+(k<<11&4294967295|k>>>21),k=U+(z^P^D)+I[3]+3572445317&4294967295,U=z+(k<<16&4294967295|k>>>16),k=D+(U^z^P)+I[6]+76029189&4294967295,D=U+(k<<23&4294967295|k>>>9),k=P+(D^U^z)+I[9]+3654602809&4294967295,P=D+(k<<4&4294967295|k>>>28),k=z+(P^D^U)+I[12]+3873151461&4294967295,z=P+(k<<11&4294967295|k>>>21),k=U+(z^P^D)+I[15]+530742520&4294967295,U=z+(k<<16&4294967295|k>>>16),k=D+(U^z^P)+I[2]+3299628645&4294967295,D=U+(k<<23&4294967295|k>>>9),k=P+(U^(D|~z))+I[0]+4096336452&4294967295,P=D+(k<<6&4294967295|k>>>26),k=z+(D^(P|~U))+I[7]+1126891415&4294967295,z=P+(k<<10&4294967295|k>>>22),k=U+(P^(z|~D))+I[14]+2878612391&4294967295,U=z+(k<<15&4294967295|k>>>17),k=D+(z^(U|~P))+I[5]+4237533241&4294967295,D=U+(k<<21&4294967295|k>>>11),k=P+(U^(D|~z))+I[12]+1700485571&4294967295,P=D+(k<<6&4294967295|k>>>26),k=z+(D^(P|~U))+I[3]+2399980690&4294967295,z=P+(k<<10&4294967295|k>>>22),k=U+(P^(z|~D))+I[10]+4293915773&4294967295,U=z+(k<<15&4294967295|k>>>17),k=D+(z^(U|~P))+I[1]+2240044497&4294967295,D=U+(k<<21&4294967295|k>>>11),k=P+(U^(D|~z))+I[8]+1873313359&4294967295,P=D+(k<<6&4294967295|k>>>26),k=z+(D^(P|~U))+I[15]+4264355552&4294967295,z=P+(k<<10&4294967295|k>>>22),k=U+(P^(z|~D))+I[6]+2734768916&4294967295,U=z+(k<<15&4294967295|k>>>17),k=D+(z^(U|~P))+I[13]+1309151649&4294967295,D=U+(k<<21&4294967295|k>>>11),k=P+(U^(D|~z))+I[4]+4149444226&4294967295,P=D+(k<<6&4294967295|k>>>26),k=z+(D^(P|~U))+I[11]+3174756917&4294967295,z=P+(k<<10&4294967295|k>>>22),k=U+(P^(z|~D))+I[2]+718787259&4294967295,U=z+(k<<15&4294967295|k>>>17),k=D+(z^(U|~P))+I[9]+3951481745&4294967295,R.g[0]=R.g[0]+P&4294967295,R.g[1]=R.g[1]+(U+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.v=function(R,P){P===void 0&&(P=R.length);const D=P-this.blockSize,I=this.C;let U=this.h,z=0;for(;z<P;){if(U==0)for(;z<=D;)s(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<P;)if(I[U++]=R.charCodeAt(z++),U==this.blockSize){s(this,I),U=0;break}}else for(;z<P;)if(I[U++]=R[z++],U==this.blockSize){s(this,I),U=0;break}}this.h=U,this.o+=P},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var P=1;P<R.length-8;++P)R[P]=0;P=this.o*8;for(var D=R.length-8;D<R.length;++D)R[D]=P&255,P/=256;for(this.v(R),R=Array(16),P=0,D=0;D<4;++D)for(let I=0;I<32;I+=8)R[P++]=this.g[D]>>>I&255;return R};function a(R,P){var D=c;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=P(R)}function l(R,P){this.h=P;const D=[];let I=!0;for(let U=R.length-1;U>=0;U--){const z=R[U]|0;I&&z==P||(D[U]=z,I=!1)}this.g=D}var c={};function h(R){return-128<=R&&R<128?a(R,function(P){return new l([P|0],P<0?-1:0)}):new l([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(R<0)return F(f(-R));const P=[];let D=1;for(let I=0;R>=D;I++)P[I]=R/D|0,D*=4294967296;return new l(P,0)}function p(R,P){if(R.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(R.charAt(0)=="-")return F(p(R.substring(1),P));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=f(Math.pow(P,8));let I=y;for(let z=0;z<R.length;z+=8){var U=Math.min(8,R.length-z);const k=parseInt(R.substring(z,z+U),P);U<8?(U=f(Math.pow(P,U)),I=I.j(U).add(f(k))):(I=I.j(D),I=I.add(f(k)))}return I}var y=h(0),E=h(1),w=h(16777216);t=l.prototype,t.m=function(){if(L(this))return-F(this).m();let R=0,P=1;for(let D=0;D<this.g.length;D++){const I=this.i(D);R+=(I>=0?I:4294967296+I)*P,P*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(L(this))return"-"+F(this).toString(R);const P=f(Math.pow(R,6));var D=this;let I="";for(;;){const U=X(D,P).g;D=O(D,U.j(P));let z=((D.g.length>0?D.g[0]:D.h)>>>0).toString(R);if(D=U,b(D))return z+I;for(;z.length<6;)z="0"+z;I=z+I}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(let P=0;P<R.g.length;P++)if(R.g[P]!=0)return!1;return!0}function L(R){return R.h==-1}t.l=function(R){return R=O(this,R),L(R)?-1:b(R)?0:1};function F(R){const P=R.g.length,D=[];for(let I=0;I<P;I++)D[I]=~R.g[I];return new l(D,~R.h).add(E)}t.abs=function(){return L(this)?F(this):this},t.add=function(R){const P=Math.max(this.g.length,R.g.length),D=[];let I=0;for(let U=0;U<=P;U++){let z=I+(this.i(U)&65535)+(R.i(U)&65535),k=(z>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);I=k>>>16,z&=65535,k&=65535,D[U]=k<<16|z}return new l(D,D[D.length-1]&-2147483648?-1:0)};function O(R,P){return R.add(F(P))}t.j=function(R){if(b(this)||b(R))return y;if(L(this))return L(R)?F(this).j(F(R)):F(F(this).j(R));if(L(R))return F(this.j(F(R)));if(this.l(w)<0&&R.l(w)<0)return f(this.m()*R.m());const P=this.g.length+R.g.length,D=[];for(var I=0;I<2*P;I++)D[I]=0;for(I=0;I<this.g.length;I++)for(let U=0;U<R.g.length;U++){const z=this.i(I)>>>16,k=this.i(I)&65535,oe=R.i(U)>>>16,me=R.i(U)&65535;D[2*I+2*U]+=k*me,H(D,2*I+2*U),D[2*I+2*U+1]+=z*me,H(D,2*I+2*U+1),D[2*I+2*U+1]+=k*oe,H(D,2*I+2*U+1),D[2*I+2*U+2]+=z*oe,H(D,2*I+2*U+2)}for(R=0;R<P;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=P;R<2*P;R++)D[R]=0;return new l(D,0)};function H(R,P){for(;(R[P]&65535)!=R[P];)R[P+1]+=R[P]>>>16,R[P]&=65535,P++}function B(R,P){this.g=R,this.h=P}function X(R,P){if(b(P))throw Error("division by zero");if(b(R))return new B(y,y);if(L(R))return P=X(F(R),P),new B(F(P.g),F(P.h));if(L(P))return P=X(R,F(P)),new B(F(P.g),P.h);if(R.g.length>30){if(L(R)||L(P))throw Error("slowDivide_ only works with positive integers.");for(var D=E,I=P;I.l(R)<=0;)D=ne(D),I=ne(I);var U=Y(D,1),z=Y(I,1);for(I=Y(I,2),D=Y(D,2);!b(I);){var k=z.add(I);k.l(R)<=0&&(U=U.add(D),z=k),I=Y(I,1),D=Y(D,1)}return P=O(R,U.j(P)),new B(U,P)}for(U=y;R.l(P)>=0;){for(D=Math.max(1,Math.floor(R.m()/P.m())),I=Math.ceil(Math.log(D)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),z=f(D),k=z.j(P);L(k)||k.l(R)>0;)D-=I,z=f(D),k=z.j(P);b(z)&&(z=E),U=U.add(z),R=O(R,k)}return new B(U,R)}t.B=function(R){return X(this,R).h},t.and=function(R){const P=Math.max(this.g.length,R.g.length),D=[];for(let I=0;I<P;I++)D[I]=this.i(I)&R.i(I);return new l(D,this.h&R.h)},t.or=function(R){const P=Math.max(this.g.length,R.g.length),D=[];for(let I=0;I<P;I++)D[I]=this.i(I)|R.i(I);return new l(D,this.h|R.h)},t.xor=function(R){const P=Math.max(this.g.length,R.g.length),D=[];for(let I=0;I<P;I++)D[I]=this.i(I)^R.i(I);return new l(D,this.h^R.h)};function ne(R){const P=R.g.length+1,D=[];for(let I=0;I<P;I++)D[I]=R.i(I)<<1|R.i(I-1)>>>31;return new l(D,R.h)}function Y(R,P){const D=P>>5;P%=32;const I=R.g.length-D,U=[];for(let z=0;z<I;z++)U[z]=P>0?R.i(z+D)>>>P|R.i(z+D+1)<<32-P:R.i(z+D);return new l(U,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,aC=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,Xs=l}).apply(typeof eS<"u"?eS:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lC,ju,uC,Cd,Mg,cC,fC,dC;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var A=0;A<g.length;++A){var C=g[A];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function s(g,A){if(A)e:{var C=i;g=g.split(".");for(var V=0;V<g.length-1;V++){var Q=g[V];if(!(Q in C))break e;C=C[Q]}g=g[g.length-1],V=C[g],A=A(V),A!=V&&A!=null&&e(C,g,{configurable:!0,writable:!0,value:A})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(A){var C=[],V;for(V in A)Object.prototype.hasOwnProperty.call(A,V)&&C.push([V,A[V]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function h(g,A,C){return g.call.apply(g.bind,arguments)}function f(g,A,C){return f=h,f.apply(null,arguments)}function p(g,A){var C=Array.prototype.slice.call(arguments,1);return function(){var V=C.slice();return V.push.apply(V,arguments),g.apply(this,V)}}function y(g,A){function C(){}C.prototype=A.prototype,g.Z=A.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(V,Q,ie){for(var ve=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ve[qe-2]=arguments[qe];return A.prototype[Q].apply(V,ve)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const A=g.length;if(A>0){const C=Array(A);for(let V=0;V<A;V++)C[V]=g[V];return C}return[]}function b(g,A){for(let V=1;V<arguments.length;V++){const Q=arguments[V];var C=typeof Q;if(C=C!="object"?C:Q?Array.isArray(Q)?"array":C:"null",C=="array"||C=="object"&&typeof Q.length=="number"){C=g.length||0;const ie=Q.length||0;g.length=C+ie;for(let ve=0;ve<ie;ve++)g[C+ve]=Q[ve]}else g.push(Q)}}class L{constructor(A,C){this.i=A,this.j=C,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function F(g){l.setTimeout(()=>{throw g},0)}function O(){var g=R;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class H{constructor(){this.h=this.g=null}add(A,C){const V=B.get();V.set(A,C),this.h?this.h.next=V:this.g=V,this.h=V}}var B=new L(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(A,C){this.h=A,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Y=!1,R=new H,P=()=>{const g=Promise.resolve(void 0);ne=()=>{g.then(D)}};function D(){for(var g;g=O();){try{g.h.call(g.g)}catch(C){F(C)}var A=B;A.j(g),A.h<100&&(A.h++,g.next=A.g,A.g=g)}Y=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};l.addEventListener("test",C,A),l.removeEventListener("test",C,A)}catch{}return g})();function k(g){return/^[\s\xa0]*$/.test(g)}function oe(g,A){U.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,A)}y(oe,U),oe.prototype.init=function(g,A){const C=this.type=g.type,V=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget,A||(C=="mouseover"?A=g.fromElement:C=="mouseout"&&(A=g.toElement)),this.relatedTarget=A,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),K=0;function he(g,A,C,V,Q){this.listener=g,this.proxy=null,this.src=A,this.type=C,this.capture=!!V,this.ha=Q,this.key=++K,this.da=this.fa=!1}function Se(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ie(g,A,C){for(const V in g)A.call(C,g[V],V,g)}function q(g,A){for(const C in g)A.call(void 0,g[C],C,g)}function G(g){const A={};for(const C in g)A[C]=g[C];return A}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(g,A){let C,V;for(let Q=1;Q<arguments.length;Q++){V=arguments[Q];for(C in V)g[C]=V[C];for(let ie=0;ie<W.length;ie++)C=W[ie],Object.prototype.hasOwnProperty.call(V,C)&&(g[C]=V[C])}}function se(g){this.src=g,this.g={},this.h=0}se.prototype.add=function(g,A,C,V,Q){const ie=g.toString();g=this.g[ie],g||(g=this.g[ie]=[],this.h++);const ve=Te(g,A,V,Q);return ve>-1?(A=g[ve],C||(A.fa=!1)):(A=new he(A,this.src,ie,!!V,Q),A.fa=C,g.push(A)),A};function ge(g,A){const C=A.type;if(C in g.g){var V=g.g[C],Q=Array.prototype.indexOf.call(V,A,void 0),ie;(ie=Q>=0)&&Array.prototype.splice.call(V,Q,1),ie&&(Se(A),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Te(g,A,C,V){for(let Q=0;Q<g.length;++Q){const ie=g[Q];if(!ie.da&&ie.listener==A&&ie.capture==!!C&&ie.ha==V)return Q}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Re={};function ze(g,A,C,V,Q){if(Array.isArray(A)){for(let ie=0;ie<A.length;ie++)ze(g,A[ie],C,V,Q);return null}return C=Qi(C),g&&g[me]?g.J(A,C,c(V)?!!V.capture:!1,Q):on(g,A,C,!1,V,Q)}function on(g,A,C,V,Q,ie){if(!A)throw Error("Invalid event type");const ve=c(Q)?!!Q.capture:!!Q;let qe=qn(g);if(qe||(g[Ae]=qe=new se(g)),C=qe.add(A,C,V,ve,ie),C.proxy)return C;if(V=Dt(),C.proxy=V,V.src=g,V.listener=C,g.addEventListener)z||(Q=ve),Q===void 0&&(Q=!1),g.addEventListener(A.toString(),V,Q);else if(g.attachEvent)g.attachEvent(Nt(A.toString()),V);else if(g.addListener&&g.removeListener)g.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Dt(){function g(C){return A.call(g.src,g.listener,C)}const A=mi;return g}function yt(g,A,C,V,Q){if(Array.isArray(A))for(var ie=0;ie<A.length;ie++)yt(g,A[ie],C,V,Q);else V=c(V)?!!V.capture:!!V,C=Qi(C),g&&g[me]?(g=g.i,ie=String(A).toString(),ie in g.g&&(A=g.g[ie],C=Te(A,C,V,Q),C>-1&&(Se(A[C]),Array.prototype.splice.call(A,C,1),A.length==0&&(delete g.g[ie],g.h--)))):g&&(g=qn(g))&&(A=g.g[A.toString()],g=-1,A&&(g=Te(A,C,V,Q)),(C=g>-1?A[g]:null)&&qt(C))}function qt(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[me])ge(A.i,g);else{var C=g.type,V=g.proxy;A.removeEventListener?A.removeEventListener(C,V,g.capture):A.detachEvent?A.detachEvent(Nt(C),V):A.addListener&&A.removeListener&&A.removeListener(V),(C=qn(A))?(ge(C,g),C.h==0&&(C.src=null,A[Ae]=null)):Se(g)}}}function Nt(g){return g in Re?Re[g]:Re[g]="on"+g}function mi(g,A){if(g.da)g=!0;else{A=new oe(A,this);const C=g.listener,V=g.ha||g.src;g.fa&&qt(g),g=C.call(V,A)}return g}function qn(g){return g=g[Ae],g instanceof se?g:null}var Bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qi(g){return typeof g=="function"?g:(g[Bn]||(g[Bn]=function(A){return g.handleEvent(A)}),g[Bn])}function je(){I.call(this),this.i=new se(this),this.M=this,this.G=null}y(je,I),je.prototype[me]=!0,je.prototype.removeEventListener=function(g,A,C,V){yt(this,g,A,C,V)};function rt(g,A){var C,V=g.G;if(V)for(C=[];V;V=V.G)C.push(V);if(g=g.M,V=A.type||A,typeof A=="string")A=new U(A,g);else if(A instanceof U)A.target=A.target||g;else{var Q=A;A=new U(V,g),M(A,Q)}Q=!0;let ie,ve;if(C)for(ve=C.length-1;ve>=0;ve--)ie=A.g=C[ve],Q=Hn(ie,V,!0,A)&&Q;if(ie=A.g=g,Q=Hn(ie,V,!0,A)&&Q,Q=Hn(ie,V,!1,A)&&Q,C)for(ve=0;ve<C.length;ve++)ie=A.g=C[ve],Q=Hn(ie,V,!1,A)&&Q}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var g=this.i;for(const A in g.g){const C=g.g[A];for(let V=0;V<C.length;V++)Se(C[V]);delete g.g[A],g.h--}}this.G=null},je.prototype.J=function(g,A,C,V){return this.i.add(String(g),A,!1,C,V)},je.prototype.K=function(g,A,C,V){return this.i.add(String(g),A,!0,C,V)};function Hn(g,A,C,V){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();let Q=!0;for(let ie=0;ie<A.length;++ie){const ve=A[ie];if(ve&&!ve.da&&ve.capture==C){const qe=ve.listener,Ht=ve.ha||ve.src;ve.fa&&ge(g.i,ve),Q=qe.call(Ht,V)!==!1&&Q}}return Q&&!V.defaultPrevented}function us(g,A){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:l.setTimeout(g,A||0)}function sa(g){g.g=us(()=>{g.g=null,g.i&&(g.i=!1,sa(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class gn extends I{constructor(A,C){super(),this.m=A,this.l=C,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:sa(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(g){I.call(this),this.h=g,this.g={}}y(Ir,I);var ue=[];function _e(g){Ie(g.g,function(A,C){this.g.hasOwnProperty(C)&&qt(A)},g),g.g={}}Ir.prototype.N=function(){Ir.Z.N.call(this),_e(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=l.JSON.stringify,Ye=l.JSON.parse,lt=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function Cn(){}function gi(){}var Bt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){U.call(this,"d")}y(Pt,U);function cn(){U.call(this,"c")}y(cn,U);var tt={},Mi=null;function bn(){return Mi=Mi||new je}tt.Ia="serverreachability";function zc(g){U.call(this,tt.Ia,g)}y(zc,U);function Xi(g){const A=bn();rt(A,new zc(A))}tt.STAT_EVENT="statevent";function fo(g,A){U.call(this,tt.STAT_EVENT,g),this.stat=A}y(fo,U);function $t(g){const A=bn();rt(A,new fo(A,g))}tt.Ja="timingevent";function Wi(g,A){U.call(this,tt.Ja,g),this.size=A}y(Wi,U);function Zi(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},A)}function Di(){this.g=!0}Di.prototype.ua=function(){this.g=!1};function Gh(g,A,C,V,Q,ie){g.info(function(){if(g.g)if(ie){var ve="",qe=ie.split("&");for(let dt=0;dt<qe.length;dt++){var Ht=qe[dt].split("=");if(Ht.length>1){const kt=Ht[0];Ht=Ht[1];const Ti=kt.split("_");ve=Ti.length>=2&&Ti[1]=="type"?ve+(kt+"="+Ht+"&"):ve+(kt+"=redacted&")}}}else ve=null;else ve=ie;return"XMLHTTP REQ ("+V+") [attempt "+Q+"]: "+A+`
`+C+`
`+ve})}function qc(g,A,C,V,Q,ie,ve){g.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Q+"]: "+A+`
`+C+`
`+ie+" "+ve})}function er(g,A,C,V){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+jh(g,C)+(V?" "+V:"")})}function ho(g,A){g.info(function(){return"TIMEOUT: "+A})}Di.prototype.info=function(){};function jh(g,A){if(!g.g)return A;if(!A)return null;try{const ie=JSON.parse(A);if(ie){for(g=0;g<ie.length;g++)if(Array.isArray(ie[g])){var C=ie[g];if(!(C.length<2)){var V=C[1];if(Array.isArray(V)&&!(V.length<1)){var Q=V[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ve=1;ve<V.length;ve++)V[ve]=""}}}}return De(ie)}catch{return A}}var po={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ol;function mo(){}y(mo,Cn),mo.prototype.g=function(){return new XMLHttpRequest},Ol=new mo;function Rr(g){return encodeURIComponent(String(g))}function Bc(g){var A=1;g=g.split(":");const C=[];for(;A>0&&g.length;)C.push(g.shift()),A--;return g.length&&C.push(g.join(":")),C}function Pi(g,A,C,V){this.j=g,this.i=A,this.l=C,this.S=V||1,this.V=new Ir(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Li}function Li(){this.i=null,this.g="",this.h=!1}var Jt={},fn={};function tr(g,A,C){g.M=1,g.A=go(Qt(A)),g.u=C,g.R=!0,oa(g,null)}function oa(g,A){g.F=Date.now(),nr(g),g.B=Qt(g.A);var C=g.B,V=g.S;Array.isArray(V)||(V=[String(V)]),ca(C.i,"t",V),g.C=0,C=g.j.L,g.h=new Li,g.g=rf(g.j,C?A:null,!g.u),g.P>0&&(g.O=new gn(f(g.Y,g,g.g),g.P)),A=g.V,C=g.g,V=g.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(ue[0]=Q.toString()),Q=ue);for(let ie=0;ie<Q.length;ie++){const ve=ze(C,Q[ie],V||A.handleEvent,!1,A.h||A);if(!ve)break;A.g[ve.key]=ve}A=g.J?G(g.J):{},g.u?(g.v||(g.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,A)):(g.v="GET",g.g.ea(g.B,g.v,null,A)),Xi(),Gh(g.i,g.v,g.B,g.l,g.S,g.u)}Pi.prototype.ba=function(g){g=g.target;const A=this.O;A&&Oi(g)==3?A.j():this.Y(g)},Pi.prototype.Y=function(g){try{if(g==this.g)e:{const qe=Oi(this.g),Ht=this.g.ya(),dt=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||yn(this.g)))){this.K||qe!=4||Ht==7||(Ht==8||dt<=0?Xi(3):Xi(2)),ir(this);var A=this.g.ca();this.X=A;var C=Yh(this);if(this.o=A==200,qc(this.i,this.v,this.B,this.l,this.S,qe,A),this.o){if(this.U&&!this.L){t:{if(this.g){var V,Q=this.g;if((V=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(V)){var ie=V;break t}}ie=null}if(g=ie)er(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rr(this,g);else{this.o=!1,this.m=3,$t(12),ei(this),yi(this);break e}}if(this.R){g=!0;let kt;for(;!this.K&&this.C<C.length;)if(kt=Gc(this,C),kt==fn){qe==4&&(this.m=4,$t(14),g=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Jt){this.m=4,$t(15),er(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else er(this.i,this.l,kt,null),rr(this,kt);if(Hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||C.length!=0||this.h.h||(this.m=1,$t(16),g=!1),this.o=this.o&&g,!g)er(this.i,this.l,C,"[Invalid Chunked Response]"),ei(this),yi(this);else if(C.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Zl(ve),ve.P=!0,$t(11))}}else er(this.i,this.l,C,null),rr(this,C);qe==4&&ei(this),this.o&&!this.K&&(qe==4?Zc(this.j,this):(this.o=!1,nr(this)))}else kr(this.g),A==400&&C.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),ei(this),yi(this)}}}catch{}finally{}};function Yh(g){if(!Hc(g))return g.g.la();const A=yn(g.g);if(A==="")return"";let C="";const V=A.length,Q=Oi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return ei(g),yi(g),"";g.h.i=new l.TextDecoder}for(let ie=0;ie<V;ie++)g.h.h=!0,C+=g.h.i.decode(A[ie],{stream:!(Q&&ie==V-1)});return A.length=0,g.h.g+=C,g.C=0,g.h.g}function Hc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Gc(g,A){var C=g.C,V=A.indexOf(`
`,C);return V==-1?fn:(C=Number(A.substring(C,V)),isNaN(C)?Jt:(V+=1,V+C>A.length?fn:(A=A.slice(V,V+C),g.C=V+C,A)))}Pi.prototype.cancel=function(){this.K=!0,ei(this)};function nr(g){g.T=Date.now()+g.H,aa(g,g.H)}function aa(g,A){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Zi(f(g.aa,g),A)}function ir(g){g.D&&(l.clearTimeout(g.D),g.D=null)}Pi.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(ho(this.i,this.B),this.M!=2&&(Xi(),$t(17)),ei(this),this.m=2,yi(this)):aa(this,this.T-g)};function yi(g){g.j.I==0||g.K||Zc(g.j,g)}function ei(g){ir(g);var A=g.O;A&&typeof A.dispose=="function"&&A.dispose(),g.O=null,_e(g.V),g.g&&(A=g.g,g.g=null,A.abort(),A.dispose())}function rr(g,A){try{var C=g.j;if(C.I!=0&&(C.g==g||or(C.h,g))){if(!g.L&&or(C.h,g)&&C.I==3){try{var V=C.Ba.g.parse(A)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Q=V;if(Q[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)ma(C),ys(C);else break e;wo(C),$t(18)}}else C.xa=Q[1],0<C.xa-C.K&&Q[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Zi(f(C.Va,C),6e3));sr(C.h)<=1&&C.ta&&(C.ta=void 0)}else dr(C,11)}else if((g.L||C.g==g)&&ma(C),!k(A))for(Q=C.Ba.g.parse(A),A=0;A<Q.length;A++){let dt=Q[A];const kt=dt[0];if(!(kt<=C.K))if(C.K=kt,dt=dt[1],C.I==2)if(dt[0]=="c"){C.M=dt[1],C.ba=dt[2];const Ti=dt[3];Ti!=null&&(C.ka=Ti,C.j.info("VER="+C.ka));const hr=dt[4];hr!=null&&(C.za=hr,C.j.info("SVER="+C.za));const Fi=dt[5];Fi!=null&&typeof Fi=="number"&&Fi>0&&(V=1.5*Fi,C.O=V,C.j.info("backChannelRequestTimeoutMs_="+V)),V=C;const zi=g.g;if(zi){const Ao=zi.g?zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var ie=V.h;ie.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(ql(ie,ie.h),ie.h=null))}if(V.G){const ga=zi.g?zi.g.getResponseHeader("X-HTTP-Session-Id"):null;ga&&(V.wa=ga,pt(V.J,V.G,ga))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),V=C;var ve=g;if(V.na=nf(V,V.L?V.ba:null,V.W),ve.L){Bl(V.h,ve);var qe=ve,Ht=V.O;Ht&&(qe.H=Ht),qe.D&&(ir(qe),nr(qe)),V.g=ve}else Xc(V);C.i.length>0&&fr(C)}else dt[0]!="stop"&&dt[0]!="close"||dr(C,7);else C.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?dr(C,7):Xl(C):dt[0]!="noop"&&C.l&&C.l.qa(dt),C.A=0)}}Xi(4)}catch{}}var Kt=class{constructor(g,A){this.g=g,this.map=A}};function Fl(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function sr(g){return g.h?1:g.g?g.g.size:0}function or(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function ql(g,A){g.g?g.g.add(A):g.h=A}function Bl(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}Fl.prototype.cancel=function(){if(this.i=Hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Hl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const C of g.g.values())A=A.concat(C.G);return A}return w(g.i)}var jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function la(g,A){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const V=g[C].indexOf("=");let Q,ie=null;V>=0?(Q=g[C].substring(0,V),ie=g[C].substring(V+1)):Q=g[C],A(Q,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function ti(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;g instanceof ti?(this.l=g.l,dn(this,g.j),this.o=g.o,this.g=g.g,cs(this,g.u),this.h=g.h,Gl(this,Kc(g.i)),this.m=g.m):g&&(A=String(g).match(jc))?(this.l=!1,dn(this,A[1]||"",!0),this.o=ar(A[2]||""),this.g=ar(A[3]||"",!0),cs(this,A[4]),this.h=ar(A[5]||"",!0),Gl(this,A[6]||"",!0),this.m=ar(A[7]||"")):(this.l=!1,this.i=new ds(null,this.l))}ti.prototype.toString=function(){const g=[];var A=this.j;A&&g.push(yo(A,ua,!0),":");var C=this.g;return(C||A=="file")&&(g.push("//"),(A=this.o)&&g.push(yo(A,ua,!0),"@"),g.push(Rr(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(yo(C,C.charAt(0)=="/"?jl:Yc,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",yo(C,$c)),g.join("")},ti.prototype.resolve=function(g){const A=Qt(this);let C=!!g.j;C?dn(A,g.j):C=!!g.o,C?A.o=g.o:C=!!g.g,C?A.g=g.g:C=g.u!=null;var V=g.h;if(C)cs(A,g.u);else if(C=!!g.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var Q=A.h.lastIndexOf("/");Q!=-1&&(V=A.h.slice(0,Q+1)+V)}if(Q=V,Q==".."||Q==".")V="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){V=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ie=[];for(let ve=0;ve<Q.length;){const qe=Q[ve++];qe=="."?V&&ve==Q.length&&ie.push(""):qe==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),V&&ve==Q.length&&ie.push("")):(ie.push(qe),V=!0)}V=ie.join("/")}else V=Q}return C?A.h=V:C=g.i.toString()!=="",C?Gl(A,Kc(g.i)):C=!!g.m,C&&(A.m=g.m),A};function Qt(g){return new ti(g)}function dn(g,A,C){g.j=C?ar(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function cs(g,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);g.u=A}else g.u=null}function Gl(g,A,C){A instanceof ds?(g.i=A,fa(g.i,g.l)):(C||(A=yo(A,fs)),g.i=new ds(A,g.l))}function pt(g,A,C){g.i.set(A,C)}function go(g){return pt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function ar(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function yo(g,A,C){return typeof g=="string"?(g=encodeURI(g).replace(A,Gn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Gn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ua=/[#\/\?@]/g,Yc=/[#\?:]/g,jl=/[#\?]/g,fs=/[#\?@]/g,$c=/#/g;function ds(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function jn(g){g.g||(g.g=new Map,g.h=0,g.i&&la(g.i,function(A,C){g.add(decodeURIComponent(A.replace(/\+/g," ")),C)}))}t=ds.prototype,t.add=function(g,A){jn(this),this.i=null,g=hs(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(A),this.h+=1,this};function Jc(g,A){jn(g),A=hs(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function Yl(g,A){return jn(g),A=hs(g,A),g.g.has(A)}t.forEach=function(g,A){jn(this),this.g.forEach(function(C,V){C.forEach(function(Q){g.call(A,Q,V,this)},this)},this)};function $l(g,A){jn(g);let C=[];if(typeof A=="string")Yl(g,A)&&(C=C.concat(g.g.get(hs(g,A))));else for(g=Array.from(g.g.values()),A=0;A<g.length;A++)C=C.concat(g[A]);return C}t.set=function(g,A){return jn(this),this.i=null,g=hs(this,g),Yl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},t.get=function(g,A){return g?(g=$l(this,g),g.length>0?String(g[0]):A):A};function ca(g,A,C){Jc(g,A),C.length>0&&(g.i=null,g.g.set(hs(g,A),w(C)),g.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(let V=0;V<A.length;V++){var C=A[V];const Q=Rr(C);C=$l(this,C);for(let ie=0;ie<C.length;ie++){let ve=Q;C[ie]!==""&&(ve+="="+Rr(C[ie])),g.push(ve)}}return this.i=g.join("&")};function Kc(g){const A=new ds;return A.i=g.i,g.g&&(A.g=new Map(g.g),A.h=g.h),A}function hs(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function fa(g,A){A&&!g.j&&(jn(g),g.i=null,g.g.forEach(function(C,V){const Q=V.toLowerCase();V!=Q&&(Jc(this,V),ca(this,Q,C))},g)),g.j=A}function Vi(g,A){const C=new Di;if(l.Image){const V=new Image;V.onload=p(_i,C,"TestLoadImage: loaded",!0,A,V),V.onerror=p(_i,C,"TestLoadImage: error",!1,A,V),V.onabort=p(_i,C,"TestLoadImage: abort",!1,A,V),V.ontimeout=p(_i,C,"TestLoadImage: timeout",!1,A,V),l.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=g}else A(!1)}function Jl(g,A){const C=new Di,V=new AbortController,Q=setTimeout(()=>{V.abort(),_i(C,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:V.signal}).then(ie=>{clearTimeout(Q),ie.ok?_i(C,"TestPingServer: ok",!0,A):_i(C,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(Q),_i(C,"TestPingServer: error",!1,A)})}function _i(g,A,C,V,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),V(C)}catch{}}function ps(){this.g=new lt}function lr(g){this.i=g.Sb||null,this.h=g.ab||!1}y(lr,Cn),lr.prototype.g=function(){return new _o(this.i,this.h)};function _o(g,A){je.call(this),this.H=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(_o,je),t=_o.prototype,t.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=A,this.readyState=1,Ui(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(A.body=g),(this.H||l).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ms(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;da(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function da(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?ms(this):Ui(this),this.readyState==3&&da(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,ms(this))},t.Na=function(g){this.g&&(this.response=g,ms(this))},t.ga=function(){this.g&&ms(this)};function ms(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Ui(g)}t.setRequestHeader=function(g,A){this.A.append(g,A)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var C=A.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=A.next();return g.join(`\r
`)};function Ui(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function vi(g){let A="";return Ie(g,function(C,V){A+=V,A+=":",A+=C,A+=`\r
`}),A}function vo(g,A,C){e:{for(V in C){var V=!1;break e}V=!0}V||(C=vi(C),typeof g=="string"?C!=null&&Rr(C):pt(g,A,C))}function _t(g){je.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(_t,je);var ur=/^https?$/i,Kl=["POST","PUT"];t=_t.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,A,C,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ol.g(),this.g.onreadystatechange=E(f(this.Ca,this));try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(ie){To(this,ie);return}if(g=C||"",C=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Q in V)C.set(Q,V[Q]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ie of V.keys())C.set(ie,V.get(ie));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),Q=l.FormData&&g instanceof l.FormData,!(Array.prototype.indexOf.call(Kl,A,void 0)>=0)||V||Q||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ve]of C)this.g.setRequestHeader(ie,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ie){To(this,ie)}};function To(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.o=5,Ql(g),Nr(g)}function Ql(g){g.A||(g.A=!0,rt(g,"complete"),rt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,rt(this,"complete"),rt(this,"abort"),Nr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nr(this,!0)),_t.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Eo(this):this.Xa())},t.Xa=function(){Eo(this)};function Eo(g){if(g.h&&typeof a<"u"){if(g.v&&Oi(g)==4)setTimeout(g.Ca.bind(g),0);else if(rt(g,"readystatechange"),Oi(g)==4){g.h=!1;try{const ie=g.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var C;if(!(C=A)){var V;if(V=ie===0){let ve=String(g.D).match(jc)[1]||null;!ve&&l.self&&l.self.location&&(ve=l.self.location.protocol.slice(0,-1)),V=!ur.test(ve?ve.toLowerCase():"")}C=V}if(C)rt(g,"complete"),rt(g,"success");else{g.o=6;try{var Q=Oi(g)>2?g.g.statusText:""}catch{Q=""}g.l=Q+" ["+g.ca()+"]",Ql(g)}}finally{Nr(g)}}}}function Nr(g,A){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,A||rt(g,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Oi(g){return g.g?g.g.readyState:0}t.ca=function(){try{return Oi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Ye(A)}};function yn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function kr(g){const A={};g=(g.g&&Oi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<g.length;V++){if(k(g[V]))continue;var C=Bc(g[V]);const Q=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=A[Q]||[];A[Q]=ie,ie.push(C)}q(A,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function cr(g,A,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||A}function gs(g){this.za=0,this.i=[],this.j=new Di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=cr("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=cr("baseRetryDelayMs",5e3,g),this.Za=cr("retryDelaySeedMs",1e4,g),this.Ta=cr("forwardChannelMaxRetries",2,g),this.va=cr("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Fl(g&&g.concurrentRequestLimit),this.Ba=new ps,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=gs.prototype,t.ka=8,t.I=1,t.connect=function(g,A,C,V){$t(0),this.W=g,this.H=A||{},C&&V!==void 0&&(this.H.OSID=C,this.H.OAID=V),this.F=this.X,this.J=nf(this,null,this.W),fr(this)};function Xl(g){if(ha(g),g.I==3){var A=g.V++,C=Qt(g.J);if(pt(C,"SID",g.M),pt(C,"RID",A),pt(C,"TYPE","terminate"),So(g,C),A=new Pi(g,g.j,A),A.M=2,A.A=go(Qt(C)),C=!1,l.navigator&&l.navigator.sendBeacon)try{C=l.navigator.sendBeacon(A.A.toString(),"")}catch{}!C&&l.Image&&(new Image().src=A.A,C=!0),C||(A.g=rf(A.j,null),A.g.ea(A.A)),A.F=Date.now(),nr(A)}tf(g)}function ys(g){g.g&&(Zl(g),g.g.cancel(),g.g=null)}function ha(g){ys(g),g.v&&(l.clearTimeout(g.v),g.v=null),ma(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&l.clearTimeout(g.m),g.m=null)}function fr(g){if(!zl(g.h)&&!g.m){g.m=!0;var A=g.Ea;ne||P(),Y||(ne(),Y=!0),R.add(A,g),g.D=0}}function pa(g,A){return sr(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=A.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Zi(f(g.Ea,g,A),ef(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const Q=new Pi(this,this.j,g);let ie=this.o;if(this.U&&(ie?(ie=G(ie),M(ie,this.U)):ie=this.U),this.u!==null||this.R||(Q.J=ie,ie=null),this.S)e:{for(var A=0,C=0;C<this.i.length;C++){t:{var V=this.i[C];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(A+=V,A>4096){A=C;break e}if(A===4096||C===this.i.length-1){A=C+1;break e}}A=1e3}else A=1e3;A=Qc(this,Q,A),C=Qt(this.J),pt(C,"RID",g),pt(C,"CVER",22),this.G&&pt(C,"X-HTTP-Session-Id",this.G),So(this,C),ie&&(this.R?A="headers="+Rr(vi(ie))+"&"+A:this.u&&vo(C,this.u,ie)),ql(this.h,Q),this.Ra&&pt(C,"TYPE","init"),this.S?(pt(C,"$req",A),pt(C,"SID","null"),Q.U=!0,tr(Q,C,null)):tr(Q,C,A),this.I=2}}else this.I==3&&(g?Wl(this,g):this.i.length==0||zl(this.h)||Wl(this))};function Wl(g,A){var C;A?C=A.l:C=g.V++;const V=Qt(g.J);pt(V,"SID",g.M),pt(V,"RID",C),pt(V,"AID",g.K),So(g,V),g.u&&g.o&&vo(V,g.u,g.o),C=new Pi(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),A&&(g.i=A.G.concat(g.i)),A=Qc(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),ql(g.h,C),tr(C,V,A)}function So(g,A){g.H&&Ie(g.H,function(C,V){pt(A,V,C)}),g.l&&Ie({},function(C,V){pt(A,V,C)})}function Qc(g,A,C){C=Math.min(g.i.length,C);const V=g.l?f(g.l.Ka,g.l,g):null;e:{var Q=g.i;let qe=-1;for(;;){const Ht=["count="+C];qe==-1?C>0?(qe=Q[0].g,Ht.push("ofs="+qe)):qe=0:Ht.push("ofs="+qe);let dt=!0;for(let kt=0;kt<C;kt++){var ie=Q[kt].g;const Ti=Q[kt].map;if(ie-=qe,ie<0)qe=Math.max(0,Q[kt].g-100),dt=!1;else try{ie="req"+ie+"_"||"";try{var ve=Ti instanceof Map?Ti:Object.entries(Ti);for(const[hr,Fi]of ve){let zi=Fi;c(Fi)&&(zi=De(Fi)),Ht.push(ie+hr+"="+encodeURIComponent(zi))}}catch(hr){throw Ht.push(ie+"type="+encodeURIComponent("_badmap")),hr}}catch{V&&V(Ti)}}if(dt){ve=Ht.join("&");break e}}ve=void 0}return g=g.i.splice(0,C),A.G=g,ve}function Xc(g){if(!g.g&&!g.v){g.Y=1;var A=g.Da;ne||P(),Y||(ne(),Y=!0),R.add(A,g),g.A=0}}function wo(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Zi(f(g.Da,g),ef(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,Wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Zi(f(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),ys(this),Wc(this))};function Zl(g){g.B!=null&&(l.clearTimeout(g.B),g.B=null)}function Wc(g){g.g=new Pi(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var A=Qt(g.na);pt(A,"RID","rpc"),pt(A,"SID",g.M),pt(A,"AID",g.K),pt(A,"CI",g.F?"0":"1"),!g.F&&g.ia&&pt(A,"TO",g.ia),pt(A,"TYPE","xmlhttp"),So(g,A),g.u&&g.o&&vo(A,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=go(Qt(A)),C.u=null,C.R=!0,oa(C,g)}t.Va=function(){this.C!=null&&(this.C=null,ys(this),wo(this),$t(19))};function ma(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function Zc(g,A){var C=null;if(g.g==A){ma(g),Zl(g),g.g=null;var V=2}else if(or(g.h,A))C=A.G,Bl(g.h,A),V=1;else return;if(g.I!=0){if(A.o)if(V==1){C=A.u?A.u.length:0,A=Date.now()-A.F;var Q=g.D;V=bn(),rt(V,new Wi(V,C)),fr(g)}else Xc(g);else if(Q=A.m,Q==3||Q==0&&A.X>0||!(V==1&&pa(g,A)||V==2&&wo(g)))switch(C&&C.length>0&&(A=g.h,A.i=A.i.concat(C)),Q){case 1:dr(g,5);break;case 4:dr(g,10);break;case 3:dr(g,6);break;default:dr(g,2)}}}function ef(g,A){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*A}function dr(g,A){if(g.j.info("Error code "+A),A==2){var C=f(g.bb,g),V=g.Ua;const Q=!V;V=new ti(V||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||dn(V,"https"),go(V),Q?Vi(V.toString(),C):Jl(V.toString(),C)}else $t(2);g.I=0,g.l&&g.l.pa(A),tf(g),ha(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function tf(g){if(g.I=0,g.ja=[],g.l){const A=Hl(g.h);(A.length!=0||g.i.length!=0)&&(b(g.ja,A),b(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function nf(g,A,C){var V=C instanceof ti?Qt(C):new ti(C);if(V.g!="")A&&(V.g=A+"."+V.g),cs(V,V.u);else{var Q=l.location;V=Q.protocol,A=A?A+"."+Q.hostname:Q.hostname,Q=+Q.port;const ie=new ti(null);V&&dn(ie,V),A&&(ie.g=A),Q&&cs(ie,Q),C&&(ie.h=C),V=ie}return C=g.G,A=g.wa,C&&A&&pt(V,C,A),pt(V,"VER",g.ka),So(g,V),V}function rf(g,A,C){if(A&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Aa&&!g.ma?new _t(new lr({ab:C})):new _t(g.ma),A.Fa(g.L),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sf(){}t=sf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _s(){}_s.prototype.g=function(g,A){return new Ln(g,A)};function Ln(g,A){je.call(this),this.g=new gs(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(g?g["X-WebChannel-Client-Profile"]=A.sa:g={"X-WebChannel-Client-Profile":A.sa}),this.g.U=g,(g=A&&A.Qb)&&!k(g)&&(this.g.u=g),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!k(A)&&(this.g.G=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new Mr(this)}y(Ln,je),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){Xl(this.g)},Ln.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=De(g),g=C);A.i.push(new Kt(A.Ya++,g)),A.I==3&&fr(A)},Ln.prototype.N=function(){this.g.l=null,delete this.j,Xl(this.g),delete this.g,Ln.Z.N.call(this)};function of(g){Pt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const C in A){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}y(of,Pt);function af(){cn.call(this),this.status=1}y(af,cn);function Mr(g){this.g=g}y(Mr,sf),Mr.prototype.ra=function(){rt(this.g,"a")},Mr.prototype.qa=function(g){rt(this.g,new of(g))},Mr.prototype.pa=function(g){rt(this.g,new af)},Mr.prototype.oa=function(){rt(this.g,"b")},_s.prototype.createWebChannel=_s.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,dC=function(){return new _s},fC=function(){return bn()},cC=tt,Mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},po.NO_ERROR=0,po.TIMEOUT=8,po.HTTP_ERROR=6,Cd=po,Ul.COMPLETE="complete",uC=Ul,gi.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",je.prototype.listen=je.prototype.J,ju=gi,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,lC=_t}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});const tS="@firebase/firestore",nS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new _y("@firebase/firestore");function Ka(){return Qo.logLevel}function we(t,...e){if(Qo.logLevel<=We.DEBUG){const n=e.map(ky);Qo.debug(`Firestore (${Al}): ${t}`,...n)}}function es(t,...e){if(Qo.logLevel<=We.ERROR){const n=e.map(ky);Qo.error(`Firestore (${Al}): ${t}`,...n)}}function fl(t,...e){if(Qo.logLevel<=We.WARN){const n=e.map(ky);Qo.warn(`Firestore (${Al}): ${t}`,...n)}}function ky(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,hC(t,i,n)}function hC(t,e,n){let i=`FIRESTORE (${Al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw es(i),new Error(i)}function at(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||hC(e,s,i)}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nn.UNAUTHENTICATED)))}shutdown(){}}class TD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class ED{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let a=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Er,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},c=h=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Er)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(at(typeof i.accessToken=="string",31837,{l:i}),new pC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class SD{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wD{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new SD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const i=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,we("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iS(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=xD(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function Ze(t,e){return t<e?-1:t>e?1:0}function Dg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),a=e.charAt(i);if(s!==a)return Zm(s)===Zm(a)?Ze(s,a):Zm(s)?1:-1}return Ze(t.length,e.length)}const CD=55296,bD=57343;function Zm(t){const e=t.charCodeAt(0);return e>=CD&&e<=bD}function dl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="__name__";class vr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return vr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=vr.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Ze(e.length,n.length)}static compareSegments(e,n){const i=vr.isNumericId(e),s=vr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?vr.extractNumericId(e).compare(vr.extractNumericId(n)):Dg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class St extends vr{construct(e,n,i){return new St(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new St(n)}static emptyPath(){return new St([])}}const ID=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends vr{construct(e,n,i){return new An(e,n,i)}static isValidIdentifier(e){return ID.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rS}static keyField(){return new An([rS])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(n)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(St.fromString(e))}static fromName(e){return new Ne(St.fromString(e).popFirst(5))}static empty(){return new Ne(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e,n){if(!n)throw new Ee(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RD(t,e,n,i){if(e===!0&&i===!0)throw new Ee(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sS(t){if(!Ne.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oS(t){if(Ne.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gh(t);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ND(t,e){if(e<=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ic(t,e){if(!gC(t))throw new Ee(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Ee(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=-62135596800,lS=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*lS);return new Rt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<aS)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lS}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ic(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:sn("string",Rt._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Rt(0,0))}static max(){return new Ve(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=-1;function kD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(i===1e9?new Rt(n+1,0):new Rt(n,i));return new to(s,Ne.empty(),e)}function MD(t){return new to(t.readTime,t.key,fc)}class to{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new to(Ve.min(),Ne.empty(),fc)}static max(){return new to(Ve.max(),Ne.empty(),fc)}}function DD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==PD)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.reject(n)}static resolve(e){return new pe(((n,i)=>{n(e)}))}static reject(e){return new pe(((n,i)=>{i(e)}))}static waitFor(e){return new pe(((n,i)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&n()}),(h=>i(h)))})),l=!0,a===s&&n()}))}static or(e){let n=pe.resolve(!1);for(const i of e)n=n.next((s=>s?pe.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,a)=>{i.push(n.call(this,s,a))})),this.waitFor(i)}static mapArray(e,n){return new pe(((i,s)=>{const a=e.length,l=new Array(a);let c=0;for(let h=0;h<a;h++){const f=h;n(e[f]).next((p=>{l[f]=p,++c,c===a&&i(l)}),(p=>s(p)))}}))}static doWhile(e,n){return new pe(((i,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):i()};a()}))}}function VD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=-1;function Rc(t){return t==null}function Hd(t){return t===0&&1/t==-1/0}function UD(t){return typeof t=="number"&&Number.isInteger(t)&&!Hd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="";function OD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uS(e)),e=FD(t.get(n),e);return uS(e)}function FD(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case yC:n+="";break;default:n+=a}}return n}function uS(t){return t+yC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _C(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.comparator=e,this.root=n||wn.EMPTY}insert(e,n){return new Vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??wn.RED,this.left=s??wn.EMPTY,this.right=a??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new wn(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fS(this.data.getIterator())}getIteratorFrom(e){return new fS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class fS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new di([])}unionWith(e){let n=new un(An.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new vC("Invalid base64 string: "+a):a}})(e);return new xn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const zD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(t){if(at(!!t,39018),typeof t=="string"){let e=0;const n=zD.exec(t);if(at(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Yt(t.seconds),nanos:Yt(t.nanos)}}function Yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function io(t){return typeof t=="string"?xn.fromBase64String(t):xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="server_timestamp",EC="__type__",SC="__previous_value__",wC="__local_write_time__";function Py(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[EC])==null?void 0:i.stringValue)===TC}function _h(t){const e=t.mapValue.fields[SC];return Py(e)?_h(e):e}function dc(t){const e=no(t.mapValue.fields[wC].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n,i,s,a,l,c,h,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}}const Gd="(default)";class hc{constructor(e,n){this.projectId=e,this.database=n||Gd}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===Gd}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="__type__",BD="__max__",pd={mapValue:{}},xC="__vector__",jd="value";function ro(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Py(t)?4:GD(t)?9007199254740991:HD(t)?10:11:Me(28295,{value:t})}function xr(t,e){if(t===e)return!0;const n=ro(t);if(n!==ro(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dc(t).isEqual(dc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=no(s.timestampValue),c=no(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return io(s.bytesValue).isEqual(io(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return Yt(s.geoPointValue.latitude)===Yt(a.geoPointValue.latitude)&&Yt(s.geoPointValue.longitude)===Yt(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Yt(s.integerValue)===Yt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Yt(s.doubleValue),c=Yt(a.doubleValue);return l===c?Hd(l)===Hd(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(cS(l)!==cS(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!xr(l[h],c[h])))return!1;return!0})(t,e);default:return Me(52216,{left:t})}}function pc(t,e){return(t.values||[]).find((n=>xr(n,e)))!==void 0}function hl(t,e){if(t===e)return 0;const n=ro(t),i=ro(e);if(n!==i)return Ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=Yt(a.integerValue||a.doubleValue),h=Yt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(t,e);case 3:return dS(t.timestampValue,e.timestampValue);case 4:return dS(dc(t),dc(e));case 5:return Dg(t.stringValue,e.stringValue);case 6:return(function(a,l){const c=io(a),h=io(l);return c.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const p=Ze(c[f],h[f]);if(p!==0)return p}return Ze(c.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Ze(Yt(a.latitude),Yt(l.latitude));return c!==0?c:Ze(Yt(a.longitude),Yt(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return hS(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var E,w,b,L;const c=a.fields||{},h=l.fields||{},f=(E=c[jd])==null?void 0:E.arrayValue,p=(w=h[jd])==null?void 0:w.arrayValue,y=Ze(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((L=p==null?void 0:p.values)==null?void 0:L.length)||0);return y!==0?y:hS(f,p)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===pd.mapValue&&l===pd.mapValue)return 0;if(a===pd.mapValue)return 1;if(l===pd.mapValue)return-1;const c=a.fields||{},h=Object.keys(c),f=l.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let y=0;y<h.length&&y<p.length;++y){const E=Dg(h[y],p[y]);if(E!==0)return E;const w=hl(c[h[y]],f[p[y]]);if(w!==0)return w}return Ze(h.length,p.length)})(t.mapValue,e.mapValue);default:throw Me(23264,{he:n})}}function dS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=no(t),i=no(e),s=Ze(n.seconds,i.seconds);return s!==0?s:Ze(n.nanos,i.nanos)}function hS(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=hl(n[s],i[s]);if(a)return a}return Ze(n.length,i.length)}function pl(t){return Pg(t)}function Pg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=no(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return io(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=Pg(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${Pg(n.fields[l])}`;return s+"}"})(t.mapValue):Me(61005,{value:t})}function bd(t){switch(ro(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_h(t);return e?16+bd(e):16;case 5:return 2*t.stringValue.length;case 6:return io(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+bd(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return ao(i.fields,((a,l)=>{s+=a.length+bd(l)})),s})(t.mapValue);default:throw Me(13486,{value:t})}}function pS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lg(t){return!!t&&"integerValue"in t}function Ly(t){return!!t&&"arrayValue"in t}function mS(t){return!!t&&"nullValue"in t}function gS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Id(t){return!!t&&"mapValue"in t}function HD(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[AC])==null?void 0:i.stringValue)===xC}function Qu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ao(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Qu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qu(t.arrayValue.values[n]);return e}return{...t}}function GD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Id(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(n)}setAll(e){let n=An.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,i,s),i={},s=[],n=c.popLast()}l?i[c.lastSegment()]=Qu(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());Id(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Id(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){ao(n,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new Un(Qu(this.value))}}function CC(t){const e=[];return ao(t.fields,((n,i)=>{const s=new An([n]);if(Id(i)){const a=CC(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,i,s,a,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new mn(e,0,Ve.min(),Ve.min(),Ve.min(),Un.empty(),0)}static newFoundDocument(e,n,i,s){return new mn(e,1,n,Ve.min(),i,s,0)}static newNoDocument(e,n){return new mn(e,2,n,Ve.min(),Ve.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,Ve.min(),Ve.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.position=e,this.inclusive=n}}function yS(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(l.referenceValue),n.key):i=hl(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function _S(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n="asc"){this.field=e,this.dir=n}}function jD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{}class rn extends bC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new $D(e,n,i):n==="array-contains"?new QD(e,i):n==="in"?new XD(e,i):n==="not-in"?new WD(e,i):n==="array-contains-any"?new ZD(e,i):new rn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new JD(e,i):new KD(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hl(n,this.value)):n!==null&&ro(this.value)===ro(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ji extends bC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ji(e,n)}matches(e){return IC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IC(t){return t.op==="and"}function RC(t){return YD(t)&&IC(t)}function YD(t){for(const e of t.filters)if(e instanceof Ji)return!1;return!0}function Vg(t){if(t instanceof rn)return t.field.canonicalString()+t.op.toString()+pl(t.value);if(RC(t))return t.filters.map((e=>Vg(e))).join(",");{const e=t.filters.map((n=>Vg(n))).join(",");return`${t.op}(${e})`}}function NC(t,e){return t instanceof rn?(function(i,s){return s instanceof rn&&i.op===s.op&&i.field.isEqual(s.field)&&xr(i.value,s.value)})(t,e):t instanceof Ji?(function(i,s){return s instanceof Ji&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,l,c)=>a&&NC(l,s.filters[c])),!0):!1})(t,e):void Me(19439)}function kC(t){return t instanceof rn?(function(n){return`${n.field.canonicalString()} ${n.op} ${pl(n.value)}`})(t):t instanceof Ji?(function(n){return n.op.toString()+" {"+n.getFilters().map(kC).join(" ,")+"}"})(t):"Filter"}class $D extends rn{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class JD extends rn{constructor(e,n){super(e,"in",n),this.keys=MC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class KD extends rn{constructor(e,n){super(e,"not-in",n),this.keys=MC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function MC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Ne.fromName(i.referenceValue)))}class QD extends rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ly(n)&&pc(n.arrayValue,this.value)}}class XD extends rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pc(this.value.arrayValue,n)}}class WD extends rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pc(this.value.arrayValue,n)}}class ZD extends rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ly(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>pc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n=null,i=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}}function vS(t,e=null,n=[],i=[],s=null,a=null,l=null){return new eP(t,e,n,i,s,a,l)}function Vy(t){const e=Oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Vg(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Rc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>pl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>pl(i))).join(",")),e.Te=n}return e.Te}function Uy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_S(t.startAt,e.startAt)&&_S(t.endAt,e.endAt)}function Ug(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n=null,i=[],s=[],a=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tP(t,e,n,i,s,a,l,c){return new bl(t,e,n,i,s,a,l,c)}function vh(t){return new bl(t)}function TS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DC(t){return t.collectionGroup!==null}function Xu(t){const e=Oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new un(An.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new mc(a,i))})),n.has(An.keyField().canonicalString())||e.Ie.push(new mc(An.keyField(),i))}return e.Ie}function Sr(t){const e=Oe(t);return e.Ee||(e.Ee=nP(e,Xu(t))),e.Ee}function nP(t,e){if(t.limitType==="F")return vS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new mc(s.field,a)}));const n=t.endAt?new Yd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Yd(t.startAt.position,t.startAt.inclusive):null;return vS(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Og(t,e){const n=t.filters.concat([e]);return new bl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $d(t,e,n){return new bl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Th(t,e){return Uy(Sr(t),Sr(e))&&t.limitType===e.limitType}function PC(t){return`${Vy(Sr(t))}|lt:${t.limitType}`}function Qa(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>kC(s))).join(", ")}]`),Rc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>pl(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>pl(s))).join(",")),`Target(${i})`})(Sr(t))}; limitType=${t.limitType})`}function Eh(t,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,s){for(const a of Xu(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,h){const f=yS(l,c,h);return l.inclusive?f<=0:f<0})(i.startAt,Xu(i),s)||i.endAt&&!(function(l,c,h){const f=yS(l,c,h);return l.inclusive?f>=0:f>0})(i.endAt,Xu(i),s))})(t,e)}function iP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LC(t){return(e,n)=>{let i=!1;for(const s of Xu(t)){const a=rP(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function rP(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(a,l,c){const h=l.data.field(a),f=c.data.field(a);return h!==null&&f!==null?hl(h,f):Me(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,((n,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return _C(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new Vt(Ne.comparator);function ts(){return sP}const VC=new Vt(Ne.comparator);function Yu(...t){let e=VC;for(const n of t)e=e.insert(n.key,n);return e}function UC(t){let e=VC;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Ho(){return Wu()}function OC(){return Wu()}function Wu(){return new ta((t=>t.toString()),((t,e)=>t.isEqual(e)))}const oP=new Vt(Ne.comparator),aP=new un(Ne.comparator);function et(...t){let e=aP;for(const n of t)e=e.add(n);return e}const lP=new un(Ze);function uP(){return lP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hd(e)?"-0":e}}function FC(t){return{integerValue:""+t}}function zC(t,e){return UD(e)?FC(e):Oy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function cP(t,e,n){return t instanceof gc?(function(s,a){const l={fields:{[EC]:{stringValue:TC},[wC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Py(a)&&(a=_h(a)),a&&(l.fields[SC]=a),{mapValue:l}})(n,e):t instanceof yc?BC(t,e):t instanceof _c?HC(t,e):(function(s,a){const l=qC(s,a),c=ES(l)+ES(s.Ae);return Lg(l)&&Lg(s.Ae)?FC(c):Oy(s.serializer,c)})(t,e)}function fP(t,e,n){return t instanceof yc?BC(t,e):t instanceof _c?HC(t,e):n}function qC(t,e){return t instanceof vc?(function(i){return Lg(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class gc extends Sh{}class yc extends Sh{constructor(e){super(),this.elements=e}}function BC(t,e){const n=GC(e);for(const i of t.elements)n.some((s=>xr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class _c extends Sh{constructor(e){super(),this.elements=e}}function HC(t,e){let n=GC(e);for(const i of t.elements)n=n.filter((s=>!xr(s,i)));return{arrayValue:{values:n}}}class vc extends Sh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ES(t){return Yt(t.integerValue||t.doubleValue)}function GC(t){return Ly(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.field=e,this.transform=n}}function dP(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof yc&&s instanceof yc||i instanceof _c&&s instanceof _c?dl(i.elements,s.elements,xr):i instanceof vc&&s instanceof vc?xr(i.Ae,s.Ae):i instanceof gc&&s instanceof gc})(t.transform,e.transform)}class hP{constructor(e,n){this.version=e,this.transformResults=n}}class ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wh{}function YC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ah(t.key,ln.none()):new Nc(t.key,t.data,ln.none());{const n=t.data,i=Un.empty();let s=new un(An.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new lo(t.key,i,new di(s.toArray()),ln.none())}}function pP(t,e,n){t instanceof Nc?(function(s,a,l){const c=s.value.clone(),h=wS(s.fieldTransforms,a,l.transformResults);c.setAll(h),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof lo?(function(s,a,l){if(!Rd(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=wS(s.fieldTransforms,a,l.transformResults),h=a.data;h.setAll($C(s)),h.setAll(c),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Zu(t,e,n,i){return t instanceof Nc?(function(a,l,c,h){if(!Rd(a.precondition,l))return c;const f=a.value.clone(),p=AS(a.fieldTransforms,h,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof lo?(function(a,l,c,h){if(!Rd(a.precondition,l))return c;const f=AS(a.fieldTransforms,h,l),p=l.data;return p.setAll($C(a)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((y=>y.field)))})(t,e,n,i):(function(a,l,c){return Rd(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function mP(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=qC(i.transform,s||null);a!=null&&(n===null&&(n=Un.empty()),n.set(i.field,a))}return n||null}function SS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&dl(i,s,((a,l)=>dP(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nc extends wh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class lo extends wh{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $C(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function wS(t,e,n){const i=new Map;at(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,c=e.data.field(a.field);i.set(a.field,fP(l,c,n[s]))}return i}function AS(t,e,n){const i=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);i.set(s.field,cP(a,l,e))}return i}class Ah extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JC extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&pP(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Zu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Zu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=OC();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=n.has(s.key)?null:c;const h=YC(l,c);h!==null&&i.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(Ve.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),et())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,((n,i)=>SS(n,i)))&&dl(this.baseMutations,e.baseMutations,((n,i)=>SS(n,i)))}}class Fy{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){at(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return oP})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new Fy(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,st;function KC(t){switch(t){case le.OK:return Me(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function QC(t){if(t===void 0)return es("GRPC error has no .code"),le.UNKNOWN;switch(t){case tn.OK:return le.OK;case tn.CANCELLED:return le.CANCELLED;case tn.UNKNOWN:return le.UNKNOWN;case tn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case tn.INTERNAL:return le.INTERNAL;case tn.UNAVAILABLE:return le.UNAVAILABLE;case tn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case tn.NOT_FOUND:return le.NOT_FOUND;case tn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case tn.ABORTED:return le.ABORTED;case tn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case tn.DATA_LOSS:return le.DATA_LOSS;default:return Me(39323,{code:t})}}(st=tn||(tn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=new Xs([4294967295,4294967295],0);function xS(t){const e=vP().encode(t),n=new aC;return n.update(e),new Uint8Array(n.digest())}function CS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Xs([n,i],0),new Xs([s,a],0)]}class zy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(i<0)throw new $u(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Xs.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Xs.fromNumber(i)));return s.compare(TP)===1&&(s=new Xs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=xS(e),[i,s]=CS(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new zy(a,s,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const n=xS(e),[i,s]=CS(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new xh(Ve.min(),s,new Vt(Ze),ts(),et())}}class kc{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new kc(i,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class XC{constructor(e,n){this.targetId=e,this.Ce=n}}class WC{constructor(e,n,i=xn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class bS{constructor(){this.ve=0,this.Fe=IS(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),n=et(),i=et();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Me(38017,{changeType:a})}})),new kc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=IS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EP{constructor(e){this.Ge=e,this.ze=new Map,this.je=ts(),this.Je=md(),this.He=md(),this.Ye=new Vt(Ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(Ug(a))if(i===0){const l=new Ne(a.path);this.et(n,l,mn.newNoDocument(l,Ve.min()))}else at(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let l,c;try{l=io(i).toUint8Array()}catch(h){if(h instanceof vC)return fl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new zy(l,s,a)}catch(h){return fl(h instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach((a=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((a,l)=>{const c=this.ot(l);if(c){if(a.current&&Ug(c.target)){const h=new Ne(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,mn.newNoDocument(h,e))}a.Be&&(n.set(l,a.ke()),a.qe())}}));let i=et();this.He.forEach(((a,l)=>{let c=!0;l.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new xh(e,n,this.Ye,this.je,i);return this.je=ts(),this.Je=md(),this.He=md(),this.Ye=new Vt(Ze),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new bS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new un(Ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new un(Ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bS),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function md(){return new Vt(Ne.comparator)}function IS(){return new Vt(Ne.comparator)}const SP={asc:"ASCENDING",desc:"DESCENDING"},wP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AP={and:"AND",or:"OR"};class xP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fg(t,e){return t.useProto3Json||Rc(e)?e:{value:e}}function Jd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CP(t,e){return Jd(t,e.toTimestamp())}function hi(t){return at(!!t,49232),Ve.fromTimestamp((function(n){const i=no(n);return new Rt(i.seconds,i.nanos)})(t))}function qy(t,e){return zg(t,e).canonicalString()}function zg(t,e){const n=(function(s){return new St(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function eb(t){const e=St.fromString(t);return at(ob(e),10190,{key:e.toString()}),e}function Kd(t,e){return qy(t.databaseId,e.path)}function ec(t,e){const n=eb(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(nb(n))}function tb(t,e){return qy(t.databaseId,e)}function bP(t){const e=eb(t);return e.length===4?St.emptyPath():nb(e)}function qg(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nb(t){return at(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function RS(t,e,n){return{name:Kd(t,e),fields:n.value.mapValue.fields}}function IP(t,e){return"found"in e?(function(i,s){at(!!s.found,43571),s.found.name,s.found.updateTime;const a=ec(i,s.found.name),l=hi(s.found.updateTime),c=s.found.createTime?hi(s.found.createTime):Ve.min(),h=new Un({mapValue:{fields:s.found.fields}});return mn.newFoundDocument(a,l,c,h)})(t,e):"missing"in e?(function(i,s){at(!!s.missing,3894),at(!!s.readTime,22933);const a=ec(i,s.missing),l=hi(s.readTime);return mn.newNoDocument(a,l)})(t,e):Me(7234,{result:e})}function RP(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Me(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(f,p){return f.useProto3Json?(at(p===void 0||typeof p=="string",58123),xn.fromBase64String(p||"")):(at(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),xn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const p=f.code===void 0?le.UNKNOWN:QC(f.code);return new Ee(p,f.message||"")})(l);n=new WC(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=ec(t,i.document.name),a=hi(i.document.updateTime),l=i.document.createTime?hi(i.document.createTime):Ve.min(),c=new Un({mapValue:{fields:i.document.fields}}),h=mn.newFoundDocument(s,a,l,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new Nd(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=ec(t,i.document),a=i.readTime?hi(i.readTime):Ve.min(),l=mn.newNoDocument(s,a),c=i.removedTargetIds||[];n=new Nd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=ec(t,i.document),a=i.removedTargetIds||[];n=new Nd([],a,s,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new _P(s,a),c=i.targetId;n=new XC(c,l)}}return n}function ib(t,e){let n;if(e instanceof Nc)n={update:RS(t,e.key,e.value)};else if(e instanceof Ah)n={delete:Kd(t,e.key)};else if(e instanceof lo)n={update:RS(t,e.key,e.data),updateMask:OP(e.fieldMask)};else{if(!(e instanceof JC))return Me(16599,{Vt:e.type});n={verify:Kd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof gc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof yc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _c)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof vc)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Me(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:CP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Me(27497)})(t,e.precondition)),n}function NP(t,e){return t&&t.length>0?(at(e!==void 0,14353),t.map((n=>(function(s,a){let l=s.updateTime?hi(s.updateTime):hi(a);return l.isEqual(Ve.min())&&(l=hi(a)),new hP(l,s.transformResults||[])})(n,e)))):[]}function kP(t,e){return{documents:[tb(t,e.path)]}}function MP(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=tb(t,s);const a=(function(f){if(f.length!==0)return sb(Ji.create(f,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(f){if(f.length!==0)return f.map((p=>(function(E){return{field:Xa(E.field),direction:LP(E.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=Fg(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:s}}function DP(t){let e=bP(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){at(i===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=(function(y){const E=rb(y);return E instanceof Ji&&RC(E)?E.getFilters():[E]})(n.where));let l=[];n.orderBy&&(l=(function(y){return y.map((E=>(function(b){return new mc(Wa(b.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(E)))})(n.orderBy));let c=null;n.limit&&(c=(function(y){let E;return E=typeof y=="object"?y.value:y,Rc(E)?null:E})(n.limit));let h=null;n.startAt&&(h=(function(y){const E=!!y.before,w=y.values||[];return new Yd(w,E)})(n.startAt));let f=null;return n.endAt&&(f=(function(y){const E=!y.before,w=y.values||[];return new Yd(w,E)})(n.endAt)),tP(e,s,l,a,c,"F",h,f)}function PP(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rb(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Wa(n.unaryFilter.field);return rn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Wa(n.unaryFilter.field);return rn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Wa(n.unaryFilter.field);return rn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Wa(n.unaryFilter.field);return rn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(t):t.fieldFilter!==void 0?(function(n){return rn.create(Wa(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ji.create(n.compositeFilter.filters.map((i=>rb(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(n.compositeFilter.op))})(t):Me(30097,{filter:t})}function LP(t){return SP[t]}function VP(t){return wP[t]}function UP(t){return AP[t]}function Xa(t){return{fieldPath:t.canonicalString()}}function Wa(t){return An.fromServerFormat(t.fieldPath)}function sb(t){return t instanceof rn?(function(n){if(n.op==="=="){if(gS(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NAN"}};if(mS(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gS(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NAN"}};if(mS(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(n.field),op:VP(n.op),value:n.value}}})(t):t instanceof Ji?(function(n){const i=n.getFilters().map((s=>sb(s)));return i.length===1?i[0]:{compositeFilter:{op:UP(n.op),filters:i}}})(t):Me(54877,{filter:t})}function OP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ob(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,i,s,a=Ve.min(),l=Ve.min(),c=xn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.yt=e}}function zP(t){const e=DP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.Cn=new BP}addToCollectionParentIndex(e,n){return this.Cn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(to.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(to.min())}updateCollectionGroup(e,n,i){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class BP{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new un(St.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new un(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ab=41943040;class Wn{static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(ab,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ml(0)}static cr(){return new ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="LruGarbageCollector",HP=1048576;function MS([t,e],[n,i]){const s=Ze(t,n);return s===0?Ze(e,i):s}class GP{constructor(e){this.Ir=e,this.buffer=new un(MS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();MS(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jP{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(kS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cl(n)?we(kS,"Ignoring IndexedDB error during garbage collection: ",n):await xl(n)}await this.Vr(3e5)}))}}class YP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(yh.ce);const i=new GP(n);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(NS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NS):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,a,l,c,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(i=y,c=Date.now(),this.removeTargets(e,i,n)))).next((y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((y=>(f=Date.now(),Ka()<=We.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y}))))}}function $P(t,e){return new YP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.changes=new ta((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?pe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&Zu(i.mutation,s,di.empty(),Rt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,et()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=et()){const s=Ho();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((a=>{let l=Yu();return a.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=Ho();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,et())))}populateOverlays(e,n,i){const s=[];return i.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,s){let a=ts();const l=Wu(),c=(function(){return Wu()})();return n.forEach(((h,f)=>{const p=i.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof lo)?a=a.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),Zu(p.mutation,f,p.mutation.getFieldMask(),Rt.now())):l.set(f.key,di.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((f,p)=>l.set(f,p))),n.forEach(((f,p)=>c.set(f,new KP(p,l.get(f)??null)))),c)))}recalculateAndSaveOverlays(e,n){const i=Wu();let s=new Vt(((l,c)=>l-c)),a=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let p=i.get(h)||di.empty();p=c.applyToLocalView(f,p),i.set(h,p);const y=(s.get(c.batchId)||et()).add(h);s=s.insert(c.batchId,y)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,p=h.value,y=OC();p.forEach((E=>{if(!a.has(E)){const w=YC(n.get(E),i.get(E));w!==null&&y.set(E,w),a=a.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return pe.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):pe.resolve(Ho());let c=fc,h=a;return l.next((f=>pe.forEach(f,((p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),a.get(p)?pe.resolve():this.remoteDocumentCache.getEntry(e,p).next((E=>{h=h.insert(p,E)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,h,f,et()))).next((p=>({batchId:c,changes:UC(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((i=>{let s=Yu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let l=Yu();return this.indexManager.getCollectionParents(e,a).next((c=>pe.forEach(c,(h=>{const f=(function(y,E){return new bl(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((p=>{p.forEach(((y,E)=>{l=l.insert(y,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s)))).next((l=>{a.forEach(((h,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,mn.newInvalidDocument(p)))}));let c=Yu();return l.forEach(((h,f)=>{const p=a.get(h);p!==void 0&&Zu(p.mutation,f,di.empty(),Rt.now()),Eh(n,f)&&(c=c.insert(h,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return pe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:hi(s.createTime)}})(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:zP(s.bundledQuery),readTime:hi(s.readTime)}})(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.overlays=new Vt(Ne.comparator),this.qr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ho();return pe.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,a)=>{this.St(e,n,a)})),pe.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),pe.resolve()}getOverlaysForCollection(e,n,i){const s=Ho(),a=n.length+1,l=new Ne(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>i&&s.set(h.getKey(),h)}return pe.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new Vt(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=a.get(f.largestBatchId);p===null&&(p=Ho(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=Ho(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>c.set(f,p))),!(c.size()>=s)););return pe.resolve(c)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new yP(n,i));let a=this.qr.get(n);a===void 0&&(a=et(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.Qr=new un(pn.$r),this.Ur=new un(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new pn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new pn(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Ne(new St([])),i=new pn(n,e),s=new pn(n,e+1),a=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ne(new St([])),i=new pn(n,e),s=new pn(n,e+1);let a=et();return this.Ur.forEachInRange([i,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new pn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class pn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ne.comparator(e.key,n.key)||Ze(e.Yr,n.Yr)}static Kr(e,n){return Ze(e.Yr,n.Yr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new un(pn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new gP(a,n,i,s);this.mutationQueue.push(l);for(const c of s)this.Zr=this.Zr.add(new pn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return pe.resolve(l)}lookupMutationBatch(e,n){return pe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),a=s<0?0:s;return pe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Dy:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new pn(n,0),s=new pn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],(l=>{const c=this.Xr(l.Yr);a.push(c)})),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new un(Ze);return n.forEach((s=>{const a=new pn(s,0),l=new pn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(c=>{i=i.add(c.Yr)}))})),pe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const l=new pn(new Ne(a),0);let c=new un(Ze);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(c=c.add(h.Yr)),!0)}),l),pe.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){at(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return pe.forEach(n.mutations,(s=>{const a=new pn(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new pn(n,0),s=this.Zr.firstAfterOrEqual(i);return pe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.ri=e,this.docs=(function(){return new Vt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return pe.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let i=ts();return n.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():mn.newInvalidDocument(s))})),pe.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=ts();const l=n.path,c=new Ne(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||DD(MD(p),i)<=0||(s.has(p.key)||Eh(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return pe.resolve(a)}getAllFromCollectionGroup(e,n,i,s){Me(9500)}ii(e,n){return pe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new nL(this)}getSize(e){return pe.resolve(this.size)}}class nL extends JP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),pe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.persistence=e,this.si=new ta((n=>Vy(n)),Uy),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new By,this.targetCount=0,this.ai=ml.ur()}forEachTarget(e,n){return this.si.forEach(((i,s)=>n(s))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),pe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ml(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Pr(n),pe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),pe.waitFor(a).next((()=>s))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return pe.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),pe.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),pe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return pe.resolve(i)}containsKey(e,n){return pe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.ui={},this.overlays={},this.ci=new yh(0),this.li=!1,this.li=!0,this.hi=new ZP,this.referenceDelegate=e(this),this.Pi=new iL(this),this.indexManager=new qP,this.remoteDocumentCache=(function(s){return new tL(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new FP(n),this.Ii=new XP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new eL(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const s=new rL(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,n){return pe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class rL extends LD{constructor(e){super(),this.currentSequenceNumber=e}}class Hy{constructor(e){this.persistence=e,this.Ri=new By,this.Vi=null}static mi(e){return new Hy(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),pe.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(i=>{const s=Ne.fromPath(i);return this.gi(e,s).next((a=>{a||n.removeEntry(s,Ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return pe.or([()=>pe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Qd{constructor(e,n){this.persistence=e,this.pi=new ta((i=>OD(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=$P(this,n)}static mi(e,n){return new Qd(e,n)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return pe.forEach(this.pi,((i,s)=>this.br(e,i,s).next((a=>a?pe.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,n).next((c=>{c||(i++,a.removeEntry(l,Ve.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bd(e.data.value)),n}br(e,n,i){return pe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return pe.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=et(),s=et();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Gy(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PN()?8:VD(Dn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ys(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,n,s,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new sL;return this.Ss(e,n,l).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,l,c.size)}))})).next((()=>a.result))}bs(e,n,i,s){return i.documentReadCount<this.fs?(Ka()<=We.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(Ka()<=We.DEBUG&&we("QueryEngine","Query:",Qa(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Ka()<=We.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(n))):pe.resolve())}ys(e,n){if(TS(n))return pe.resolve(null);let i=Sr(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=$d(n,null,"F"),i=Sr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=et(...a);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.Ds(n,c);return this.Cs(n,f,l,h.readTime)?this.ys(e,$d(n,null,"F")):this.vs(e,f,n,h)}))))})))))}ws(e,n,i,s){return TS(n)||s.isEqual(Ve.min())?pe.resolve(null):this.ps.getDocuments(e,i).next((a=>{const l=this.Ds(n,a);return this.Cs(n,l,i,s)?pe.resolve(null):(Ka()<=We.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qa(n)),this.vs(e,l,n,kD(s,fc)).next((c=>c)))}))}Ds(e,n){let i=new un(LC(e));return n.forEach(((s,a)=>{Eh(e,a)&&(i=i.add(a))})),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,i){return Ka()<=We.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.ps.getDocumentsMatchingQuery(e,n,to.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="LocalStore",aL=3e8;class lL{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Vt(Ze),this.xs=new ta((a=>Vy(a)),Uy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function uL(t,e,n,i){return new lL(t,e,n,i)}async function ub(t,e){const n=Oe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let h=et();for(const f of s){l.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of a){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(i,h).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function cL(t,e){const n=Oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,h,f,p){const y=f.batch,E=y.keys();let w=pe.resolve();return E.forEach((b=>{w=w.next((()=>p.getEntry(h,b))).next((L=>{const F=f.docVersions.get(b);at(F!==null,48541),L.version.compareTo(F)<0&&(y.applyToRemoteDocument(L,f),L.isValidDocument()&&(L.setReadTime(f.commitVersion),p.addEntry(L)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(h,y)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let h=et();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function cb(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function fL(t,e){const n=Oe(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((p,y)=>{const E=s.get(y);if(!E)return;c.push(n.Pi.removeMatchingKeys(a,p.removedDocuments,y).next((()=>n.Pi.addMatchingKeys(a,p.addedDocuments,y))));let w=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(xn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,i)),s=s.insert(y,w),(function(L,F,O){return L.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=aL?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(E,w,p)&&c.push(n.Pi.updateTargetData(a,w))}));let h=ts(),f=et();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))})),c.push(dL(a,l,e.documentUpdates).next((p=>{h=p.ks,f=p.qs}))),!i.isEqual(Ve.min())){const p=n.Pi.getLastRemoteSnapshotVersion(a).next((y=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(p)}return pe.waitFor(c).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,h,f))).next((()=>h))})).then((a=>(n.Ms=s,a)))}function dL(t,e,n){let i=et(),s=et();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let l=ts();return n.forEach(((c,h)=>{const f=a.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(Ve.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):we(jy,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)})),{ks:l,qs:s}}))}function hL(t,e){const n=Oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Dy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function pL(t,e){const n=Oe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.Pi.getTargetData(i,e).next((a=>a?(s=a,pe.resolve(s)):n.Pi.allocateTargetId(i).next((l=>(s=new Ys(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Bg(t,e,n){const i=Oe(t),s=i.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Cl(l))throw l;we(jy,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function DS(t,e,n){const i=Oe(t);let s=Ve.min(),a=et();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,p){const y=Oe(h),E=y.xs.get(p);return E!==void 0?pe.resolve(y.Ms.get(E)):y.Pi.getTargetData(f,p)})(i,l,Sr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,c.targetId).next((h=>{a=h}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,n?s:Ve.min(),n?a:et()))).next((c=>(mL(i,iP(e),c),{documents:c,Qs:a})))))}function mL(t,e,n){let i=t.Os.get(e)||Ve.min();n.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.Os.set(e,i)}class PS{constructor(){this.activeTargetIds=uP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gL{constructor(){this.Mo=new PS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new PS,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="ConnectivityMonitor";class VS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(LS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(LS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd=null;function Hg(){return gd===null?gd=(function(){return 268435456+Math.round(2147483648*Math.random())})():gd++,"0x"+gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="RestConnection",_L={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Gd?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,a){const l=Hg(),c=this.zo(e,n.toUriEncodedString());we(eg,`Sending RPC '${e}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,a);const{host:f}=new URL(c),p=El(f);return this.Jo(e,c,h,i,p).then((y=>(we(eg,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw fl(eg,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",i),y}))}Ho(e,n,i,s,a,l){return this.Go(e,n,i,s,a)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}zo(e,n){const i=_L[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class EL extends vL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,a){const l=Hg();return new Promise(((c,h)=>{const f=new lC;f.setWithCredentials(!0),f.listenOnce(uC.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Cd.NO_ERROR:const y=f.getResponseJson();we(Rn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Cd.TIMEOUT:we(Rn,`RPC '${e}' ${l} timed out`),h(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:const E=f.getStatus();if(we(Rn,`RPC '${e}' ${l} failed with status:`,E,"response text:",f.getResponseText()),E>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const L=(function(O){const H=O.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(H)>=0?H:le.UNKNOWN})(b.status);h(new Ee(L,b.message))}else h(new Ee(le.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{we(Rn,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(s);we(Rn,`RPC '${e}' ${l} sending request:`,s),f.send(n,"POST",p,i,15)}))}T_(e,n,i){const s=Hg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=dC(),c=fC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const p=a.join("");we(Rn,`Creating RPC '${e}' stream ${s}: ${p}`,h);const y=l.createWebChannel(p,h);this.I_(y);let E=!1,w=!1;const b=new TL({Yo:F=>{w?we(Rn,`Not sending because RPC '${e}' stream ${s} is closed:`,F):(E||(we(Rn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),E=!0),we(Rn,`RPC '${e}' stream ${s} sending:`,F),y.send(F))},Zo:()=>y.close()}),L=(F,O,H)=>{F.listen(O,(B=>{try{H(B)}catch(X){setTimeout((()=>{throw X}),0)}}))};return L(y,ju.EventType.OPEN,(()=>{w||(we(Rn,`RPC '${e}' stream ${s} transport opened.`),b.o_())})),L(y,ju.EventType.CLOSE,(()=>{w||(w=!0,we(Rn,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(y))})),L(y,ju.EventType.ERROR,(F=>{w||(w=!0,fl(Rn,`RPC '${e}' stream ${s} transport errored. Name:`,F.name,"Message:",F.message),b.a_(new Ee(le.UNAVAILABLE,"The operation could not be completed")))})),L(y,ju.EventType.MESSAGE,(F=>{var O;if(!w){const H=F.data[0];at(!!H,16349);const B=H,X=(B==null?void 0:B.error)||((O=B[0])==null?void 0:O.error);if(X){we(Rn,`RPC '${e}' stream ${s} received error:`,X);const ne=X.status;let Y=(function(D){const I=tn[D];if(I!==void 0)return QC(I)})(ne),R=X.message;Y===void 0&&(Y=le.INTERNAL,R="Unknown error status: "+ne+" with message "+X.message),w=!0,b.a_(new Ee(Y,R)),y.close()}else we(Rn,`RPC '${e}' stream ${s} received:`,H),b.u_(H)}})),L(c,cC.STAT_EVENT,(F=>{F.stat===Mg.PROXY?we(Rn,`RPC '${e}' stream ${s} detected buffering proxy`):F.stat===Mg.NOPROXY&&we(Rn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function tg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){return new xP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="PersistentStream";class fb{constructor(e,n,i,s,a,l,c,h){this.Mi=e,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yy(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(es(n.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===n&&this.G_(i,s)}),(i=>{e((()=>{const s=new Ee(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(US,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(we(US,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SL extends fb{constructor(e,n,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=RP(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ve.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ve.min():l.readTime?hi(l.readTime):Ve.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=qg(this.serializer),n.addTarget=(function(a,l){let c;const h=l.target;if(c=Ug(h)?{documents:kP(a,h)}:{query:MP(a,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=ZC(a,l.resumeToken);const f=Fg(a,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ve.min())>0){c.readTime=Jd(a,l.snapshotVersion.toTimestamp());const f=Fg(a,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=PP(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=qg(this.serializer),n.removeTarget=e,this.q_(n)}}class wL extends fb{constructor(e,n,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=NP(e.writeResults,e.commitTime),i=hi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=qg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>ib(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{}class xL extends AL{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,zg(n,i),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(le.UNKNOWN,a.toString())}))}Ho(e,n,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,zg(n,i),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(le.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(n),this.aa=!1):we("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="RemoteStore";class bL{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{na(this)&&(we(Xo,"Restarting streams for network reachability change."),await(async function(h){const f=Oe(h);f.Ea.add(4),await Mc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await bh(f)})(this))}))})),this.Ra=new CL(i,s)}}async function bh(t){if(na(t))for(const e of t.da)await e(!0)}async function Mc(t){for(const e of t.da)await e(!1)}function db(t,e){const n=Oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qy(n)?Ky(n):Il(n).O_()&&Jy(n,e))}function $y(t,e){const n=Oe(t),i=Il(n);n.Ia.delete(e),i.O_()&&hb(n,e),n.Ia.size===0&&(i.O_()?i.L_():na(n)&&n.Ra.set("Unknown"))}function Jy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Il(t).Y_(e)}function hb(t,e){t.Va.Ue(e),Il(t).Z_(e)}function Ky(t){t.Va=new EP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Il(t).start(),t.Ra.ua()}function Qy(t){return na(t)&&!Il(t).x_()&&t.Ia.size>0}function na(t){return Oe(t).Ea.size===0}function pb(t){t.Va=void 0}async function IL(t){t.Ra.set("Online")}async function RL(t){t.Ia.forEach(((e,n)=>{Jy(t,e)}))}async function NL(t,e){pb(t),Qy(t)?(t.Ra.ha(e),Ky(t)):t.Ra.set("Unknown")}async function kL(t,e,n){if(t.Ra.set("Online"),e instanceof WC&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(i){we(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xd(t,i)}else if(e instanceof Nd?t.Va.Ze(e):e instanceof XC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ve.min()))try{const i=await cb(t.localStore);n.compareTo(i)>=0&&await(function(a,l){const c=a.Va.Tt(l);return c.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,f)=>{const p=a.Ia.get(h);if(!p)return;a.Ia.set(h,p.withResumeToken(xn.EMPTY_BYTE_STRING,p.snapshotVersion)),hb(a,h);const y=new Ys(p.target,h,f,p.sequenceNumber);Jy(a,y)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){we(Xo,"Failed to raise snapshot:",i),await Xd(t,i)}}async function Xd(t,e,n){if(!Cl(e))throw e;t.Ea.add(1),await Mc(t),t.Ra.set("Offline"),n||(n=()=>cb(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{we(Xo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await bh(t)}))}function mb(t,e){return e().catch((n=>Xd(t,n,e)))}async function Ih(t){const e=Oe(t),n=so(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dy;for(;ML(e);)try{const s=await hL(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,DL(e,s)}catch(s){await Xd(e,s)}gb(e)&&yb(e)}function ML(t){return na(t)&&t.Ta.length<10}function DL(t,e){t.Ta.push(e);const n=so(t);n.O_()&&n.X_&&n.ea(e.mutations)}function gb(t){return na(t)&&!so(t).x_()&&t.Ta.length>0}function yb(t){so(t).start()}async function PL(t){so(t).ra()}async function LL(t){const e=so(t);for(const n of t.Ta)e.ea(n.mutations)}async function VL(t,e,n){const i=t.Ta.shift(),s=Fy.from(i,e,n);await mb(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Ih(t)}async function UL(t,e){e&&so(t).X_&&await(async function(i,s){if((function(l){return KC(l)&&l!==le.ABORTED})(s.code)){const a=i.Ta.shift();so(i).B_(),await mb(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Ih(i)}})(t,e),gb(t)&&yb(t)}async function OS(t,e){const n=Oe(t);n.asyncQueue.verifyOperationInProgress(),we(Xo,"RemoteStore received new credentials");const i=na(n);n.Ea.add(3),await Mc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bh(n)}async function OL(t,e){const n=Oe(t);e?(n.Ea.delete(2),await bh(n)):e||(n.Ea.add(2),await Mc(n),n.Ra.set("Unknown"))}function Il(t){return t.ma||(t.ma=(function(n,i,s){const a=Oe(n);return a.sa(),new SL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:IL.bind(null,t),t_:RL.bind(null,t),r_:NL.bind(null,t),H_:kL.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Qy(t)?Ky(t):t.Ra.set("Unknown")):(await t.ma.stop(),pb(t))}))),t.ma}function so(t){return t.fa||(t.fa=(function(n,i,s){const a=Oe(n);return a.sa(),new wL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:PL.bind(null,t),r_:UL.bind(null,t),ta:LL.bind(null,t),na:VL.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Ih(t)):(await t.fa.stop(),t.Ta.length>0&&(we(Xo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const l=Date.now()+i,c=new Xy(e,n,l,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wy(t,e){if(es("AsyncQueue",`${e}: ${t}`),Cl(t))return new Ee(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static emptySet(e){return new sl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=Yu(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.ga=new Vt(Ne.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class gl{constructor(e,n,i,s,a,l,c,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,a){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new gl(e,n,sl.emptySet(n),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zL{constructor(){this.queries=zS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Oe(n),a=s.queries;s.queries=zS(),a.forEach(((l,c)=>{for(const h of c.Sa)h.onError(i)}))})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function zS(){return new ta((t=>PC(t)),Th)}async function Zy(t,e){const n=Oe(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(i=2):(a=new FL,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=Wy(l,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&t_(n)}async function e_(t,e){const n=Oe(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qL(t,e){const n=Oe(t);let i=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const c of l.Sa)c.Fa(s)&&(i=!0);l.wa=s}}i&&t_(n)}function BL(t,e,n){const i=Oe(t),s=i.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);i.queries.delete(e)}function t_(t){t.Ca.forEach((e=>{e.next()}))}var Gg,qS;(qS=Gg||(Gg={})).Ma="default",qS.Cache="cache";class n_{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new gl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.key=e}}class vb{constructor(e){this.key=e}}class HL{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=LC(e),this.tu=new sl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new FS,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((p,y)=>{const E=s.get(p),w=Eh(this.query,y)?y:null,b=!!E&&this.mutatedKeys.has(E.key),L=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;E&&w?E.data.isEqual(w.data)?b!==L&&(i.track({type:3,doc:w}),F=!0):this.su(E,w)||(i.track({type:2,doc:w}),F=!0,(h&&this.eu(w,h)>0||f&&this.eu(w,f)<0)&&(c=!0)):!E&&w?(i.track({type:0,doc:w}),F=!0):E&&!w&&(i.track({type:1,doc:E}),F=!0,(h||f)&&(c=!0)),F&&(w?(l=l.add(w),a=L?a.add(p):a.delete(p)):(l=l.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),a=a.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((p,y)=>(function(w,b){const L=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:F})}};return L(w)-L(b)})(p.type,y.type)||this.eu(p.doc,y.doc))),this.ou(i),s=s??!1;const c=n&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,f=h!==this.Za;return this.Za=h,l.length!==0||f?{snapshot:new gl(this.query,e.tu,a,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new vb(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new _b(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const i_="SyncEngine";class GL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class jL{constructor(e){this.key=e,this.hu=!1}}class YL{constructor(e,n,i,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ta((c=>PC(c)),Th),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Ne.comparator),this.Au=new Map,this.Ru=new By,this.Vu={},this.mu=new Map,this.fu=ml.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $L(t,e,n=!0){const i=xb(t);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await Tb(i,e,n,!0),s}async function JL(t,e){const n=xb(t);await Tb(n,e,!0,!1)}async function Tb(t,e,n,i){const s=await pL(t.localStore,Sr(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let c;return i&&(c=await KL(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&db(t.remoteStore,s),c}async function KL(t,e,n,i,s){t.pu=(y,E,w)=>(async function(L,F,O,H){let B=F.view.ru(O);B.Cs&&(B=await DS(L.localStore,F.query,!1).then((({documents:R})=>F.view.ru(R,B))));const X=H&&H.targetChanges.get(F.targetId),ne=H&&H.targetMismatches.get(F.targetId)!=null,Y=F.view.applyChanges(B,L.isPrimaryClient,X,ne);return HS(L,F.targetId,Y.au),Y.snapshot})(t,y,E,w);const a=await DS(t.localStore,e,!0),l=new HL(e,a.Qs),c=l.ru(a.documents),h=kc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),f=l.applyChanges(c,t.isPrimaryClient,h);HS(t,n,f.au);const p=new GL(e,n,l);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function QL(t,e,n){const i=Oe(t),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter((l=>!Th(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Bg(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&$y(i.remoteStore,s.targetId),jg(i,s.targetId)})).catch(xl)):(jg(i,s.targetId),await Bg(i.localStore,s.targetId,!0))}async function XL(t,e){const n=Oe(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$y(n.remoteStore,i.targetId))}async function WL(t,e,n){const i=s4(t);try{const s=await(function(l,c){const h=Oe(l),f=Rt.now(),p=c.reduce(((w,b)=>w.add(b.key)),et());let y,E;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let b=ts(),L=et();return h.Ns.getEntries(w,p).next((F=>{b=F,b.forEach(((O,H)=>{H.isValidDocument()||(L=L.add(O))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,b))).next((F=>{y=F;const O=[];for(const H of c){const B=mP(H,y.get(H.key).overlayedDocument);B!=null&&O.push(new lo(H.key,B,CC(B.value.mapValue),ln.exists(!0)))}return h.mutationQueue.addMutationBatch(w,f,O,c)})).next((F=>{E=F;const O=F.applyToLocalDocumentSet(y,L);return h.documentOverlayCache.saveOverlays(w,F.batchId,O)}))})).then((()=>({batchId:E.batchId,changes:UC(y)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,h){let f=l.Vu[l.currentUser.toKey()];f||(f=new Vt(Ze)),f=f.insert(c,h),l.Vu[l.currentUser.toKey()]=f})(i,s.batchId,n),await Dc(i,s.changes),await Ih(i.remoteStore)}catch(s){const a=Wy(s,"Failed to persist write");n.reject(a)}}async function Eb(t,e){const n=Oe(t);try{const i=await fL(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Au.get(a);l&&(at(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?at(l.hu,14607):s.removedDocuments.size>0&&(at(l.hu,42227),l.hu=!1))})),await Dc(n,i,e)}catch(i){await xl(i)}}function BS(t,e,n){const i=Oe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const h=Oe(l);h.onlineState=c;let f=!1;h.queries.forEach(((p,y)=>{for(const E of y.Sa)E.va(c)&&(f=!0)})),f&&t_(h)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ZL(t,e,n){const i=Oe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),a=s&&s.key;if(a){let l=new Vt(Ne.comparator);l=l.insert(a,mn.newNoDocument(a,Ve.min()));const c=et().add(a),h=new xh(Ve.min(),new Map,new Vt(Ze),l,c);await Eb(i,h),i.du=i.du.remove(a),i.Au.delete(e),r_(i)}else await Bg(i.localStore,e,!1).then((()=>jg(i,e,n))).catch(xl)}async function e4(t,e){const n=Oe(t),i=e.batch.batchId;try{const s=await cL(n.localStore,e);wb(n,i,null),Sb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Dc(n,s)}catch(s){await xl(s)}}async function t4(t,e,n){const i=Oe(t);try{const s=await(function(l,c){const h=Oe(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,c).next((y=>(at(y!==null,37113),p=y.keys(),h.mutationQueue.removeMutationBatch(f,y)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);wb(i,e,n),Sb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Dc(i,s)}catch(s){await xl(s)}}function Sb(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function wb(t,e,n){const i=Oe(t);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function jg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||Ab(t,i)}))}function Ab(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($y(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),r_(t))}function HS(t,e,n){for(const i of n)i instanceof _b?(t.Ru.addReference(i.key,e),n4(t,i)):i instanceof vb?(we(i_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||Ab(t,i.key)):Me(19791,{wu:i})}function n4(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(we(i_,"New document in limbo: "+n),t.Eu.add(i),r_(t))}function r_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ne(St.fromString(e)),i=t.fu.next();t.Au.set(i,new jL(n)),t.du=t.du.insert(n,i),db(t.remoteStore,new Ys(Sr(vh(n.path)),i,"TargetPurposeLimboResolution",yh.ce))}}async function Dc(t,e,n){const i=Oe(t),s=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,h)=>{l.push(i.pu(h,e,n).then((f=>{var p;if((f||n)&&i.isPrimaryClient){const y=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Gy.As(h.targetId,f);a.push(y)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(h,f){const p=Oe(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>pe.forEach(f,(E=>pe.forEach(E.Es,(w=>p.persistence.referenceDelegate.addReference(y,E.targetId,w))).next((()=>pe.forEach(E.ds,(w=>p.persistence.referenceDelegate.removeReference(y,E.targetId,w)))))))))}catch(y){if(!Cl(y))throw y;we(jy,"Failed to update sequence numbers: "+y)}for(const y of f){const E=y.targetId;if(!y.fromCache){const w=p.Ms.get(E),b=w.snapshotVersion,L=w.withLastLimboFreeSnapshotVersion(b);p.Ms=p.Ms.insert(E,L)}}})(i.localStore,a))}async function i4(t,e){const n=Oe(t);if(!n.currentUser.isEqual(e)){we(i_,"User change. New user:",e.toKey());const i=await ub(n.localStore,e);n.currentUser=e,(function(a,l){a.mu.forEach((c=>{c.forEach((h=>{h.reject(new Ee(le.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Dc(n,i.Ls)}}function r4(t,e){const n=Oe(t),i=n.Au.get(e);if(i&&i.hu)return et().add(i.key);{let s=et();const a=n.Iu.get(e);if(!a)return s;for(const l of a){const c=n.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function xb(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Eb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZL.bind(null,e),e.Pu.H_=qL.bind(null,e.eventManager),e.Pu.yu=BL.bind(null,e.eventManager),e}function s4(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t4.bind(null,e),e}class Wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return uL(this.persistence,new oL,e.initialUser,this.serializer)}Cu(e){return new lb(Hy.mi,this.serializer)}Du(e){return new gL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wd.provider={build:()=>new Wd};class o4 extends Wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){at(this.persistence.referenceDelegate instanceof Qd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jP(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new lb((i=>Qd.mi(i,n)),this.serializer)}}class Yg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>BS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i4.bind(null,this.syncEngine),await OL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zL})()}createDatastore(e){const n=Ch(e.databaseInfo.databaseId),i=(function(a){return new EL(a)})(e.databaseInfo);return(function(a,l,c,h){return new xL(a,l,c,h)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,a,l,c){return new bL(i,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>BS(this.syncEngine,n,0)),(function(){return VS.v()?new VS:new yL})())}createSyncEngine(e,n){return(function(s,a,l,c,h,f,p){const y=new YL(s,a,l,c,h,f);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Oe(s);we(Xo,"RemoteStore shutting down."),a.Ea.add(5),await Mc(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Yg.provider={build:()=>new Yg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ee(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(s,a){const l=Oe(s),c={documents:a.map((y=>Kd(l.serializer,y)))},h=await l.Ho("BatchGetDocuments",l.serializer.databaseId,St.emptyPath(),c,a.length),f=new Map;h.forEach((y=>{const E=IP(l.serializer,y);f.set(E.key.toString(),E)}));const p=[];return a.forEach((y=>{const E=f.get(y.toString());at(!!E,55234,{key:y}),p.push(E)})),p})(this.datastore,e);return n.forEach((i=>this.recordVersion(i))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ah(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,i)=>{const s=Ne.fromPath(i);this.mutations.push(new JC(s,this.precondition(s)))})),await(async function(i,s){const a=Oe(i),l={writes:s.map((c=>ib(a.serializer,c)))};await a.Go("Commit",a.serializer.databaseId,St.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Me(50498,{Gu:e.constructor.name});n=Ve.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new Ee(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ve.min())?ln.exists(!1):ln.updateTime(n):ln.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ve.min()))throw new Ee(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(n)}return ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n,i,s,a){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=a,this.zu=i.maxAttempts,this.M_=new Yy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new a4(this.datastore),n=this.Hu(e);n&&n.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Yu(s)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Rc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!KC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="FirestoreClient";class u4{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Nn.UNAUTHENTICATED,this.clientId=My.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{we(oo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(we(oo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Wy(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ng(t,e){t.asyncQueue.verifyOperationInProgress(),we(oo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await ub(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function GS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await c4(t);we(oo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>OS(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>OS(e.remoteStore,s))),t._onlineComponents=e}async function c4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(oo,"Using user provided OfflineComponentProvider");try{await ng(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await ng(t,new Wd)}}else we(oo,"Using default OfflineComponentProvider"),await ng(t,new o4(void 0));return t._offlineComponents}async function o_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(oo,"Using user provided OnlineComponentProvider"),await GS(t,t._uninitializedComponentsProvider._online)):(we(oo,"Using default OnlineComponentProvider"),await GS(t,new Yg))),t._onlineComponents}function f4(t){return o_(t).then((e=>e.syncEngine))}function d4(t){return o_(t).then((e=>e.datastore))}async function Zd(t){const e=await o_(t),n=e.eventManager;return n.onListen=$L.bind(null,e.syncEngine),n.onUnlisten=QL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XL.bind(null,e.syncEngine),n}function h4(t,e,n={}){const i=new Er;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,h,f){const p=new s_({next:E=>{p.Nu(),l.enqueueAndForget((()=>e_(a,y)));const w=E.docs.has(c);!w&&E.fromCache?f.reject(new Ee(le.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&E.fromCache&&h&&h.source==="server"?f.reject(new Ee(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new n_(vh(c.path),p,{includeMetadataChanges:!0,qa:!0});return Zy(a,y)})(await Zd(t),t.asyncQueue,e,n,i))),i.promise}function p4(t,e,n={}){const i=new Er;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,h,f){const p=new s_({next:E=>{p.Nu(),l.enqueueAndForget((()=>e_(a,y))),E.fromCache&&h.source==="server"?f.reject(new Ee(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new n_(c,p,{includeMetadataChanges:!0,qa:!0});return Zy(a,y)})(await Zd(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firestore.googleapis.com",YS=!0;class $S{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bb,this.ssl=YS}else this.host=e.host,this.ssl=e.ssl??YS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ab;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HP)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $S({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $S(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new vD;switch(i.type){case"firstParty":return new wD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=jS.get(n);i&&(we("ComponentProvider","Removing Datastore"),jS.delete(n),i.terminate())})(this),Promise.resolve()}}function m4(t,e,n,i={}){var f;t=zn(t,Rh);const s=El(e),a=t._getSettings(),l={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(vx(`https://${c}`),Tx("Firestore",!0)),a.host!==bb&&a.host!==c&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:c,ssl:s,emulatorOptions:i};if(!Yo(h,l)&&(t._setSettings(h),i.mockUserToken)){let p,y;if(typeof i.mockUserToken=="string")p=i.mockUserToken,y=Nn.MOCK_USER;else{p=xN(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Nn(E)}t._authCredentials=new TD(new pC(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class Lt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ic(n,Lt._jsonSchema))return new Lt(e,i||null,new Ne(St.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:sn("string",Lt._jsonSchemaVersion),referencePath:sn("string")};class Ws extends os{constructor(e,n,i){super(e,n,vh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Ne(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function On(t,e,...n){if(t=zt(t),mC("collection","path",e),t instanceof Rh){const i=St.fromString(e,...n);return oS(i),new Ws(t,null,i)}{if(!(t instanceof Lt||t instanceof Ws))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(St.fromString(e,...n));return oS(i),new Ws(t.firestore,null,i)}}function Sn(t,e,...n){if(t=zt(t),arguments.length===1&&(e=My.newId()),mC("doc","path",e),t instanceof Rh){const i=St.fromString(e,...n);return sS(i),new Lt(t,null,new Ne(i))}{if(!(t instanceof Lt||t instanceof Ws))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(St.fromString(e,...n));return sS(i),new Lt(t.firestore,t instanceof Ws?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="AsyncQueue";class KS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yy(this,"async_queue_retry"),this._c=()=>{const i=tg();i&&we(JS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=tg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=tg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Er;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Cl(e))throw e;we(JS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",QS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Xy.createAndSchedule(this,e,n,i,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Me(47125,{Pc:QS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function QS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Cr extends Rh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new KS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KS(e),this._firestoreClient=void 0,await e}}}function g4(t,e){const n=typeof t=="object"?t:Ax(),i=typeof t=="string"?t:Gd,s=Ty(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=wN("firestore");a&&m4(s,...a)}return s}function Rl(t){if(t._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||y4(t),t._firestoreClient}function y4(t){var i,s,a;const e=t._freezeSettings(),n=(function(c,h,f,p){return new qD(c,h,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Cb(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new u4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fi(xn.fromBase64String(e))}catch(n){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fi(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ic(e,fi._jsonSchema))return fi.fromBase64String(e.bytes)}}fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:sn("string",fi._jsonSchemaVersion),bytes:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(Ic(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:sn("string",wr._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ic(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ar(e.vectorValues);throw new Ee(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:sn("string",Ar._jsonSchemaVersion),vectorValues:sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=/^__.*__$/;class v4{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new lo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nc(e,this.data,n,this.fieldTransforms)}}class Ib{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new lo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:t})}}class a_{constructor(e,n,i,s,a,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new a_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return eh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rb(this.Ac)&&_4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T4{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ch(e)}Cc(e,n,i,s=!1){return new a_({Ac:e,methodName:n,Dc:i,path:An.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kl(t){const e=t._freezeSettings(),n=Ch(t._databaseId);return new T4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nh(t,e,n,i,s,a={}){const l=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);d_("Data must be an object, but it was:",l,i);const c=Nb(i,l);let h,f;if(a.merge)h=new di(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const p=[];for(const y of a.mergeFields){const E=$g(e,y,n);if(!l.contains(E))throw new Ee(le.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Mb(p,E)||p.push(E)}h=new di(p),f=l.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,f=l.fieldTransforms;return new v4(new Un(c),h,f)}class kh extends Pc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kh}}class l_ extends Pc{_toFieldTransform(e){return new jC(e.path,new gc)}isEqual(e){return e instanceof l_}}class u_ extends Pc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new vc(e.serializer,zC(e.serializer,this.Fc));return new jC(e.path,n)}isEqual(e){return e instanceof u_&&this.Fc===e.Fc}}function c_(t,e,n,i){const s=t.Cc(1,e,n);d_("Data must be an object, but it was:",s,i);const a=[],l=Un.empty();ao(i,((h,f)=>{const p=h_(e,h,n);f=zt(f);const y=s.yc(p);if(f instanceof kh)a.push(p);else{const E=Lc(f,y);E!=null&&(a.push(p),l.set(p,E))}}));const c=new di(a);return new Ib(l,c,s.fieldTransforms)}function f_(t,e,n,i,s,a){const l=t.Cc(1,e,n),c=[$g(e,i,n)],h=[s];if(a.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)c.push($g(e,a[E])),h.push(a[E+1]);const f=[],p=Un.empty();for(let E=c.length-1;E>=0;--E)if(!Mb(f,c[E])){const w=c[E];let b=h[E];b=zt(b);const L=l.yc(w);if(b instanceof kh)f.push(w);else{const F=Lc(b,L);F!=null&&(f.push(w),p.set(w,F))}}const y=new di(f);return new Ib(p,y,l.fieldTransforms)}function E4(t,e,n,i=!1){return Lc(n,t.Cc(i?4:3,e))}function Lc(t,e){if(kb(t=zt(t)))return d_("Unsupported field value:",e,t),Nb(t,e);if(t instanceof Pc)return(function(i,s){if(!Rb(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const a=[];let l=0;for(const c of i){let h=Lc(c,s.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}})(t,e)}return(function(i,s){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zC(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Rt.fromDate(i);return{timestampValue:Jd(s.serializer,a)}}if(i instanceof Rt){const a=new Rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jd(s.serializer,a)}}if(i instanceof wr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fi)return{bytesValue:ZC(s.serializer,i._byteString)};if(i instanceof Lt){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:qy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Ar)return(function(l,c){return{mapValue:{fields:{[AC]:{stringValue:xC},[jd]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return Oy(c.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${gh(i)}`)})(t,e)}function Nb(t,e){const n={};return _C(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(t,((i,s)=>{const a=Lc(s,e.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function kb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof wr||t instanceof fi||t instanceof Lt||t instanceof Pc||t instanceof Ar)}function d_(t,e,n){if(!kb(n)||!gC(n)){const i=gh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function $g(t,e,n){if((e=zt(e))instanceof Nl)return e._internalPath;if(typeof e=="string")return h_(t,e);throw eh("Field path arguments must be of type string or ",t,!1,void 0,n)}const S4=new RegExp("[~\\*/\\[\\]]");function h_(t,e,n){if(e.search(S4)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nl(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function eh(t,e,n,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${i}`),l&&(h+=` in document ${s}`),h+=")"),new Ee(le.INVALID_ARGUMENT,c+t+h)}function Mb(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(p_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class w4 extends th{data(){return super.data()}}function p_(t,e){return typeof e=="string"?h_(t,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m_{}class g_ extends m_{}function yl(t,e,...n){let i=[];e instanceof m_&&i.push(e),i=i.concat(n),(function(a){const l=a.filter((h=>h instanceof __)).length,c=a.filter((h=>h instanceof y_)).length;if(l>1||l>0&&c>0)throw new Ee(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class y_ extends g_{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new y_(e,n,i)}_apply(e){const n=this._parse(e);return Lb(e._query,n),new os(e.firestore,e.converter,Og(e._query,n))}_parse(e){const n=kl(e.firestore);return(function(a,l,c,h,f,p,y){let E;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ZS(y,p);const b=[];for(const L of y)b.push(WS(h,a,L));E={arrayValue:{values:b}}}else E=WS(h,a,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ZS(y,p),E=E4(c,l,y,p==="in"||p==="not-in");return rn.create(f,p,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class __ extends m_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new __(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ji.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const h of c)Lb(l,h),l=Og(l,h)})(e._query,n),new os(e.firestore,e.converter,Og(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class v_ extends g_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new v_(e,n)}_apply(e){const n=(function(s,a,l){if(s.startAt!==null)throw new Ee(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ee(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mc(a,l)})(e._query,this._field,this._direction);return new os(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new bl(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function _l(t,e="asc"){const n=e,i=p_("orderBy",t);return v_._create(i,n)}class T_ extends g_{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new T_(e,n,i)}_apply(e){return new os(e.firestore,e.converter,$d(e._query,this._limit,this._limitType))}}function Pb(t){return ND("limit",t),T_._create("limit",t,"F")}function WS(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new Ee(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DC(e)&&n.indexOf("/")!==-1)throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(St.fromString(n));if(!Ne.isDocumentKey(i))throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pS(t,new Ne(i))}if(n instanceof Lt)return pS(t,n._key);throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gh(n)}.`)}function ZS(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lb(t,e){const n=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Vb{convertValue(e,n="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ao(e,((s,a)=>{i[s]=this.convertValue(a,n)})),i}convertVectorValue(e){var i,s,a;const n=(a=(s=(i=e.fields)==null?void 0:i[jd].arrayValue)==null?void 0:s.values)==null?void 0:a.map((l=>Yt(l.doubleValue)));return new Ar(n)}convertGeoPoint(e){return new wr(Yt(e.latitude),Yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=_h(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const n=no(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=St.fromString(e);at(ob(i),9688,{name:e});const s=new hc(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return s.isEqual(n)||es(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class A4 extends Vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}class el{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zs extends th{constructor(e,n,i,s,a,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(p_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zs._jsonSchema={type:sn("string",Zs._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class kd extends Zs{data(e={}){return super.data(e)}}class Go{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new el(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new kd(this._firestore,this._userDataWriter,i.key,i,new el(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const h=new kd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new el(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const h=new kd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new el(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:x4(c.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=My.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function x4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){t=zn(t,Lt);const e=zn(t.firestore,Cr);return h4(Rl(e),t._key).then((n=>Ob(e,t,n)))}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:sn("string",Go._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};class Dh extends Vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function nh(t){t=zn(t,os);const e=zn(t.firestore,Cr),n=Rl(e),i=new Dh(e);return Db(t._query),p4(n,t._query).then((s=>new Go(e,i,t,s)))}function Ub(t,e,n){t=zn(t,Lt);const i=zn(t.firestore,Cr),s=Mh(t.converter,e,n);return Ph(i,[Nh(kl(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ln.none())])}function C4(t,e,n,...i){t=zn(t,Lt);const s=zn(t.firestore,Cr),a=kl(s);let l;return l=typeof(e=zt(e))=="string"||e instanceof Nl?f_(a,"updateDoc",t._key,e,n,i):c_(a,"updateDoc",t._key,e),Ph(s,[l.toMutation(t._key,ln.exists(!0))])}function jo(t,e){const n=zn(t.firestore,Cr),i=Sn(t),s=Mh(t.converter,e);return Ph(n,[Nh(kl(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,ln.exists(!1))]).then((()=>i))}function eo(t,...e){var h,f,p;t=zt(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||XS(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(XS(e[i])){const y=e[i];e[i]=(h=y.next)==null?void 0:h.bind(y),e[i+1]=(f=y.error)==null?void 0:f.bind(y),e[i+2]=(p=y.complete)==null?void 0:p.bind(y)}let a,l,c;if(t instanceof Lt)l=zn(t.firestore,Cr),c=vh(t._key.path),a={next:y=>{e[i]&&e[i](Ob(l,t,y))},error:e[i+1],complete:e[i+2]};else{const y=zn(t,os);l=zn(y.firestore,Cr),c=y._query;const E=new Dh(l);a={next:w=>{e[i]&&e[i](new Go(l,E,y,w))},error:e[i+1],complete:e[i+2]},Db(t._query)}return(function(E,w,b,L){const F=new s_(L),O=new n_(w,F,b);return E.asyncQueue.enqueueAndForget((async()=>Zy(await Zd(E),O))),()=>{F.Nu(),E.asyncQueue.enqueueAndForget((async()=>e_(await Zd(E),O)))}})(Rl(l),c,s,a)}function Ph(t,e){return(function(i,s){const a=new Er;return i.asyncQueue.enqueueAndForget((async()=>WL(await f4(i),s,a))),a.promise})(Rl(t),e)}function Ob(t,e,n){const i=n.docs.get(e._key),s=new Dh(t);return new Zs(t,s,e._key,i,new el(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kl(e)}set(e,n,i){this._verifyNotCommitted();const s=$s(e,this._firestore),a=Mh(s.converter,n,i),l=Nh(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,i);return this._mutations.push(l.toMutation(s._key,ln.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const a=$s(e,this._firestore);let l;return l=typeof(n=zt(n))=="string"||n instanceof Nl?f_(this._dataReader,"WriteBatch.update",a._key,n,i,s):c_(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$s(e,this._firestore);return this._mutations=this._mutations.concat(new Ah(n._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $s(t,e){if((t=zt(t)).firestore!==e)throw new Ee(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=kl(e)}get(e){const n=$s(e,this._firestore),i=new A4(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return Me(24041);const a=s[0];if(a.isFoundDocument())return new th(this._firestore,i,a.key,a,n.converter);if(a.isNoDocument())return new th(this._firestore,i,n._key,null,n.converter);throw Me(18433,{doc:a})}))}set(e,n,i){const s=$s(e,this._firestore),a=Mh(s.converter,n,i),l=Nh(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,l),this}update(e,n,i,...s){const a=$s(e,this._firestore);let l;return l=typeof(n=zt(n))=="string"||n instanceof Nl?f_(this._dataReader,"Transaction.update",a._key,n,i,s):c_(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,l),this}delete(e){const n=$s(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4 extends R4{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$s(e,this._firestore),i=new Dh(this._firestore);return super.get(e).then((s=>new Zs(this._firestore,i,n._key,s._document,new el(!1,!1),n.converter)))}}function ig(t,e,n){t=zn(t,Cr);const i={...b4,...n};return(function(a){if(a.maxAttempts<1)throw new Ee(le.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(a,l,c){const h=new Er;return a.asyncQueue.enqueueAndForget((async()=>{const f=await d4(a);new l4(a.asyncQueue,f,c,l,h).ju()})),h.promise})(Rl(t),(s=>e(new N4(t,s))),i)}function tc(){return new l_("serverTimestamp")}function ew(t){return new u_("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){return Rl(t=zn(t,Cr)),new I4(t,(e=>Ph(t,e)))}(function(e,n=!0){(function(s){Al=s})(Sl),cl(new $o("firestore",((i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new Cr(new ED(i.getProvider("auth-internal")),new AD(l,i.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(f.options.projectId,p)})(l,s),l);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Qs(tS,nS,e),Qs(tS,nS,"esm2020")})();let ih;const Fb=__app_id,tw=Bk().find(t=>t.name===Fb);tw?ih=tw:ih=wx(__firebase_config,Fb);const Wo=yD(ih),it=g4(ih),zb=new Jr,M4=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),qb=({className:t="w-6 h-6"})=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v11.494m0 0a7.5 7.5 0 007.5-7.5H4.5a7.5 7.5 0 007.5 7.5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253V4.5A2.25 2.25 0 0114.25 2.25h0A2.25 2.25 0 0116.5 4.5v1.753"})]}),D4=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Bb=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Hb=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),P4=({className:t="w-6 h-6"})=>S.jsxs("svg",{xmlns:"http://www.w.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2L2 7l10 15L22 7l-10-5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 7l10 15L22 7"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2v20"})]}),L4=({className:t="w-6 h-6"})=>Gi.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2},Gi.createElement("path",{key:"1",strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Gi.createElement("path",{key:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})),Jg=[{id:"dashboard",label:"Dashboard",icon:Gi.createElement(M4)},{id:"study_guide",label:"Study Guide",icon:Gi.createElement(qb)},{id:"chat",label:"Chat",icon:Gi.createElement(D4)},{id:"exam",label:"Exam",icon:Gi.createElement(Bb)},{id:"leaderboard",label:"Leaderboard",icon:Gi.createElement(Hb)},{id:"subscription",label:"Subscription",icon:Gi.createElement(P4)}],Kg=[{id:"settings",label:"Settings",icon:Gi.createElement(L4)}],vl=({className:t="w-10 h-10"})=>S.jsxs("svg",{viewBox:"0 0 52 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[S.jsx("path",{d:"M4.33331 17.5L26 4.375L47.6666 17.5L26 30.625L4.33331 17.5Z",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M41.5 21V29.75C41.5 30.825 40.85 32.55 39.4166 33.25L27.75 39.375C26.6666 39.9 25.3333 39.9 24.25 39.375L12.5833 33.25C11.15 32.55 10.5 30.825 10.5 29.75V21",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M47.6667 17.5V26.25",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),nw=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),yd=({item:t,isActive:e,isExpanded:n,onClick:i})=>S.jsx("li",{className:"relative",children:S.jsxs("button",{onClick:i,className:`w-full flex items-center p-3 rounded-lg text-left transition-colors duration-300 ease-in-out group
            ${n?"justify-start":"justify-center"}
            ${e?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[e&&S.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 bg-lime-400 rounded-r-full"}),S.jsx("span",{className:`flex-shrink-0 transition-all duration-300 ease-in-out ${n?"mr-4":"mr-0"}`,children:t.icon}),S.jsx("span",{className:`font-medium whitespace-nowrap overflow-hidden transition-opacity duration-300 ease-in-out ${n?"opacity-100":"opacity-0"}`,children:t.label})]})}),V4=({activeItem:t,onItemClick:e,isExpanded:n,onMouseEnter:i,onMouseLeave:s,displayName:a,onLogout:l,isMobileSidebarOpen:c,onCloseMobileSidebar:h})=>{const f=E=>{e(E),h()},p=()=>{l(),h()},y=S.jsxs("div",{className:"h-full p-4 flex flex-col",children:[S.jsxs("div",{className:"flex items-center mb-10 flex-shrink-0",children:[S.jsx(vl,{className:"w-10 h-10 text-lime-400 flex-shrink-0"}),S.jsx("h1",{className:`text-2xl font-bold bg-gradient-to-b from-lime-300 to-lime-500 text-transparent bg-clip-text tracking-wider ml-3 whitespace-nowrap overflow-hidden transition-opacity duration-300 ease-in-out ${n?"opacity-100":"opacity-0"}`,children:"VANTUTOR"})]}),S.jsxs("nav",{className:"flex-grow overflow-y-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[S.jsx("p",{className:`text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 transition-opacity duration-300 ease-in-out ${n?"pl-3 opacity-100":"opacity-0"}`,children:"Menu"}),S.jsx("ul",{className:"space-y-2",children:Jg.map(E=>S.jsx(yd,{item:E,isActive:t===E.id,isExpanded:n,onClick:()=>e(E.id)},E.id))})]}),S.jsxs("div",{className:"flex-shrink-0",children:[S.jsxs("ul",{className:"space-y-2 pt-4 border-t border-white/10",children:[Kg.map(E=>S.jsx(yd,{item:E,isActive:t===E.id,isExpanded:n,onClick:()=>e(E.id)},E.id)),S.jsx("li",{children:S.jsxs("button",{onClick:l,className:`w-full flex items-center p-3 rounded-lg text-left transition-colors duration-300 ease-in-out text-gray-400 hover:bg-red-500/20 hover:text-red-400 group
                      ${n?"justify-start":"justify-center"}`,children:[S.jsx("span",{className:`flex-shrink-0 transition-all duration-300 ease-in-out ${n?"mr-4":"mr-0"}`,children:S.jsx(nw,{})}),S.jsx("span",{className:`font-medium whitespace-nowrap overflow-hidden transition-opacity duration-300 ease-in-out ${n?"opacity-100":"opacity-0"}`,children:"Logout"})]})})]}),S.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${n?"max-h-24 mt-4 opacity-100":"max-h-0 opacity-0"}`,children:S.jsx("div",{className:"p-3 rounded-lg bg-black/20",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-lime-400 to-teal-500 flex-shrink-0 items-center justify-center flex text-white font-bold",children:a?a.charAt(0).toUpperCase():"?"}),S.jsx("div",{className:"ml-3 overflow-hidden",children:S.jsx("p",{className:"text-sm font-semibold text-white truncate",children:a})})]})})})]})]});return S.jsxs(S.Fragment,{children:[S.jsx("aside",{onMouseEnter:i,onMouseLeave:s,className:`hidden md:flex flex-col flex-shrink-0 transition-all duration-300 ease-in-out z-20 ${n?"w-64":"w-20"}`,children:S.jsx("div",{className:"h-full bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl",children:y})}),S.jsxs("div",{className:`fixed inset-0 z-40 transform transition-transform duration-300 ease-in-out md:hidden ${c?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:h,"aria-hidden":"true"}),S.jsxs("div",{className:"relative w-64 h-full bg-gray-900/90 backdrop-blur-xl border-r border-white/10 p-4 flex flex-col",children:[S.jsxs("div",{className:"flex items-center mb-10 flex-shrink-0",children:[S.jsx(vl,{className:"w-10 h-10 text-lime-400 flex-shrink-0"}),S.jsx("h1",{id:"mobile-menu-title",className:"text-2xl font-bold bg-gradient-to-b from-lime-300 to-lime-500 text-transparent bg-clip-text tracking-wider ml-3",children:"VANTUTOR"})]}),S.jsxs("nav",{className:"flex-grow overflow-y-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[S.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 pl-3",children:"Menu"}),S.jsx("ul",{className:"space-y-2",children:Jg.map(E=>S.jsx(yd,{item:E,isActive:t===E.id,isExpanded:!0,onClick:()=>f(E.id)},E.id))})]}),S.jsxs("div",{className:"flex-shrink-0",children:[S.jsxs("ul",{className:"space-y-2 pt-4 border-t border-white/10",children:[Kg.map(E=>S.jsx(yd,{item:E,isActive:t===E.id,isExpanded:!0,onClick:()=>f(E.id)},E.id)),S.jsx("li",{children:S.jsxs("button",{onClick:p,className:"w-full flex items-center p-3 rounded-lg text-left transition-colors duration-300 ease-in-out text-gray-400 hover:bg-red-500/20 hover:text-red-400 group justify-start",children:[S.jsx("span",{className:"flex-shrink-0 mr-4",children:S.jsx(nw,{})}),S.jsx("span",{className:"font-medium",children:"Logout"})]})})]}),S.jsx("div",{className:"mt-4 p-3 rounded-lg bg-black/20",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-lime-400 to-teal-500 flex-shrink-0 items-center justify-center flex text-white font-bold",children:a?a.charAt(0).toUpperCase():"?"}),S.jsx("div",{className:"ml-3 overflow-hidden",children:S.jsx("p",{className:"text-sm font-semibold text-white truncate",children:a})})]})})]})]})]})]})},S_=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),U4=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),O4=({currentPageLabel:t,onNotificationsClick:e,unreadCount:n,onMenuClick:i})=>S.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between px-4 sm:px-6 md:px-8 pt-4 sm:pt-6 md:pt-8 pb-6",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("button",{onClick:i,className:"md:hidden mr-4 w-10 h-10 bg-white/5 backdrop-blur-xl border border-white/10 rounded-full flex items-center justify-center text-gray-400 hover:text-white transition-colors","aria-label":"Open menu",children:S.jsx(U4,{})}),S.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:t})]}),S.jsx("div",{className:"flex items-center",children:S.jsxs("button",{onClick:e,className:"relative text-gray-400 hover:text-white p-2 rounded-full hover:bg-white/10","aria-label":`Notifications (${n} unread)`,children:[S.jsx(S_,{}),n>0&&S.jsxs("span",{className:"absolute top-1 right-1 block h-2.5 w-2.5",children:[S.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-lime-400 opacity-75"}),S.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-lime-500 border-2 border-gray-800"})]})]})})]}),F4=t=>{const e=Date.now(),n=Math.floor((e-t)/1e3);if(n<60)return`${n}s ago`;const i=Math.floor(n/60);if(i<60)return`${i}m ago`;const s=Math.floor(i/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},z4=({type:t,className:e="w-6 h-6"})=>{switch(t){case"welcome":return S.jsx(vl,{className:e});case"study_update":return S.jsx(qb,{className:e});case"leaderboard_change":return S.jsx(Hb,{className:e});case"exam_reminder":return S.jsx(Bb,{className:e});default:return S.jsx(S_,{className:e})}},q4=({notifications:t,isOpen:e,onClose:n,onMarkAllAsRead:i,onMarkAsRead:s})=>{if(!e)return null;const a=t.filter(l=>!l.isRead).length;return S.jsxs("div",{className:"fixed inset-0 z-30",onClick:n,"aria-hidden":"true",children:[S.jsx("div",{className:"absolute inset-0 bg-black/30"}),S.jsxs("div",{className:"absolute top-20 right-4 md:right-6 lg:right-8 w-full max-w-sm bg-gray-800/80 backdrop-blur-md rounded-2xl border border-white/10 shadow-2xl",onClick:l=>l.stopPropagation(),children:[S.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[S.jsx("h3",{className:"font-bold text-white text-lg",children:"Notifications"}),a>0&&S.jsx("button",{onClick:i,className:"text-sm text-lime-400 hover:text-lime-300 font-semibold",children:"Mark all as read"})]}),S.jsx("div",{className:"max-h-[60vh] overflow-y-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:t.length>0?S.jsx("ul",{children:t.map(l=>S.jsx("li",{className:"border-b border-white/5 last:border-b-0",children:S.jsxs("button",{onClick:()=>s(l.id),className:"w-full text-left flex items-start gap-4 p-4 hover:bg-white/5 transition-colors",children:[!l.isRead&&S.jsx("div",{className:"w-2 h-2 rounded-full bg-lime-400 flex-shrink-0 mt-2","aria-label":"Unread"}),S.jsx("div",{className:`text-gray-400 flex-shrink-0 ${l.isRead?"ml-4":""}`,children:S.jsx(z4,{type:l.type})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"font-semibold text-white",children:l.title}),S.jsx("p",{className:"text-sm text-gray-300",children:l.message}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:F4(l.timestamp)})]})]})},l.id))}):S.jsxs("div",{className:"text-center p-8 text-gray-400",children:[S.jsx(S_,{className:"w-12 h-12 mx-auto mb-2 text-gray-600"}),S.jsx("p",{children:"No notifications yet."})]})})]})]})},rg=({title:t,value:e,description:n})=>S.jsxs("div",{className:"bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg p-6 rounded-xl border border-white/10 flex-1 min-w-[200px] transition-all duration-300 hover:border-lime-500/50 hover:shadow-lg hover:shadow-lime-500/10",children:[S.jsx("p",{className:"text-sm text-gray-400 font-medium",children:t}),S.jsx("p",{className:"text-3xl font-bold mt-1 bg-gradient-to-r from-lime-400 to-teal-400 text-transparent bg-clip-text",children:e}),S.jsx("p",{className:"text-xs text-gray-500 mt-2",children:n})]}),B4=({data:t})=>{if(!t||t.length===0)return S.jsx("div",{className:"h-48 bg-black/20 rounded-lg flex items-center justify-center text-gray-500 border border-dashed border-gray-600",children:S.jsx("p",{children:"No XP data to display yet."})});const e=Math.max(...t.map(s=>s.xp),1),n=160,i=100/t.length;return S.jsxs("div",{className:"relative h-48 bg-black/20 rounded-lg p-4",children:[S.jsxs("div",{className:"absolute inset-0 grid grid-rows-4 p-4 pointer-events-none",children:[[...Array(3)].map((s,a)=>S.jsx("div",{className:"border-b border-white/5"},a)),S.jsx("div",{})," "]}),S.jsx("div",{className:"relative h-full flex items-end justify-around gap-1 z-10",children:t.map(({date:s,xp:a})=>{const l=a/e*n;return S.jsxs("div",{className:"group relative",style:{width:`${i}%`},children:[S.jsx("div",{className:"bg-gradient-to-t from-teal-600 to-lime-500 rounded-t-sm transition-all duration-300 hover:opacity-100 opacity-80",style:{height:`${l>0?Math.max(l,2):0}px`}}),S.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max px-2 py-1 bg-gray-800 text-white text-xs rounded-md opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:[S.jsxs("p",{className:"font-bold",children:[a.toLocaleString()," XP"]}),S.jsx("p",{className:"text-gray-400",children:new Date(s+"T00:00:00").toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})]},s)})})]})},H4=({exam:t})=>S.jsxs("div",{className:"flex items-center justify-between text-sm py-2 border-b border-white/10 last:border-b-0",children:[S.jsxs("div",{className:"flex flex-col",children:[S.jsx("span",{className:"text-gray-300",children:"Completed an exam"}),S.jsx("span",{className:"text-xs text-gray-500",children:new Date(t.timestamp).toLocaleDateString()})]}),S.jsxs("div",{className:"font-semibold text-right",children:[S.jsxs("span",{className:"text-lime-400",children:["+",t.xpEarned," XP"]}),S.jsxs("span",{className:"text-gray-400 ml-2",children:["(",t.score,"/",t.totalQuestions,")"]})]})]}),iw=({userProfile:t,userProgress:e,dashboardData:n})=>{const i=Object.keys(e).filter(l=>e[l].isComplete).length,s=(n==null?void 0:n.totalTopics)||0,a=n!=null&&n.examHistory&&n.examHistory.length>0?Math.round(n.examHistory.reduce((l,c)=>l+c.score/c.totalQuestions,0)/n.examHistory.length*100):0;return S.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-y-auto p-4 sm:p-6 md:p-8 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[S.jsxs("div",{className:"flex flex-wrap gap-4 md:gap-6 mb-8",children:[S.jsx(rg,{title:"Current Level",value:t.level,description:"Your selected difficulty"}),S.jsx(rg,{title:"Total XP",value:(t.totalXP+t.totalTestXP).toLocaleString(),description:"From lessons & exams"}),S.jsx(rg,{title:"Weekly Streak",value:`${t.currentStreak} Day${t.currentStreak!==1?"s":""}`,description:"Consecutive days of activity"})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[S.jsxs("div",{className:"lg:col-span-2 bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg p-6 rounded-xl border border-white/10",children:[S.jsx("h3",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-lime-300 to-teal-400 text-transparent bg-clip-text",children:"XP Growth (Last 30 Days)"}),S.jsx(B4,{data:(n==null?void 0:n.xpHistory)||[]}),S.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[S.jsxs("div",{className:"bg-black/20 p-4 rounded-lg text-center",children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Topics Completed"}),S.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:n?`${i} / ${s}`:"- / -"})]}),S.jsxs("div",{className:"bg-black/20 p-4 rounded-lg text-center",children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Average Exam Score"}),S.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:n&&n.examHistory.length>0?`${a}%`:"--%"})]})]})]}),S.jsxs("div",{className:"bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg p-6 rounded-xl border border-white/10",children:[S.jsx("h3",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-lime-300 to-teal-400 text-transparent bg-clip-text",children:"Recent Activity"}),n&&n.examHistory.length>0?S.jsx("div",{className:"space-y-1",children:n.examHistory.map(l=>S.jsx(H4,{exam:l},l.id))}):S.jsx("div",{className:"text-gray-400 text-sm",children:"A feed of your recent exam results will appear here."})]})]})]})},G4=({user:t,onOnboardingComplete:e})=>{const[n,i]=de.useState([]),[s,a]=de.useState([]),[l,c]=de.useState(""),[h,f]=de.useState(""),[p,y]=de.useState(!1),[E,w]=de.useState(!0),[b,L]=de.useState(null);de.useEffect(()=>{(async()=>{try{const X=On(it,"artifacts",__app_id,"public","data","courses"),ne=await nh(X);if(ne.empty)L("Could not find configuration data. Please contact support.");else{const Y=[];if(ne.forEach(R=>{const P=R.data();Y.push({id:R.id,name:P.courseName,levels:P.levels||[]})}),Y.length>0){i(Y),c(Y[0].id);const R=Y[0].levels||[];a(R),f(R[0]||"")}else L("No courses available for setup.")}}catch(X){console.error("Error fetching courses data:",X),L("An error occurred during setup. Please try again later.")}finally{w(!1)}})()},[]);const F=B=>{const X=B.target.value;c(X);const ne=n.find(Y=>Y.id===X);if(ne){const Y=ne.levels||[];a(Y),f(Y[0]||"")}else a([]),f("")},O=B=>{if(B.preventDefault(),!l||!h){L("Please select both a course and a level.");return}y(!0),setTimeout(()=>{e({courseId:l,level:h})},1500)},H=()=>E?S.jsx("div",{className:"flex justify-center items-center h-48",children:S.jsx("div",{className:"w-8 h-8 border-4 border-t-lime-500 border-gray-600 rounded-full animate-spin"})}):b?S.jsx("p",{className:"text-red-400 text-center py-8",children:b}):S.jsxs("form",{onSubmit:O,children:[S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-300 mb-2",children:"Choose your course"}),S.jsx("select",{id:"course",name:"course",value:l,onChange:F,className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none",children:n.map(B=>S.jsx("option",{value:B.id,className:"bg-gray-800",children:B.name},B.id))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-300 mb-2",children:"Select your current level"}),S.jsxs("select",{id:"level",name:"level",value:h,onChange:B=>f(B.target.value),disabled:s.length===0,className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:[s.length===0&&S.jsx("option",{disabled:!0,value:"",className:"bg-gray-800",children:"Select a course"}),s.map(B=>S.jsx("option",{value:B,className:"bg-gray-800",children:B},B))]})]})]}),S.jsx("div",{className:"mt-8",children:S.jsx("button",{type:"submit",disabled:p||E||!!b||!l||!h,className:"w-full bg-gradient-to-r from-lime-500 to-teal-500 text-white font-bold py-3 px-4 rounded-lg hover:opacity-90 transition-opacity duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:p?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin mr-2"}),S.jsx("span",{children:"Saving..."})]}):"Start Learning"})})]});return S.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-black p-4",children:S.jsx("div",{className:"w-full max-w-md",children:S.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 sm:p-8 shadow-2xl",children:[S.jsxs("div",{className:"flex justify-center items-center mb-6",children:[S.jsx(vl,{className:"w-12 h-12 text-lime-400"}),S.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-b from-lime-300 to-lime-500 text-transparent bg-clip-text tracking-wider ml-3",children:"VANTUTOR"})]}),S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white tracking-wider",children:"Welcome!"}),S.jsx("p",{className:"text-gray-400 mt-2",children:"Let's set up your learning path."})]}),H()]})})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let j4,Y4;function $4(){return{geminiUrl:j4,vertexUrl:Y4}}function J4(t,e,n,i){var s,a;if(!(t!=null&&t.baseUrl)){const l=$4();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ia{}function Ce(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function v(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const h=t[c];if(Array.isArray(n))for(let f=0;f<h.length;f++){const p=h[f];v(p,e.slice(a+1),n[f])}else for(const f of h)v(f,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const h=t[c];v(h[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function K4(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),a=i.split("."),l=new Set;let c=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){c=h;break}if(c!==-1&&a.length>c)for(let h=c;h<a.length;h++){const f=a[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}Qg(t,s,a,0,l)}}function Qg(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const h of c[l])Qg(h,e,n,i+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!s.has(f)),h={};for(const f of c)h[f]=l[f];for(const[f,p]of Object.entries(h)){const y=[];for(const E of n.slice(i))E==="*"?y.push(f):y.push(E);v(l,y,p)}for(const f of c)delete l[f]}}else{const l=t;a in l&&Qg(l[a],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w_(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q4(t){const e={},n=m(t,["operationName"]);n!=null&&v(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&v(e,["_url","resourceName"],i),e}function X4(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const s=m(t,["done"]);s!=null&&v(e,["done"],s);const a=m(t,["error"]);a!=null&&v(e,["error"],a);const l=m(t,["response","generateVideoResponse"]);return l!=null&&v(e,["response"],Z4(l)),e}function W4(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const s=m(t,["done"]);s!=null&&v(e,["done"],s);const a=m(t,["error"]);a!=null&&v(e,["error"],a);const l=m(t,["response"]);return l!=null&&v(e,["response"],eV(l)),e}function Z4(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>tV(l))),v(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const s=m(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function eV(t){const e={},n=m(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>nV(l))),v(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const s=m(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function tV(t){const e={},n=m(t,["video"]);return n!=null&&v(e,["video"],sV(n)),e}function nV(t){const e={},n=m(t,["_self"]);return n!=null&&v(e,["video"],oV(n)),e}function iV(t){const e={},n=m(t,["operationName"]);return n!=null&&v(e,["_url","operationName"],n),e}function rV(t){const e={},n=m(t,["operationName"]);return n!=null&&v(e,["_url","operationName"],n),e}function sV(t){const e={},n=m(t,["uri"]);n!=null&&v(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&v(e,["videoBytes"],w_(i));const s=m(t,["encoding"]);return s!=null&&v(e,["mimeType"],s),e}function oV(t){const e={},n=m(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],w_(i));const s=m(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(rw||(rw={}));var sw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(sw||(sw={}));var ow;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ow||(ow={}));var Ft;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ft||(Ft={}));var aw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(aw||(aw={}));var lw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(lw||(lw={}));var uw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(uw||(uw={}));var cw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cw||(cw={}));var fw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(fw||(fw={}));var dw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dw||(dw={}));var hw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hw||(hw={}));var pw;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(pw||(pw={}));var mw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(mw||(mw={}));var gw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(gw||(gw={}));var yw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(yw||(yw={}));var _w;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_w||(_w={}));var rh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(rh||(rh={}));var vw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vw||(vw={}));var Xg;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xg||(Xg={}));var Tw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Tw||(Tw={}));var Ew;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ew||(Ew={}));var Sw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Sw||(Sw={}));var ww;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ww||(ww={}));var Aw;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Aw||(Aw={}));var xw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(xw||(xw={}));var Cw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Cw||(Cw={}));var bw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(bw||(bw={}));var Iw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Iw||(Iw={}));var Rw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Rw||(Rw={}));var Nw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Nw||(Nw={}));var kw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(kw||(kw={}));var Mw;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Mw||(Mw={}));var Dw;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Dw||(Dw={}));var Pw;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Pw||(Pw={}));var Lw;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Lw||(Lw={}));var Vw;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Vw||(Vw={}));var Uw;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Uw||(Uw={}));var Ow;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Ow||(Ow={}));var Fw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Fw||(Fw={}));var zw;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(zw||(zw={}));var qw;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(qw||(qw={}));var Bw;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Bw||(Bw={}));var Hw;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Hw||(Hw={}));var Gw;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Gw||(Gw={}));var jw;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(jw||(jw={}));var Yw;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Yw||(Yw={}));var $w;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})($w||($w={}));var Jw;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Jw||(Jw={}));var tl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(tl||(tl={}));class Wg{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ou{get text(){var e,n,i,s,a,l,c,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const y=[];for(const E of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[w,b]of Object.entries(E))w!=="text"&&w!=="thought"&&(b!==null||b!==void 0)&&y.push(w);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;p=!0,f+=E.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var e,n,i,s,a,l,c,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const y of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[E,w]of Object.entries(y))E!=="inlineData"&&(w!==null||w!==void 0)&&p.push(E);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,s,a,l,c,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,s,a,l,c,h,f;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,s,a,l,c,h,f;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class Kw{}class Qw{}class aV{}class lV{}class uV{}class cV{}class Xw{}class Ww{}class Zw{}class fV{}class sh{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new sh;let s;const a=e;return n?s=W4(a):s=X4(a),Object.assign(i,s),i}}class eA{}class tA{}class nA{}class dV{}class hV{}class pV{}class iA{}class mV{get text(){var e,n,i;let s="",a=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,f]of Object.entries(c))h!=="text"&&h!=="thought"&&f!==null&&l.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,i;let s="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,h]of Object.entries(l))c!=="inlineData"&&h!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class gV{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ft(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Gb(t,e){const n=ft(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function jb(t){return Array.isArray(t)?t.map(e=>oh(e)):[oh(t)]}function oh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Yb(t){const e=oh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $b(t){const e=oh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rA(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Jb(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>rA(e)):[rA(t)]}function Zg(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function sA(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function oA(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function kn(t){if(t==null)throw new Error("ContentUnion is required");return Zg(t)?t:{role:"user",parts:Jb(t)}}function A_(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=kn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=kn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>kn(n)):[kn(e)]}function Ni(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(sA(t)||oA(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[kn(t)]}const e=[],n=[],i=Zg(t[0]);for(const s of t){const a=Zg(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(sA(s)||oA(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:Jb(n)}),e}function yV(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ft).includes(n[0].toUpperCase())?n[0].toUpperCase():Ft.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ft).includes(i.toUpperCase())?i.toUpperCase():Ft.TYPE_UNSPECIFIED})}}function ol(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&yV(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Ft).includes(c.toUpperCase())?c.toUpperCase():Ft.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=ol(c);else if(i.includes(l)){const h=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}h.push(ol(f))}e[l]=h}else if(s.includes(l)){const h={};for(const[f,p]of Object.entries(c))h[f]=ol(p);e[l]=h}else{if(l==="additionalProperties")continue;e[l]=c}return e}function x_(t){return ol(t)}function C_(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function b_(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ml(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ol(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ol(e.response));return t}function Dl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function _V(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function as(t,e){if(typeof e!="string")throw new Error("name must be a string");return _V(t,e,"cachedContents")}function Kb(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function uo(t){return w_(t)}function vV(t){return t!=null&&typeof t=="object"&&"name"in t}function TV(t){return t!=null&&typeof t=="object"&&"video"in t}function EV(t){return t!=null&&typeof t=="object"&&"uri"in t}function Qb(t){var e;let n;if(vV(t)&&(n=t.name),!(EV(t)&&(n=t.uri,n===void 0))&&!(TV(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Xb(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Wb(t){for(const e of["models","tunedModels","publisherModels"])if(SV(t,e))return t[e];return[]}function SV(t,e){return t!==null&&typeof t=="object"&&e in t}function wV(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function AV(t,e={}){const n=[],i=new Set;for(const s of t){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=wV(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Zb(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function xV(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function eI(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Pl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CV(t){const e={},n=m(t,["responsesFile"]);n!=null&&v(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>iU(l))),v(e,["inlinedResponses"],a)}const s=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),v(e,["inlinedEmbedContentResponses"],a)}return e}function bV(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&v(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&v(e,["gcsUri"],i);const s=m(t,["bigqueryDestination","outputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function IV(t){const e={},n=m(t,["format"]);n!=null&&v(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&v(e,["gcsDestination","outputUriPrefix"],i);const s=m(t,["bigqueryUri"]);if(s!=null&&v(e,["bigqueryDestination","outputUri"],s),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Md(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&v(e,["displayName"],i);const s=m(t,["metadata","state"]);s!=null&&v(e,["state"],tI(s));const a=m(t,["metadata","createTime"]);a!=null&&v(e,["createTime"],a);const l=m(t,["metadata","endTime"]);l!=null&&v(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&v(e,["updateTime"],c);const h=m(t,["metadata","model"]);h!=null&&v(e,["model"],h);const f=m(t,["metadata","output"]);return f!=null&&v(e,["dest"],CV(eI(f))),e}function ey(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["displayName"]);i!=null&&v(e,["displayName"],i);const s=m(t,["state"]);s!=null&&v(e,["state"],tI(s));const a=m(t,["error"]);a!=null&&v(e,["error"],a);const l=m(t,["createTime"]);l!=null&&v(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&v(e,["startTime"],c);const h=m(t,["endTime"]);h!=null&&v(e,["endTime"],h);const f=m(t,["updateTime"]);f!=null&&v(e,["updateTime"],f);const p=m(t,["model"]);p!=null&&v(e,["model"],p);const y=m(t,["inputConfig"]);y!=null&&v(e,["src"],RV(y));const E=m(t,["outputConfig"]);return E!=null&&v(e,["dest"],bV(eI(E))),e}function RV(t){const e={},n=m(t,["instancesFormat"]);n!=null&&v(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&v(e,["gcsUri"],i);const s=m(t,["bigquerySource","inputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function NV(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&v(n,["fileName"],i);const s=m(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>nU(t,l))),v(n,["requests","requests"],a)}return n}function kV(t){const e={},n=m(t,["format"]);n!=null&&v(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&v(e,["gcsSource","uris"],i);const s=m(t,["bigqueryUri"]);if(s!=null&&v(e,["bigquerySource","inputUri"],s),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function MV(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&v(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function DV(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Pl(t,i)),n}function PV(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Pl(t,i)),n}function LV(t){const e={},n=m(t,["content"]);n!=null&&v(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],VV(i));const s=m(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=m(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const l=m(t,["urlContextMetadata"]);l!=null&&v(e,["urlContextMetadata"],l);const c=m(t,["avgLogprobs"]);c!=null&&v(e,["avgLogprobs"],c);const h=m(t,["groundingMetadata"]);h!=null&&v(e,["groundingMetadata"],h);const f=m(t,["index"]);f!=null&&v(e,["index"],f);const p=m(t,["logprobsResult"]);p!=null&&v(e,["logprobsResult"],p);const y=m(t,["safetyRatings"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(w=>w)),v(e,["safetyRatings"],E)}return e}function VV(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),v(e,["citations"],i)}return e}function nI(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>cU(a))),v(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function UV(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&v(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function OV(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const s=m(t,["dest"]);return e!==void 0&&s!=null&&v(e,["outputConfig"],IV(xV(s))),n}function aA(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["src"]);s!=null&&v(n,["batch","inputConfig"],NV(t,Zb(t,s)));const a=m(e,["config"]);return a!=null&&UV(a,n),n}function FV(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["model"],ft(t,i));const s=m(e,["src"]);s!=null&&v(n,["inputConfig"],kV(Zb(t,s)));const a=m(e,["config"]);return a!=null&&OV(a,n),n}function zV(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&v(e,["batch","displayName"],i),n}function qV(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["src"]);s!=null&&v(n,["batch","inputConfig"],JV(t,s));const a=m(e,["config"]);return a!=null&&zV(a,n),n}function BV(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Pl(t,i)),n}function HV(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Pl(t,i)),n}function GV(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const s=m(t,["done"]);s!=null&&v(e,["done"],s);const a=m(t,["error"]);return a!=null&&v(e,["error"],a),e}function jV(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const s=m(t,["done"]);s!=null&&v(e,["done"],s);const a=m(t,["error"]);return a!=null&&v(e,["error"],a),e}function YV(t,e){const n={},i=m(e,["contents"]);if(i!=null){let a=A_(t,i);Array.isArray(a)&&(a=a.map(l=>l)),v(n,["requests[]","request","content"],a)}const s=m(e,["config"]);return s!=null&&(v(n,["_self"],$V(s,n)),K4(n,{"requests[].*":"requests[].request.*"})),n}function $V(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);const s=m(t,["title"]);e!==void 0&&s!=null&&v(e,["requests[]","title"],s);const a=m(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&v(e,["requests[]","outputDimensionality"],a),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function JV(t,e){const n={},i=m(e,["fileName"]);i!=null&&v(n,["file_name"],i);const s=m(e,["inlinedRequests"]);return s!=null&&v(n,["requests"],YV(t,s)),n}function KV(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function QV(t,e,n){const i={},s=m(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],nI(kn(s)));const a=m(e,["temperature"]);a!=null&&v(i,["temperature"],a);const l=m(e,["topP"]);l!=null&&v(i,["topP"],l);const c=m(e,["topK"]);c!=null&&v(i,["topK"],c);const h=m(e,["candidateCount"]);h!=null&&v(i,["candidateCount"],h);const f=m(e,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&v(i,["stopSequences"],p);const y=m(e,["responseLogprobs"]);y!=null&&v(i,["responseLogprobs"],y);const E=m(e,["logprobs"]);E!=null&&v(i,["logprobs"],E);const w=m(e,["presencePenalty"]);w!=null&&v(i,["presencePenalty"],w);const b=m(e,["frequencyPenalty"]);b!=null&&v(i,["frequencyPenalty"],b);const L=m(e,["seed"]);L!=null&&v(i,["seed"],L);const F=m(e,["responseMimeType"]);F!=null&&v(i,["responseMimeType"],F);const O=m(e,["responseSchema"]);O!=null&&v(i,["responseSchema"],x_(O));const H=m(e,["responseJsonSchema"]);if(H!=null&&v(i,["responseJsonSchema"],H),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=m(e,["safetySettings"]);if(n!==void 0&&B!=null){let z=B;Array.isArray(z)&&(z=z.map(k=>fU(k))),v(n,["safetySettings"],z)}const X=m(e,["tools"]);if(n!==void 0&&X!=null){let z=Dl(X);Array.isArray(z)&&(z=z.map(k=>dU(Ml(k)))),v(n,["tools"],z)}const ne=m(e,["toolConfig"]);if(n!==void 0&&ne!=null&&v(n,["toolConfig"],ne),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=m(e,["cachedContent"]);n!==void 0&&Y!=null&&v(n,["cachedContent"],as(t,Y));const R=m(e,["responseModalities"]);R!=null&&v(i,["responseModalities"],R);const P=m(e,["mediaResolution"]);P!=null&&v(i,["mediaResolution"],P);const D=m(e,["speechConfig"]);if(D!=null&&v(i,["speechConfig"],C_(D)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=m(e,["thinkingConfig"]);I!=null&&v(i,["thinkingConfig"],I);const U=m(e,["imageConfig"]);return U!=null&&v(i,["imageConfig"],U),i}function XV(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(f=>LV(f))),v(e,["candidates"],h)}const s=m(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=m(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const l=m(t,["responseId"]);l!=null&&v(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function WV(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Pl(t,i)),n}function ZV(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Pl(t,i)),n}function eU(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function tU(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&v(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function nU(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["request","model"],ft(t,i));const s=m(e,["contents"]);if(s!=null){let c=Ni(s);Array.isArray(c)&&(c=c.map(h=>nI(h))),v(n,["request","contents"],c)}const a=m(e,["metadata"]);a!=null&&v(n,["metadata"],a);const l=m(e,["config"]);return l!=null&&v(n,["request","generationConfig"],QV(t,l,m(n,["request"],{}))),n}function iU(t){const e={},n=m(t,["response"]);n!=null&&v(e,["response"],XV(n));const i=m(t,["error"]);return i!=null&&v(e,["error"],i),e}function rU(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);if(e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function sU(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=m(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),n}function oU(t){const e={},n=m(t,["config"]);return n!=null&&rU(n,e),e}function aU(t){const e={},n=m(t,["config"]);return n!=null&&sU(n,e),e}function lU(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const s=m(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Md(l))),v(e,["batchJobs"],a)}return e}function uU(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const s=m(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>ey(l))),v(e,["batchJobs"],a)}return e}function cU(t){const e={},n=m(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&v(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&v(e,["inlineData"],MV(s));const a=m(t,["fileData"]);a!=null&&v(e,["fileData"],KV(a));const l=m(t,["thoughtSignature"]);l!=null&&v(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&v(e,["functionCall"],c);const h=m(t,["codeExecutionResult"]);h!=null&&v(e,["codeExecutionResult"],h);const f=m(t,["executableCode"]);f!=null&&v(e,["executableCode"],f);const p=m(t,["functionResponse"]);p!=null&&v(e,["functionResponse"],p);const y=m(t,["text"]);return y!=null&&v(e,["text"],y),e}function fU(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&v(e,["category"],n);const i=m(t,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function dU(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),v(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&v(e,["googleSearch"],tU(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=m(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],eU(a));const l=m(t,["urlContext"]);l!=null&&v(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&v(e,["computerUse"],c);const h=m(t,["codeExecution"]);return h!=null&&v(e,["codeExecution"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Zo||(Zo={}));class Vc{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hU extends ia{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Vc(Zo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=aA(this.apiClient,e),i=n._url,s=Ce("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,h=c.requests,f=[];for(const p of h){const y=Object.assign({},p);if(y.systemInstruction){const E=y.systemInstruction;delete y.systemInstruction;const w=y.request;w.systemInstruction=E,y.request=w}f.push(y)}return c.requests=f,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=FV(this.apiClient,e);return c=Ce("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>ey(p))}else{const f=aA(this.apiClient,e);return c=Ce("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>Md(p))}}async createEmbeddingsInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qV(this.apiClient,e);return a=Ce("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>Md(h))}}async get(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=ZV(this.apiClient,e);return c=Ce("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>ey(p))}else{const f=WV(this.apiClient,e);return c=Ce("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>Md(p))}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const h=PV(this.apiClient,e);l=Ce("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=DV(this.apiClient,e);l=Ce("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=aU(e);return c=Ce("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=uU(p),E=new iA;return Object.assign(E,y),E})}else{const f=oU(e);return c=Ce("batches",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=lU(p),E=new iA;return Object.assign(E,y),E})}}async delete(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=HV(this.apiClient,e);return c=Ce("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>jV(p))}else{const f=BV(this.apiClient,e);return c=Ce("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>GV(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pU(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&v(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function lA(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>LU(a))),v(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function mU(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const s=m(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=m(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=Ni(l);Array.isArray(p)&&(p=p.map(y=>lA(y))),v(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&v(e,["systemInstruction"],lA(kn(c)));const h=m(t,["tools"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(y=>VU(y))),v(e,["tools"],p)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&v(e,["toolConfig"],f),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function gU(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const s=m(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=m(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let y=Ni(l);Array.isArray(y)&&(y=y.map(E=>E)),v(e,["contents"],y)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&v(e,["systemInstruction"],kn(c));const h=m(t,["tools"]);if(e!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(E=>UU(E))),v(e,["tools"],y)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&v(e,["toolConfig"],f);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&v(e,["encryption_spec","kmsKeyName"],p),n}function yU(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["model"],Gb(t,i));const s=m(e,["config"]);return s!=null&&mU(s,n),n}function _U(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["model"],Gb(t,i));const s=m(e,["config"]);return s!=null&&gU(s,n),n}function vU(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],as(t,i)),n}function TU(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],as(t,i)),n}function EU(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function SU(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function wU(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function AU(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&v(e,["description"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const s=m(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=m(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const l=m(t,["response"]);l!=null&&v(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function xU(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],as(t,i)),n}function CU(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],as(t,i)),n}function bU(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function IU(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&v(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function RU(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function NU(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function kU(t){const e={},n=m(t,["config"]);return n!=null&&RU(n,e),e}function MU(t){const e={},n=m(t,["config"]);return n!=null&&NU(n,e),e}function DU(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const s=m(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),v(e,["cachedContents"],a)}return e}function PU(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const s=m(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),v(e,["cachedContents"],a)}return e}function LU(t){const e={},n=m(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&v(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&v(e,["inlineData"],pU(s));const a=m(t,["fileData"]);a!=null&&v(e,["fileData"],wU(a));const l=m(t,["thoughtSignature"]);l!=null&&v(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&v(e,["functionCall"],c);const h=m(t,["codeExecutionResult"]);h!=null&&v(e,["codeExecutionResult"],h);const f=m(t,["executableCode"]);f!=null&&v(e,["executableCode"],f);const p=m(t,["functionResponse"]);p!=null&&v(e,["functionResponse"],p);const y=m(t,["text"]);return y!=null&&v(e,["text"],y),e}function VU(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),v(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&v(e,["googleSearch"],IU(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=m(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],bU(a));const l=m(t,["urlContext"]);l!=null&&v(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&v(e,["computerUse"],c);const h=m(t,["codeExecution"]);return h!=null&&v(e,["codeExecution"],h),e}function UU(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>AU(E))),v(e,["functionDeclarations"],y)}const i=m(t,["retrieval"]);i!=null&&v(e,["retrieval"],i);const s=m(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],s);const a=m(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],a);const l=m(t,["enterpriseWebSearch"]);l!=null&&v(e,["enterpriseWebSearch"],l);const c=m(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],c);const h=m(t,["urlContext"]);h!=null&&v(e,["urlContext"],h);const f=m(t,["computerUse"]);f!=null&&v(e,["computerUse"],f);const p=m(t,["codeExecution"]);return p!=null&&v(e,["codeExecution"],p),e}function OU(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const s=m(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),n}function FU(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const s=m(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),n}function zU(t,e){const n={},i=m(e,["name"]);i!=null&&v(n,["_url","name"],as(t,i));const s=m(e,["config"]);return s!=null&&OU(s,n),n}function qU(t,e){const n={},i=m(e,["name"]);i!=null&&v(n,["_url","name"],as(t,i));const s=m(e,["config"]);return s!=null&&FU(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BU extends ia{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vc(Zo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=_U(this.apiClient,e);return c=Ce("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=yU(this.apiClient,e);return c=Ce("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=CU(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=xU(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=TU(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=SU(p),E=new tA;return Object.assign(E,y),E})}else{const f=vU(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=EU(p),E=new tA;return Object.assign(E,y),E})}}async update(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=qU(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=zU(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=MU(e);return c=Ce("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=PU(p),E=new nA;return Object.assign(E,y),E})}else{const f=kU(e);return c=Ce("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=DU(p),E=new nA;return Object.assign(E,y),E})}}}function uA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function It(t){return this instanceof It?(this.v=t,this):new It(t)}function al(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(w){return function(b){return Promise.resolve(b).then(w,y)}}function c(w,b){i[w]&&(s[w]=function(L){return new Promise(function(F,O){a.push([w,L,F,O])>1||h(w,L)})},b&&(s[w]=b(s[w])))}function h(w,b){try{f(i[w](b))}catch(L){E(a[0][3],L)}}function f(w){w.value instanceof It?Promise.resolve(w.value.v).then(p,y):E(a[0][2],w)}function p(w){h("next",w)}function y(w){h("throw",w)}function E(w,b){w(b),a.shift(),a.length&&h(a[0][0],a[0][1])}}function nc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof uA=="function"?uA(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,h){l=t[a](l),s(c,h,l.done,l.value)})}}function s(a,l,c,h){Promise.resolve(h).then(function(f){a({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HU(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:iI(n)}function iI(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function GU(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function cA(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let a=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),a&&!iI(t[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class jU{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new YU(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let YU=class{constructor(e,n,i,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),GU(a)}async sendMessage(e){var n;await this.sendPromise;const i=kn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;const h=await s,f=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,p=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let E=[];p!=null&&(E=(c=p.slice(y))!==null&&c!==void 0?c:[]);const w=f?[f]:[];this.recordHistory(i,w,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=kn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?cA(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return al(this,arguments,function*(){var l,c,h,f;const p=[];try{for(var y=!0,E=nc(e),w;w=yield It(E.next()),l=w.done,!l;y=!0){f=w.value,y=!1;const b=f;if(HU(b)){const L=(s=(i=b.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;L!==void 0&&p.push(L)}yield yield It(b)}}catch(b){c={error:b}}finally{try{!y&&!l&&(h=E.return)&&(yield It(h.call(E)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...cA(i)):this.history.push(e),this.history.push(...s)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Lh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $U(t){const e={},n=m(t,["file"]);return n!=null&&v(e,["file"],n),e}function JU(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function KU(t){const e={},n=m(t,["name"]);return n!=null&&v(e,["_url","file"],Qb(n)),e}function QU(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function XU(t){const e={},n=m(t,["name"]);return n!=null&&v(e,["_url","file"],Qb(n)),e}function WU(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const s=m(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),n}function ZU(t){const e={},n=m(t,["config"]);return n!=null&&WU(n,e),e}function e3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const s=m(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),v(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t3 extends ia{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vc(Zo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ZU(e);return a=Ce("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=e3(h),p=new dV;return Object.assign(p,f),p})}}async createInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$U(e);return a=Ce("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const f=JU(h),p=new hV;return Object.assign(p,f),p})}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XU(e);return a=Ce("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KU(e);return a=Ce("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=QU(h),p=new pV;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dd(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&v(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function n3(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>y3(a))),v(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function i3(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function r3(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&v(e,["description"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const s=m(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=m(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const l=m(t,["response"]);l!=null&&v(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function s3(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&v(e,["modelConfig"],n);const i=m(t,["audioTimestamp"]);i!=null&&v(e,["audioTimestamp"],i);const s=m(t,["candidateCount"]);s!=null&&v(e,["candidateCount"],s);const a=m(t,["enableAffectiveDialog"]);a!=null&&v(e,["enableAffectiveDialog"],a);const l=m(t,["frequencyPenalty"]);l!=null&&v(e,["frequencyPenalty"],l);const c=m(t,["logprobs"]);c!=null&&v(e,["logprobs"],c);const h=m(t,["maxOutputTokens"]);h!=null&&v(e,["maxOutputTokens"],h);const f=m(t,["mediaResolution"]);f!=null&&v(e,["mediaResolution"],f);const p=m(t,["presencePenalty"]);p!=null&&v(e,["presencePenalty"],p);const y=m(t,["responseJsonSchema"]);y!=null&&v(e,["responseJsonSchema"],y);const E=m(t,["responseLogprobs"]);E!=null&&v(e,["responseLogprobs"],E);const w=m(t,["responseMimeType"]);w!=null&&v(e,["responseMimeType"],w);const b=m(t,["responseModalities"]);b!=null&&v(e,["responseModalities"],b);const L=m(t,["responseSchema"]);L!=null&&v(e,["responseSchema"],L);const F=m(t,["routingConfig"]);F!=null&&v(e,["routingConfig"],F);const O=m(t,["seed"]);O!=null&&v(e,["seed"],O);const H=m(t,["speechConfig"]);H!=null&&v(e,["speechConfig"],rI(H));const B=m(t,["stopSequences"]);B!=null&&v(e,["stopSequences"],B);const X=m(t,["temperature"]);X!=null&&v(e,["temperature"],X);const ne=m(t,["thinkingConfig"]);ne!=null&&v(e,["thinkingConfig"],ne);const Y=m(t,["topK"]);Y!=null&&v(e,["topK"],Y);const R=m(t,["topP"]);if(R!=null&&v(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function o3(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function a3(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&v(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function l3(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);const s=m(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=m(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const l=m(t,["topP"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);const h=m(t,["maxOutputTokens"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","seed"],p);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","speechConfig"],b_(y));const E=m(t,["thinkingConfig"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","thinkingConfig"],E);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],w);const b=m(t,["systemInstruction"]);e!==void 0&&b!=null&&v(e,["setup","systemInstruction"],n3(kn(b)));const L=m(t,["tools"]);if(e!==void 0&&L!=null){let Y=Dl(L);Array.isArray(Y)&&(Y=Y.map(R=>v3(Ml(R)))),v(e,["setup","tools"],Y)}const F=m(t,["sessionResumption"]);e!==void 0&&F!=null&&v(e,["setup","sessionResumption"],_3(F));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&v(e,["setup","inputAudioTranscription"],O);const H=m(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&v(e,["setup","outputAudioTranscription"],H);const B=m(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&v(e,["setup","realtimeInputConfig"],B);const X=m(t,["contextWindowCompression"]);e!==void 0&&X!=null&&v(e,["setup","contextWindowCompression"],X);const ne=m(t,["proactivity"]);return e!==void 0&&ne!=null&&v(e,["setup","proactivity"],ne),n}function u3(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],s3(i));const s=m(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=m(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const l=m(t,["topP"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);const h=m(t,["maxOutputTokens"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","seed"],p);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","speechConfig"],rI(b_(y)));const E=m(t,["thinkingConfig"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","thinkingConfig"],E);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],w);const b=m(t,["systemInstruction"]);e!==void 0&&b!=null&&v(e,["setup","systemInstruction"],kn(b));const L=m(t,["tools"]);if(e!==void 0&&L!=null){let Y=Dl(L);Array.isArray(Y)&&(Y=Y.map(R=>T3(Ml(R)))),v(e,["setup","tools"],Y)}const F=m(t,["sessionResumption"]);e!==void 0&&F!=null&&v(e,["setup","sessionResumption"],F);const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&v(e,["setup","inputAudioTranscription"],O);const H=m(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&v(e,["setup","outputAudioTranscription"],H);const B=m(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&v(e,["setup","realtimeInputConfig"],B);const X=m(t,["contextWindowCompression"]);e!==void 0&&X!=null&&v(e,["setup","contextWindowCompression"],X);const ne=m(t,["proactivity"]);return e!==void 0&&ne!=null&&v(e,["setup","proactivity"],ne),n}function c3(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["setup","model"],ft(t,i));const s=m(e,["config"]);return s!=null&&v(n,["config"],l3(s,n)),n}function f3(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["setup","model"],ft(t,i));const s=m(e,["config"]);return s!=null&&v(n,["config"],u3(s,n)),n}function d3(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],n),e}function h3(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),v(e,["weightedPrompts"],i)}return e}function p3(t){const e={},n=m(t,["media"]);if(n!=null){let f=jb(n);Array.isArray(f)&&(f=f.map(p=>Dd(p))),v(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&v(e,["audio"],Dd($b(i)));const s=m(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=m(t,["video"]);a!=null&&v(e,["video"],Dd(Yb(a)));const l=m(t,["text"]);l!=null&&v(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&v(e,["activityStart"],c);const h=m(t,["activityEnd"]);return h!=null&&v(e,["activityEnd"],h),e}function m3(t){const e={},n=m(t,["media"]);if(n!=null){let f=jb(n);Array.isArray(f)&&(f=f.map(p=>p)),v(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&v(e,["audio"],$b(i));const s=m(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=m(t,["video"]);a!=null&&v(e,["video"],Yb(a));const l=m(t,["text"]);l!=null&&v(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&v(e,["activityStart"],c);const h=m(t,["activityEnd"]);return h!=null&&v(e,["activityEnd"],h),e}function g3(t){const e={},n=m(t,["setupComplete"]);n!=null&&v(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&v(e,["serverContent"],i);const s=m(t,["toolCall"]);s!=null&&v(e,["toolCall"],s);const a=m(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],a);const l=m(t,["usageMetadata"]);l!=null&&v(e,["usageMetadata"],E3(l));const c=m(t,["goAway"]);c!=null&&v(e,["goAway"],c);const h=m(t,["sessionResumptionUpdate"]);return h!=null&&v(e,["sessionResumptionUpdate"],h),e}function y3(t){const e={},n=m(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&v(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&v(e,["inlineData"],Dd(s));const a=m(t,["fileData"]);a!=null&&v(e,["fileData"],i3(a));const l=m(t,["thoughtSignature"]);l!=null&&v(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&v(e,["functionCall"],c);const h=m(t,["codeExecutionResult"]);h!=null&&v(e,["codeExecutionResult"],h);const f=m(t,["executableCode"]);f!=null&&v(e,["executableCode"],f);const p=m(t,["functionResponse"]);p!=null&&v(e,["functionResponse"],p);const y=m(t,["text"]);return y!=null&&v(e,["text"],y),e}function _3(t){const e={},n=m(t,["handle"]);if(n!=null&&v(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rI(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&v(e,["voiceConfig"],n),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=m(t,["languageCode"]);return i!=null&&v(e,["languageCode"],i),e}function v3(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),v(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&v(e,["googleSearch"],a3(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=m(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],o3(a));const l=m(t,["urlContext"]);l!=null&&v(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&v(e,["computerUse"],c);const h=m(t,["codeExecution"]);return h!=null&&v(e,["codeExecution"],h),e}function T3(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>r3(E))),v(e,["functionDeclarations"],y)}const i=m(t,["retrieval"]);i!=null&&v(e,["retrieval"],i);const s=m(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],s);const a=m(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],a);const l=m(t,["enterpriseWebSearch"]);l!=null&&v(e,["enterpriseWebSearch"],l);const c=m(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],c);const h=m(t,["urlContext"]);h!=null&&v(e,["urlContext"],h);const f=m(t,["computerUse"]);f!=null&&v(e,["computerUse"],f);const p=m(t,["codeExecution"]);return p!=null&&v(e,["codeExecution"],p),e}function E3(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&v(e,["cachedContentTokenCount"],i);const s=m(t,["candidatesTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=m(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const l=m(t,["thoughtsTokenCount"]);l!=null&&v(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&v(e,["totalTokenCount"],c);const h=m(t,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(b=>b)),v(e,["promptTokensDetails"],w)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(b=>b)),v(e,["cacheTokensDetails"],w)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(b=>b)),v(e,["responseTokensDetails"],w)}const y=m(t,["toolUsePromptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(b=>b)),v(e,["toolUsePromptTokensDetails"],w)}const E=m(t,["trafficType"]);return E!=null&&v(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S3(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&v(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function w3(t){const e={},n=m(t,["content"]);n!=null&&v(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],A3(i));const s=m(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=m(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const l=m(t,["urlContextMetadata"]);l!=null&&v(e,["urlContextMetadata"],l);const c=m(t,["avgLogprobs"]);c!=null&&v(e,["avgLogprobs"],c);const h=m(t,["groundingMetadata"]);h!=null&&v(e,["groundingMetadata"],h);const f=m(t,["index"]);f!=null&&v(e,["index"],f);const p=m(t,["logprobsResult"]);p!=null&&v(e,["logprobsResult"],p);const y=m(t,["safetyRatings"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(w=>w)),v(e,["safetyRatings"],E)}return e}function A3(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),v(e,["citations"],i)}return e}function x3(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["contents"]);if(s!=null){let a=Ni(s);Array.isArray(a)&&(a=a.map(l=>l)),v(n,["contents"],a)}return n}function C3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["tokensInfo"],s)}return e}function b3(t){const e={},n=m(t,["values"]);n!=null&&v(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&v(e,["statistics"],I3(i)),e}function I3(t){const e={},n=m(t,["truncated"]);n!=null&&v(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&v(e,["tokenCount"],i),e}function Vh(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>DO(a))),v(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function R3(t){const e={},n=m(t,["controlType"]);n!=null&&v(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&v(e,["computeControl"],i),e}function N3(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function k3(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&v(e,["systemInstruction"],kn(i));const s=m(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>uI(c))),v(e,["tools"],l)}const a=m(t,["generationConfig"]);return e!==void 0&&a!=null&&v(e,["generationConfig"],TO(a)),n}function M3(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["contents"]);if(s!=null){let l=Ni(s);Array.isArray(l)&&(l=l.map(c=>Vh(c))),v(n,["contents"],l)}const a=m(e,["config"]);return a!=null&&N3(a),n}function D3(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["contents"]);if(s!=null){let l=Ni(s);Array.isArray(l)&&(l=l.map(c=>c)),v(n,["contents"],l)}const a=m(e,["config"]);return a!=null&&k3(a,n),n}function P3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&v(e,["totalTokens"],i);const s=m(t,["cachedContentTokenCount"]);return s!=null&&v(e,["cachedContentTokenCount"],s),e}function L3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&v(e,["totalTokens"],i),e}function V3(t,e){const n={},i=m(e,["model"]);return i!=null&&v(n,["_url","name"],ft(t,i)),n}function U3(t,e){const n={},i=m(e,["model"]);return i!=null&&v(n,["_url","name"],ft(t,i)),n}function O3(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function F3(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function z3(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const s=m(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=m(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&v(e,["parameters","guidanceScale"],c);const h=m(t,["seed"]);e!==void 0&&h!=null&&v(e,["parameters","seed"],h);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&v(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&v(e,["parameters","personGeneration"],p);const y=m(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&v(e,["parameters","includeSafetyAttributes"],y);const E=m(t,["includeRaiReason"]);e!==void 0&&E!=null&&v(e,["parameters","includeRaiReason"],E);const w=m(t,["language"]);e!==void 0&&w!=null&&v(e,["parameters","language"],w);const b=m(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const L=m(t,["outputCompressionQuality"]);e!==void 0&&L!=null&&v(e,["parameters","outputOptions","compressionQuality"],L);const F=m(t,["addWatermark"]);e!==void 0&&F!=null&&v(e,["parameters","addWatermark"],F);const O=m(t,["labels"]);e!==void 0&&O!=null&&v(e,["labels"],O);const H=m(t,["editMode"]);e!==void 0&&H!=null&&v(e,["parameters","editMode"],H);const B=m(t,["baseSteps"]);return e!==void 0&&B!=null&&v(e,["parameters","editConfig","baseSteps"],B),n}function q3(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=m(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>FO(h))),v(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&z3(l,n),n}function B3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Uh(a))),v(e,["generatedImages"],s)}return e}function H3(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);const s=m(t,["title"]);e!==void 0&&s!=null&&v(e,["requests[]","title"],s);const a=m(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&v(e,["requests[]","outputDimensionality"],a),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function G3(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&v(e,["instances[]","task_type"],i);const s=m(t,["title"]);e!==void 0&&s!=null&&v(e,["instances[]","title"],s);const a=m(t,["outputDimensionality"]);e!==void 0&&a!=null&&v(e,["parameters","outputDimensionality"],a);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&v(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&v(e,["parameters","autoTruncate"],c),n}function j3(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["contents"]);if(s!=null){let c=A_(t,s);Array.isArray(c)&&(c=c.map(h=>h)),v(n,["requests[]","content"],c)}const a=m(e,["config"]);a!=null&&H3(a,n);const l=m(e,["model"]);return l!==void 0&&v(n,["requests[]","model"],ft(t,l)),n}function Y3(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["contents"]);if(s!=null){let l=A_(t,s);Array.isArray(l)&&(l=l.map(c=>c)),v(n,["instances[]","content"],l)}const a=m(e,["config"]);return a!=null&&G3(a,n),n}function $3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),v(e,["embeddings"],a)}const s=m(t,["metadata"]);return s!=null&&v(e,["metadata"],s),e}function J3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>b3(l))),v(e,["embeddings"],a)}const s=m(t,["metadata"]);return s!=null&&v(e,["metadata"],s),e}function K3(t){const e={},n=m(t,["endpoint"]);n!=null&&v(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&v(e,["deployedModelId"],i),e}function Q3(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function X3(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&v(e,["description"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const s=m(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=m(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const l=m(t,["response"]);l!=null&&v(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function W3(t,e,n){const i={},s=m(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],Vh(kn(s)));const a=m(e,["temperature"]);a!=null&&v(i,["temperature"],a);const l=m(e,["topP"]);l!=null&&v(i,["topP"],l);const c=m(e,["topK"]);c!=null&&v(i,["topK"],c);const h=m(e,["candidateCount"]);h!=null&&v(i,["candidateCount"],h);const f=m(e,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&v(i,["stopSequences"],p);const y=m(e,["responseLogprobs"]);y!=null&&v(i,["responseLogprobs"],y);const E=m(e,["logprobs"]);E!=null&&v(i,["logprobs"],E);const w=m(e,["presencePenalty"]);w!=null&&v(i,["presencePenalty"],w);const b=m(e,["frequencyPenalty"]);b!=null&&v(i,["frequencyPenalty"],b);const L=m(e,["seed"]);L!=null&&v(i,["seed"],L);const F=m(e,["responseMimeType"]);F!=null&&v(i,["responseMimeType"],F);const O=m(e,["responseSchema"]);O!=null&&v(i,["responseSchema"],x_(O));const H=m(e,["responseJsonSchema"]);if(H!=null&&v(i,["responseJsonSchema"],H),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=m(e,["safetySettings"]);if(n!==void 0&&B!=null){let z=B;Array.isArray(z)&&(z=z.map(k=>zO(k))),v(n,["safetySettings"],z)}const X=m(e,["tools"]);if(n!==void 0&&X!=null){let z=Dl(X);Array.isArray(z)&&(z=z.map(k=>YO(Ml(k)))),v(n,["tools"],z)}const ne=m(e,["toolConfig"]);if(n!==void 0&&ne!=null&&v(n,["toolConfig"],ne),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=m(e,["cachedContent"]);n!==void 0&&Y!=null&&v(n,["cachedContent"],as(t,Y));const R=m(e,["responseModalities"]);R!=null&&v(i,["responseModalities"],R);const P=m(e,["mediaResolution"]);P!=null&&v(i,["mediaResolution"],P);const D=m(e,["speechConfig"]);if(D!=null&&v(i,["speechConfig"],C_(D)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=m(e,["thinkingConfig"]);I!=null&&v(i,["thinkingConfig"],I);const U=m(e,["imageConfig"]);return U!=null&&v(i,["imageConfig"],U),i}function Z3(t,e,n){const i={},s=m(e,["systemInstruction"]);n!==void 0&&s!=null&&v(n,["systemInstruction"],kn(s));const a=m(e,["temperature"]);a!=null&&v(i,["temperature"],a);const l=m(e,["topP"]);l!=null&&v(i,["topP"],l);const c=m(e,["topK"]);c!=null&&v(i,["topK"],c);const h=m(e,["candidateCount"]);h!=null&&v(i,["candidateCount"],h);const f=m(e,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&v(i,["stopSequences"],p);const y=m(e,["responseLogprobs"]);y!=null&&v(i,["responseLogprobs"],y);const E=m(e,["logprobs"]);E!=null&&v(i,["logprobs"],E);const w=m(e,["presencePenalty"]);w!=null&&v(i,["presencePenalty"],w);const b=m(e,["frequencyPenalty"]);b!=null&&v(i,["frequencyPenalty"],b);const L=m(e,["seed"]);L!=null&&v(i,["seed"],L);const F=m(e,["responseMimeType"]);F!=null&&v(i,["responseMimeType"],F);const O=m(e,["responseSchema"]);O!=null&&v(i,["responseSchema"],x_(O));const H=m(e,["responseJsonSchema"]);H!=null&&v(i,["responseJsonSchema"],H);const B=m(e,["routingConfig"]);B!=null&&v(i,["routingConfig"],B);const X=m(e,["modelSelectionConfig"]);X!=null&&v(i,["modelConfig"],X);const ne=m(e,["safetySettings"]);if(n!==void 0&&ne!=null){let K=ne;Array.isArray(K)&&(K=K.map(he=>he)),v(n,["safetySettings"],K)}const Y=m(e,["tools"]);if(n!==void 0&&Y!=null){let K=Dl(Y);Array.isArray(K)&&(K=K.map(he=>uI(Ml(he)))),v(n,["tools"],K)}const R=m(e,["toolConfig"]);n!==void 0&&R!=null&&v(n,["toolConfig"],R);const P=m(e,["labels"]);n!==void 0&&P!=null&&v(n,["labels"],P);const D=m(e,["cachedContent"]);n!==void 0&&D!=null&&v(n,["cachedContent"],as(t,D));const I=m(e,["responseModalities"]);I!=null&&v(i,["responseModalities"],I);const U=m(e,["mediaResolution"]);U!=null&&v(i,["mediaResolution"],U);const z=m(e,["speechConfig"]);z!=null&&v(i,["speechConfig"],lI(C_(z)));const k=m(e,["audioTimestamp"]);k!=null&&v(i,["audioTimestamp"],k);const oe=m(e,["thinkingConfig"]);oe!=null&&v(i,["thinkingConfig"],oe);const me=m(e,["imageConfig"]);return me!=null&&v(i,["imageConfig"],me),i}function fA(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["contents"]);if(s!=null){let l=Ni(s);Array.isArray(l)&&(l=l.map(c=>Vh(c))),v(n,["contents"],l)}const a=m(e,["config"]);return a!=null&&v(n,["generationConfig"],W3(t,a,n)),n}function dA(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["contents"]);if(s!=null){let l=Ni(s);Array.isArray(l)&&(l=l.map(c=>c)),v(n,["contents"],l)}const a=m(e,["config"]);return a!=null&&v(n,["generationConfig"],Z3(t,a,n)),n}function hA(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(f=>w3(f))),v(e,["candidates"],h)}const s=m(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=m(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const l=m(t,["responseId"]);l!=null&&v(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function pA(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),v(e,["candidates"],f)}const s=m(t,["createTime"]);s!=null&&v(e,["createTime"],s);const a=m(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const l=m(t,["promptFeedback"]);l!=null&&v(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&v(e,["responseId"],c);const h=m(t,["usageMetadata"]);return h!=null&&v(e,["usageMetadata"],h),e}function eO(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s);const a=m(t,["guidanceScale"]);if(e!==void 0&&a!=null&&v(e,["parameters","guidanceScale"],a),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&v(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&v(e,["parameters","personGeneration"],c);const h=m(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&v(e,["parameters","includeRaiReason"],f);const p=m(t,["language"]);e!==void 0&&p!=null&&v(e,["parameters","language"],p);const y=m(t,["outputMimeType"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","mimeType"],y);const E=m(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&v(e,["parameters","outputOptions","compressionQuality"],E),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=m(t,["imageSize"]);if(e!==void 0&&w!=null&&v(e,["parameters","sampleImageSize"],w),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function tO(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const s=m(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=m(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&v(e,["parameters","guidanceScale"],c);const h=m(t,["seed"]);e!==void 0&&h!=null&&v(e,["parameters","seed"],h);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&v(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&v(e,["parameters","personGeneration"],p);const y=m(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&v(e,["parameters","includeSafetyAttributes"],y);const E=m(t,["includeRaiReason"]);e!==void 0&&E!=null&&v(e,["parameters","includeRaiReason"],E);const w=m(t,["language"]);e!==void 0&&w!=null&&v(e,["parameters","language"],w);const b=m(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const L=m(t,["outputCompressionQuality"]);e!==void 0&&L!=null&&v(e,["parameters","outputOptions","compressionQuality"],L);const F=m(t,["addWatermark"]);e!==void 0&&F!=null&&v(e,["parameters","addWatermark"],F);const O=m(t,["labels"]);e!==void 0&&O!=null&&v(e,["labels"],O);const H=m(t,["imageSize"]);e!==void 0&&H!=null&&v(e,["parameters","sampleImageSize"],H);const B=m(t,["enhancePrompt"]);return e!==void 0&&B!=null&&v(e,["parameters","enhancePrompt"],B),n}function nO(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=m(e,["config"]);return a!=null&&eO(a,n),n}function iO(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=m(e,["config"]);return a!=null&&tO(a,n),n}function rO(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>gO(l))),v(e,["generatedImages"],a)}const s=m(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],oI(s)),e}function sO(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Uh(l))),v(e,["generatedImages"],a)}const s=m(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],aI(s)),e}function oO(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=m(t,["durationSeconds"]);if(e!==void 0&&s!=null&&v(e,["parameters","durationSeconds"],s),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=m(t,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);const l=m(t,["resolution"]);e!==void 0&&l!=null&&v(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&v(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=m(t,["negativePrompt"]);e!==void 0&&h!=null&&v(e,["parameters","negativePrompt"],h);const f=m(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&v(e,["parameters","enhancePrompt"],f),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&v(e,["instances[0]","lastFrame"],Oh(p));const y=m(t,["referenceImages"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(w=>s6(w))),v(e,["instances[0]","referenceImages"],E)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function aO(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const s=m(t,["outputGcsUri"]);e!==void 0&&s!=null&&v(e,["parameters","storageUri"],s);const a=m(t,["fps"]);e!==void 0&&a!=null&&v(e,["parameters","fps"],a);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&v(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&v(e,["parameters","seed"],c);const h=m(t,["aspectRatio"]);e!==void 0&&h!=null&&v(e,["parameters","aspectRatio"],h);const f=m(t,["resolution"]);e!==void 0&&f!=null&&v(e,["parameters","resolution"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&v(e,["parameters","personGeneration"],p);const y=m(t,["pubsubTopic"]);e!==void 0&&y!=null&&v(e,["parameters","pubsubTopic"],y);const E=m(t,["negativePrompt"]);e!==void 0&&E!=null&&v(e,["parameters","negativePrompt"],E);const w=m(t,["enhancePrompt"]);e!==void 0&&w!=null&&v(e,["parameters","enhancePrompt"],w);const b=m(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const L=m(t,["lastFrame"]);e!==void 0&&L!=null&&v(e,["instances[0]","lastFrame"],Ki(L));const F=m(t,["referenceImages"]);if(e!==void 0&&F!=null){let B=F;Array.isArray(B)&&(B=B.map(X=>o6(X))),v(e,["instances[0]","referenceImages"],B)}const O=m(t,["mask"]);e!==void 0&&O!=null&&v(e,["instances[0]","mask"],r6(O));const H=m(t,["compressionQuality"]);return e!==void 0&&H!=null&&v(e,["parameters","compressionQuality"],H),n}function lO(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const s=m(t,["done"]);s!=null&&v(e,["done"],s);const a=m(t,["error"]);a!=null&&v(e,["error"],a);const l=m(t,["response","generateVideoResponse"]);return l!=null&&v(e,["response"],dO(l)),e}function uO(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const s=m(t,["done"]);s!=null&&v(e,["done"],s);const a=m(t,["error"]);a!=null&&v(e,["error"],a);const l=m(t,["response"]);return l!=null&&v(e,["response"],hO(l)),e}function cO(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=m(e,["image"]);a!=null&&v(n,["instances[0]","image"],Oh(a));const l=m(e,["video"]);l!=null&&v(n,["instances[0]","video"],cI(l));const c=m(e,["source"]);c!=null&&pO(c,n);const h=m(e,["config"]);return h!=null&&oO(h,n),n}function fO(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["prompt"]);s!=null&&v(n,["instances[0]","prompt"],s);const a=m(e,["image"]);a!=null&&v(n,["instances[0]","image"],Ki(a));const l=m(e,["video"]);l!=null&&v(n,["instances[0]","video"],fI(l));const c=m(e,["source"]);c!=null&&mO(c,n);const h=m(e,["config"]);return h!=null&&aO(h,n),n}function dO(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>_O(l))),v(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const s=m(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function hO(t){const e={},n=m(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>vO(l))),v(e,["generatedVideos"],a)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const s=m(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function pO(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const s=m(t,["image"]);e!==void 0&&s!=null&&v(e,["instances[0]","image"],Oh(s));const a=m(t,["video"]);return e!==void 0&&a!=null&&v(e,["instances[0]","video"],cI(a)),n}function mO(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const s=m(t,["image"]);e!==void 0&&s!=null&&v(e,["instances[0]","image"],Ki(s));const a=m(t,["video"]);return e!==void 0&&a!=null&&v(e,["instances[0]","video"],fI(a)),n}function gO(t){const e={},n=m(t,["_self"]);n!=null&&v(e,["image"],xO(n));const i=m(t,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);const s=m(t,["_self"]);return s!=null&&v(e,["safetyAttributes"],oI(s)),e}function Uh(t){const e={},n=m(t,["_self"]);n!=null&&v(e,["image"],sI(n));const i=m(t,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);const s=m(t,["_self"]);s!=null&&v(e,["safetyAttributes"],aI(s));const a=m(t,["prompt"]);return a!=null&&v(e,["enhancedPrompt"],a),e}function yO(t){const e={},n=m(t,["_self"]);n!=null&&v(e,["mask"],sI(n));const i=m(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["labels"],s)}return e}function _O(t){const e={},n=m(t,["video"]);return n!=null&&v(e,["video"],n6(n)),e}function vO(t){const e={},n=m(t,["_self"]);return n!=null&&v(e,["video"],i6(n)),e}function TO(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&v(e,["modelConfig"],n);const i=m(t,["audioTimestamp"]);i!=null&&v(e,["audioTimestamp"],i);const s=m(t,["candidateCount"]);s!=null&&v(e,["candidateCount"],s);const a=m(t,["enableAffectiveDialog"]);a!=null&&v(e,["enableAffectiveDialog"],a);const l=m(t,["frequencyPenalty"]);l!=null&&v(e,["frequencyPenalty"],l);const c=m(t,["logprobs"]);c!=null&&v(e,["logprobs"],c);const h=m(t,["maxOutputTokens"]);h!=null&&v(e,["maxOutputTokens"],h);const f=m(t,["mediaResolution"]);f!=null&&v(e,["mediaResolution"],f);const p=m(t,["presencePenalty"]);p!=null&&v(e,["presencePenalty"],p);const y=m(t,["responseJsonSchema"]);y!=null&&v(e,["responseJsonSchema"],y);const E=m(t,["responseLogprobs"]);E!=null&&v(e,["responseLogprobs"],E);const w=m(t,["responseMimeType"]);w!=null&&v(e,["responseMimeType"],w);const b=m(t,["responseModalities"]);b!=null&&v(e,["responseModalities"],b);const L=m(t,["responseSchema"]);L!=null&&v(e,["responseSchema"],L);const F=m(t,["routingConfig"]);F!=null&&v(e,["routingConfig"],F);const O=m(t,["seed"]);O!=null&&v(e,["seed"],O);const H=m(t,["speechConfig"]);H!=null&&v(e,["speechConfig"],lI(H));const B=m(t,["stopSequences"]);B!=null&&v(e,["stopSequences"],B);const X=m(t,["temperature"]);X!=null&&v(e,["temperature"],X);const ne=m(t,["thinkingConfig"]);ne!=null&&v(e,["thinkingConfig"],ne);const Y=m(t,["topK"]);Y!=null&&v(e,["topK"],Y);const R=m(t,["topP"]);if(R!=null&&v(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function EO(t,e){const n={},i=m(e,["model"]);return i!=null&&v(n,["_url","name"],ft(t,i)),n}function SO(t,e){const n={},i=m(e,["model"]);return i!=null&&v(n,["_url","name"],ft(t,i)),n}function wO(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function AO(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&v(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function xO(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],uo(n));const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function sI(t){const e={},n=m(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&v(e,["imageBytes"],uo(i));const s=m(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Oh(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],uo(n));const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function Ki(t){const e={},n=m(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&v(e,["bytesBase64Encoded"],uo(i));const s=m(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function CO(t,e,n){const i={},s=m(e,["pageSize"]);n!==void 0&&s!=null&&v(n,["_query","pageSize"],s);const a=m(e,["pageToken"]);n!==void 0&&a!=null&&v(n,["_query","pageToken"],a);const l=m(e,["filter"]);n!==void 0&&l!=null&&v(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&v(n,["_url","models_url"],Xb(t,c)),i}function bO(t,e,n){const i={},s=m(e,["pageSize"]);n!==void 0&&s!=null&&v(n,["_query","pageSize"],s);const a=m(e,["pageToken"]);n!==void 0&&a!=null&&v(n,["_query","pageToken"],a);const l=m(e,["filter"]);n!==void 0&&l!=null&&v(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&v(n,["_url","models_url"],Xb(t,c)),i}function IO(t,e){const n={},i=m(e,["config"]);return i!=null&&CO(t,i,n),n}function RO(t,e){const n={},i=m(e,["config"]);return i!=null&&bO(t,i,n),n}function NO(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const s=m(t,["_self"]);if(s!=null){let a=Wb(s);Array.isArray(a)&&(a=a.map(l=>ty(l))),v(e,["models"],a)}return e}function kO(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const s=m(t,["_self"]);if(s!=null){let a=Wb(s);Array.isArray(a)&&(a=a.map(l=>ny(l))),v(e,["models"],a)}return e}function MO(t){const e={},n=m(t,["maskMode"]);n!=null&&v(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&v(e,["maskClasses"],i);const s=m(t,["maskDilation"]);return s!=null&&v(e,["dilation"],s),e}function ty(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["displayName"]);i!=null&&v(e,["displayName"],i);const s=m(t,["description"]);s!=null&&v(e,["description"],s);const a=m(t,["version"]);a!=null&&v(e,["version"],a);const l=m(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],$O(l));const c=m(t,["inputTokenLimit"]);c!=null&&v(e,["inputTokenLimit"],c);const h=m(t,["outputTokenLimit"]);h!=null&&v(e,["outputTokenLimit"],h);const f=m(t,["supportedGenerationMethods"]);return f!=null&&v(e,["supportedActions"],f),e}function ny(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["displayName"]);i!=null&&v(e,["displayName"],i);const s=m(t,["description"]);s!=null&&v(e,["description"],s);const a=m(t,["versionId"]);a!=null&&v(e,["version"],a);const l=m(t,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(E=>K3(E))),v(e,["endpoints"],y)}const c=m(t,["labels"]);c!=null&&v(e,["labels"],c);const h=m(t,["_self"]);h!=null&&v(e,["tunedModelInfo"],JO(h));const f=m(t,["defaultCheckpointId"]);f!=null&&v(e,["defaultCheckpointId"],f);const p=m(t,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(E=>E)),v(e,["checkpoints"],y)}return e}function DO(t){const e={},n=m(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&v(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&v(e,["inlineData"],S3(s));const a=m(t,["fileData"]);a!=null&&v(e,["fileData"],Q3(a));const l=m(t,["thoughtSignature"]);l!=null&&v(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&v(e,["functionCall"],c);const h=m(t,["codeExecutionResult"]);h!=null&&v(e,["codeExecutionResult"],h);const f=m(t,["executableCode"]);f!=null&&v(e,["executableCode"],f);const p=m(t,["functionResponse"]);p!=null&&v(e,["functionResponse"],p);const y=m(t,["text"]);return y!=null&&v(e,["text"],y),e}function PO(t){const e={},n=m(t,["productImage"]);return n!=null&&v(e,["image"],Ki(n)),e}function LO(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const s=m(t,["baseSteps"]);e!==void 0&&s!=null&&v(e,["parameters","editConfig","baseSteps"],s);const a=m(t,["outputGcsUri"]);e!==void 0&&a!=null&&v(e,["parameters","storageUri"],a);const l=m(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&v(e,["parameters","safetySetting"],c);const h=m(t,["personGeneration"]);e!==void 0&&h!=null&&v(e,["parameters","personGeneration"],h);const f=m(t,["addWatermark"]);e!==void 0&&f!=null&&v(e,["parameters","addWatermark"],f);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&v(e,["parameters","outputOptions","mimeType"],p);const y=m(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const E=m(t,["enhancePrompt"]);e!==void 0&&E!=null&&v(e,["parameters","enhancePrompt"],E);const w=m(t,["labels"]);return e!==void 0&&w!=null&&v(e,["labels"],w),n}function VO(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["source"]);s!=null&&OO(s,n);const a=m(e,["config"]);return a!=null&&LO(a,n),n}function UO(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Uh(s))),v(e,["generatedImages"],i)}return e}function OO(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const s=m(t,["personImage"]);e!==void 0&&s!=null&&v(e,["instances[0]","personImage","image"],Ki(s));const a=m(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>PO(c))),v(e,["instances[0]","productImages"],l)}return n}function FO(t){const e={},n=m(t,["referenceImage"]);n!=null&&v(e,["referenceImage"],Ki(n));const i=m(t,["referenceId"]);i!=null&&v(e,["referenceId"],i);const s=m(t,["referenceType"]);s!=null&&v(e,["referenceType"],s);const a=m(t,["maskImageConfig"]);a!=null&&v(e,["maskImageConfig"],MO(a));const l=m(t,["controlImageConfig"]);l!=null&&v(e,["controlImageConfig"],R3(l));const c=m(t,["styleImageConfig"]);c!=null&&v(e,["styleImageConfig"],c);const h=m(t,["subjectImageConfig"]);return h!=null&&v(e,["subjectImageConfig"],h),e}function oI(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);const s=m(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function aI(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);const s=m(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function zO(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&v(e,["category"],n);const i=m(t,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function qO(t){const e={},n=m(t,["image"]);return n!=null&&v(e,["image"],Ki(n)),e}function BO(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&v(e,["parameters","mode"],i);const s=m(t,["maxPredictions"]);e!==void 0&&s!=null&&v(e,["parameters","maxPredictions"],s);const a=m(t,["confidenceThreshold"]);e!==void 0&&a!=null&&v(e,["parameters","confidenceThreshold"],a);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&v(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&v(e,["parameters","binaryColorThreshold"],c);const h=m(t,["labels"]);return e!==void 0&&h!=null&&v(e,["labels"],h),n}function HO(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["source"]);s!=null&&jO(s,n);const a=m(e,["config"]);return a!=null&&BO(a,n),n}function GO(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>yO(s))),v(e,["generatedMasks"],i)}return e}function jO(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const s=m(t,["image"]);e!==void 0&&s!=null&&v(e,["instances[0]","image"],Ki(s));const a=m(t,["scribbleImage"]);return e!==void 0&&a!=null&&v(e,["instances[0]","scribble"],qO(a)),n}function lI(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&v(e,["voiceConfig"],n),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=m(t,["languageCode"]);return i!=null&&v(e,["languageCode"],i),e}function YO(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),v(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&v(e,["googleSearch"],AO(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=m(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],wO(a));const l=m(t,["urlContext"]);l!=null&&v(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&v(e,["computerUse"],c);const h=m(t,["codeExecution"]);return h!=null&&v(e,["codeExecution"],h),e}function uI(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>X3(E))),v(e,["functionDeclarations"],y)}const i=m(t,["retrieval"]);i!=null&&v(e,["retrieval"],i);const s=m(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],s);const a=m(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],a);const l=m(t,["enterpriseWebSearch"]);l!=null&&v(e,["enterpriseWebSearch"],l);const c=m(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],c);const h=m(t,["urlContext"]);h!=null&&v(e,["urlContext"],h);const f=m(t,["computerUse"]);f!=null&&v(e,["computerUse"],f);const p=m(t,["codeExecution"]);return p!=null&&v(e,["codeExecution"],p),e}function $O(t){const e={},n=m(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&v(e,["createTime"],i);const s=m(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function JO(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&v(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&v(e,["createTime"],i);const s=m(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function KO(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const s=m(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=m(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),n}function QO(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const s=m(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=m(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),n}function XO(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","name"],ft(t,i));const s=m(e,["config"]);return s!=null&&KO(s,n),n}function WO(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["config"]);return s!=null&&QO(s,n),n}function ZO(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const s=m(t,["includeRaiReason"]);e!==void 0&&s!=null&&v(e,["parameters","includeRaiReason"],s);const a=m(t,["outputMimeType"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","mimeType"],a);const l=m(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&v(e,["parameters","outputOptions","compressionQuality"],l);const c=m(t,["enhanceInputImage"]);e!==void 0&&c!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=m(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const f=m(t,["labels"]);e!==void 0&&f!=null&&v(e,["labels"],f);const p=m(t,["numberOfImages"]);e!==void 0&&p!=null&&v(e,["parameters","sampleCount"],p);const y=m(t,["mode"]);return e!==void 0&&y!=null&&v(e,["parameters","mode"],y),n}function e6(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],ft(t,i));const s=m(e,["image"]);s!=null&&v(n,["instances[0]","image"],Ki(s));const a=m(e,["upscaleFactor"]);a!=null&&v(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=m(e,["config"]);return l!=null&&ZO(l,n),n}function t6(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Uh(a))),v(e,["generatedImages"],s)}return e}function n6(t){const e={},n=m(t,["uri"]);n!=null&&v(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&v(e,["videoBytes"],uo(i));const s=m(t,["encoding"]);return s!=null&&v(e,["mimeType"],s),e}function i6(t){const e={},n=m(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],uo(i));const s=m(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function r6(t){const e={},n=m(t,["image"]);n!=null&&v(e,["_self"],Ki(n));const i=m(t,["maskMode"]);return i!=null&&v(e,["maskMode"],i),e}function s6(t){const e={},n=m(t,["image"]);n!=null&&v(e,["image"],Oh(n));const i=m(t,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function o6(t){const e={},n=m(t,["image"]);n!=null&&v(e,["image"],Ki(n));const i=m(t,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function cI(t){const e={},n=m(t,["uri"]);n!=null&&v(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&v(e,["encodedVideo"],uo(i));const s=m(t,["mimeType"]);return s!=null&&v(e,["encoding"],s),e}function fI(t){const e={},n=m(t,["uri"]);n!=null&&v(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&v(e,["bytesBase64Encoded"],uo(i));const s=m(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a6="Content-Type",l6="X-Server-Timeout",u6="User-Agent",iy="x-goog-api-client",c6="1.27.0",f6=`google-genai-sdk/${c6}`,d6="v1beta1",h6="v1beta",mA=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class p6{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:d6,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:h6,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&m6(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await gA(s),new Wg(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await gA(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return al(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:h}=yield It(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=a.decode(h,{stream:!0});try{const y=JSON.parse(f);if("error"in y){const E=JSON.parse(JSON.stringify(y.error)),w=E.status,b=E.code,L=`got status: ${w}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new Lh({message:L,status:b})}}catch(y){if(y.name==="ApiError")throw y}l+=f;let p=l.match(mA);for(;p;){const y=p[1];try{const E=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield It(new Wg(E)),l=l.slice(p[0].length),p=l.match(mA)}catch(E){throw new Error(`exception parsing stream chunk ${y}. ${E}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=f6+" "+this.clientOptions.userAgentExtra;return e[u6]=n,e[iy]=n,e[a6]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(l6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const h=await this.fetchUploadUrl(s,n);return a.upload(e,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},l=await this.request({path:Ce("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(i=l==null?void 0:l.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function gA(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Lh({message:s,status:n}):new Error(s)}}function m6(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const f=l[h],p=c[h];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[h]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[h]=f)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g6="mcp_used/unknown";let y6=!1;function dI(t){for(const e of t)if(_6(e)||typeof e=="object"&&"inputSchema"in e)return!0;return y6}function hI(t){var e;const n=(e=t[iy])!==null&&e!==void 0?e:"";t[iy]=(n+` ${g6}`).trimStart()}function _6(t){return t!==null&&typeof t=="object"&&t instanceof I_}function v6(t,e=100){return al(this,arguments,function*(){let i,s=0;for(;s<e;){const a=yield It(t.listTools({cursor:i}));for(const l of a.tools)yield yield It(l),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class I_{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new I_(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const p of this.mcpClients)try{for(var c=!0,h=(n=void 0,nc(v6(p))),f;f=await h.next(),e=f.done,!e;c=!0){s=f.value,c=!1;const y=s;l.push(y);const E=y.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=p}}catch(y){n={error:y}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),AV(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function T6(t,e,n){const i=new gV;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class E6{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=A6(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(B=>{f=B}),y=e.callbacks,E=function(){f({})},w=this.apiClient,b={onopen:E,onmessage:B=>{T6(w,y.onmessage,B)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(B){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(B){}},L=this.webSocketFactory.create(h,w6(l),b);L.connect(),await p;const H={setup:{model:ft(this.apiClient,e.model)}};return L.send(JSON.stringify(H)),new S6(L,this.apiClient)}}class S6{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=h3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=d3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(tl.PLAY)}pause(){this.sendPlaybackControl(tl.PAUSE)}stop(){this.sendPlaybackControl(tl.STOP)}resetContext(){this.sendPlaybackControl(tl.RESET_CONTEXT)}close(){this.conn.close()}}function w6(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function A6(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function C6(t,e,n){const i=new mV;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const l=g3(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class b6{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new E6(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&dI(e.config.tools)&&hI(y);const E=k6(y);if(this.apiClient.isVertexAI())p=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,p);else{const D=this.apiClient.getApiKey();let I="BidiGenerateContent",U="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),I="BidiGenerateContentConstrained",U="access_token"),p=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${I}?${U}=${D}`}let w=()=>{};const b=new Promise(D=>{w=D}),L=e.callbacks,F=function(){var D;(D=L==null?void 0:L.onopen)===null||D===void 0||D.call(L),w({})},O=this.apiClient,H={onopen:F,onmessage:D=>{C6(O,L.onmessage,D)},onerror:(n=L==null?void 0:L.onerror)!==null&&n!==void 0?n:function(D){},onclose:(i=L==null?void 0:L.onclose)!==null&&i!==void 0?i:function(D){}},B=this.webSocketFactory.create(p,N6(E),H);B.connect(),await b;let X=ft(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const D=this.apiClient.getProject(),I=this.apiClient.getLocation();X=`projects/${D}/locations/${I}/`+X}let ne={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[rh.AUDIO]}:e.config.responseModalities=[rh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],R=[];for(const D of Y)if(this.isCallableTool(D)){const I=D;R.push(await I.tool())}else R.push(D);R.length>0&&(e.config.tools=R);const P={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ne=f3(this.apiClient,P):ne=c3(this.apiClient,P),delete ne.config,B.send(JSON.stringify(ne)),new R6(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const I6={turnComplete:!0};class R6{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ni(n.turns),e.isVertexAI()||(i=i.map(s=>Vh(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(x6)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},I6),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:m3(e)}:n={realtimeInput:p3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function N6(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function k6(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yA=10;function _A(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ll(l)){s=!0;break}if(!s)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ll(t){return"callTool"in t&&typeof t.callTool=="function"}function M6(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ll(s)))!==null&&i!==void 0?i:!1}function D6(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!ll(s)))!==null&&i!==void 0?i:!1}function vA(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P6 extends ia{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,a,l,c;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!M6(n)||_A(n.config))return await this.generateContentInternal(h);if(D6(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,p;const y=Ni(h.contents),E=(a=(s=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:yA;let w=0;for(;w<E&&(f=await this.generateContentInternal(h),!(!f.functionCalls||f.functionCalls.length===0));){const b=f.candidates[0].content,L=[];for(const F of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(ll(F)){const H=await F.callTool(f.functionCalls);L.push(...H)}w++,p={role:"user",parts:L},h.contents=Ni(h.contents),h.contents.push(b),h.contents.push(p),vA(h.config)&&(y.push(b),y.push(p))}return vA(h.config)&&(f.automaticFunctionCallingHistory=y),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),_A(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let a;const l=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:l.push(h);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Vc(Zo.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,a,l,c,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(c=n.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async h=>ll(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&dI(e.config.tools)){const h=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),hI(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var n,i,s;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ll(l)){const c=l,h=await c.tool();for(const f of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!f.name)throw new Error("Function declaration name is required.");if(a.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);a.set(f.name,c)}}return a}async processAfcStream(e){var n,i,s;const a=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:yA;let l=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(f,p,y){var E,w;return al(this,arguments,function*(){for(var b,L,F,O;c<a;){l&&(c++,l=!1);const ne=yield It(f.processParamsMaybeAddMcpUsage(y)),Y=yield It(f.generateContentStreamInternal(ne)),R=[],P=[];try{for(var H=!0,B=(L=void 0,nc(Y)),X;X=yield It(B.next()),b=X.done,!b;H=!0){O=X.value,H=!1;const D=O;if(yield yield It(D),D.candidates&&(!((E=D.candidates[0])===null||E===void 0)&&E.content)){P.push(D.candidates[0].content);for(const I of(w=D.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<a&&I.functionCall){if(!I.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(I.functionCall.name)){const U=yield It(p.get(I.functionCall.name).callTool([I.functionCall]));R.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${I.functionCall.name}`)}}}}catch(D){L={error:D}}finally{try{!H&&!b&&(F=B.return)&&(yield It(F.call(B)))}finally{if(L)throw L.error}}if(R.length>0){l=!0;const D=new Ou;D.candidates=[{content:{role:"user",parts:R}}],yield yield It(D);const I=[];I.push(...P),I.push({role:"user",parts:R});const U=Ni(y.contents).concat(I);y.contents=U}else break}})})(this,h,e)}async generateContentInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=dA(this.apiClient,e);return c=Ce("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=pA(p),E=new Ou;return Object.assign(E,y),E})}else{const f=fA(this.apiClient,e);return c=Ce("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=hA(p),E=new Ou;return Object.assign(E,y),E})}}async generateContentStreamInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=dA(this.apiClient,e);return c=Ce("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(y){return al(this,arguments,function*(){var E,w,b,L;try{for(var F=!0,O=nc(y),H;H=yield It(O.next()),E=H.done,!E;F=!0){L=H.value,F=!1;const B=L,X=pA(yield It(B.json()));X.sdkHttpResponse={headers:B.headers};const ne=new Ou;Object.assign(ne,X),yield yield It(ne)}}catch(B){w={error:B}}finally{try{!F&&!E&&(b=O.return)&&(yield It(b.call(O)))}finally{if(w)throw w.error}}})})}else{const f=fA(this.apiClient,e);return c=Ce("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(y){return al(this,arguments,function*(){var E,w,b,L;try{for(var F=!0,O=nc(y),H;H=yield It(O.next()),E=H.done,!E;F=!0){L=H.value,F=!1;const B=L,X=hA(yield It(B.json()));X.sdkHttpResponse={headers:B.headers};const ne=new Ou;Object.assign(ne,X),yield yield It(ne)}}catch(B){w={error:B}}finally{try{!F&&!E&&(b=O.return)&&(yield It(b.call(O)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=Y3(this.apiClient,e);return c=Ce("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=J3(p),E=new Kw;return Object.assign(E,y),E})}else{const f=j3(this.apiClient,e);return c=Ce("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=$3(p),E=new Kw;return Object.assign(E,y),E})}}async generateImagesInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=iO(this.apiClient,e);return c=Ce("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=sO(p),E=new Qw;return Object.assign(E,y),E})}else{const f=nO(this.apiClient,e);return c=Ce("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=rO(p),E=new Qw;return Object.assign(E,y),E})}}async editImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=q3(this.apiClient,e);return a=Ce("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=B3(h),p=new aV;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=e6(this.apiClient,e);return a=Ce("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=t6(h),p=new lV;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=VO(this.apiClient,e);return a=Ce("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const f=UO(h),p=new uV;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=HO(this.apiClient,e);return a=Ce("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const f=GO(h),p=new cV;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=SO(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>ny(p))}else{const f=EO(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>ty(p))}}async listInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=RO(this.apiClient,e);return c=Ce("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=kO(p),E=new Xw;return Object.assign(E,y),E})}else{const f=IO(this.apiClient,e);return c=Ce("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=NO(p),E=new Xw;return Object.assign(E,y),E})}}async update(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=WO(this.apiClient,e);return c=Ce("{model}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>ny(p))}else{const f=XO(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>ty(p))}}async delete(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=U3(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=F3(p),E=new Ww;return Object.assign(E,y),E})}else{const f=V3(this.apiClient,e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=O3(p),E=new Ww;return Object.assign(E,y),E})}}async countTokens(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=D3(this.apiClient,e);return c=Ce("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=L3(p),E=new Zw;return Object.assign(E,y),E})}else{const f=M3(this.apiClient,e);return c=Ce("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=P3(p),E=new Zw;return Object.assign(E,y),E})}}async computeTokens(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=x3(this.apiClient,e);return a=Ce("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const f=C3(h),p=new fV;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=fO(this.apiClient,e);return c=Ce("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const y=uO(p),E=new sh;return Object.assign(E,y),E})}else{const f=cO(this.apiClient,e);return c=Ce("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>{const y=lO(p),E=new sh;return Object.assign(E,y),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L6 extends ia{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=rV(e);return c=Ce("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=iV(e);return c=Ce("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Q4(e);return a=Ce("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V6(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&v(e,["data"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function U6(t){const e={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>j6(a))),v(e,["parts"],s)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function O6(t,e,n){const i={},s=m(e,["expireTime"]);n!==void 0&&s!=null&&v(n,["expireTime"],s);const a=m(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&v(n,["newSessionExpireTime"],a);const l=m(e,["uses"]);n!==void 0&&l!=null&&v(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&v(n,["bidiGenerateContentSetup"],G6(t,c));const h=m(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&v(n,["fieldMask"],h),i}function F6(t,e){const n={},i=m(e,["config"]);return i!=null&&v(n,["config"],O6(t,i,n)),n}function z6(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function q6(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function B6(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&v(e,["timeRangeFilter"],n),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function H6(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);const s=m(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=m(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const l=m(t,["topP"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);const h=m(t,["maxOutputTokens"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","seed"],p);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","speechConfig"],b_(y));const E=m(t,["thinkingConfig"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","thinkingConfig"],E);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],w);const b=m(t,["systemInstruction"]);e!==void 0&&b!=null&&v(e,["setup","systemInstruction"],U6(kn(b)));const L=m(t,["tools"]);if(e!==void 0&&L!=null){let Y=Dl(L);Array.isArray(Y)&&(Y=Y.map(R=>$6(Ml(R)))),v(e,["setup","tools"],Y)}const F=m(t,["sessionResumption"]);e!==void 0&&F!=null&&v(e,["setup","sessionResumption"],Y6(F));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&v(e,["setup","inputAudioTranscription"],O);const H=m(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&v(e,["setup","outputAudioTranscription"],H);const B=m(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&v(e,["setup","realtimeInputConfig"],B);const X=m(t,["contextWindowCompression"]);e!==void 0&&X!=null&&v(e,["setup","contextWindowCompression"],X);const ne=m(t,["proactivity"]);return e!==void 0&&ne!=null&&v(e,["setup","proactivity"],ne),n}function G6(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["setup","model"],ft(t,i));const s=m(e,["config"]);return s!=null&&v(n,["config"],H6(s,n)),n}function j6(t){const e={},n=m(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],n);const i=m(t,["thought"]);i!=null&&v(e,["thought"],i);const s=m(t,["inlineData"]);s!=null&&v(e,["inlineData"],V6(s));const a=m(t,["fileData"]);a!=null&&v(e,["fileData"],z6(a));const l=m(t,["thoughtSignature"]);l!=null&&v(e,["thoughtSignature"],l);const c=m(t,["functionCall"]);c!=null&&v(e,["functionCall"],c);const h=m(t,["codeExecutionResult"]);h!=null&&v(e,["codeExecutionResult"],h);const f=m(t,["executableCode"]);f!=null&&v(e,["executableCode"],f);const p=m(t,["functionResponse"]);p!=null&&v(e,["functionResponse"],p);const y=m(t,["text"]);return y!=null&&v(e,["text"],y),e}function Y6(t){const e={},n=m(t,["handle"]);if(n!=null&&v(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $6(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),v(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearch"]);i!=null&&v(e,["googleSearch"],B6(i));const s=m(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=m(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],q6(a));const l=m(t,["urlContext"]);l!=null&&v(e,["urlContext"],l);const c=m(t,["computerUse"]);c!=null&&v(e,["computerUse"],c);const h=m(t,["codeExecution"]);return h!=null&&v(e,["codeExecution"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J6(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function K6(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=J6(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(f=>l.includes(f)?`generationConfig.${f}`:f));const h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Q6 extends ia{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=F6(this.apiClient,e);a=Ce("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const h=K6(c,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X6(t,e){const n={},i=m(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function W6(t,e){const n={},i=m(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function Z6(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=m(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&v(e,["displayName"],s),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=m(t,["epochCount"]);e!==void 0&&a!=null&&v(e,["tuningTask","hyperparameters","epochCount"],a);const l=m(t,["learningRateMultiplier"]);if(l!=null&&v(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(t,["batchSize"]);e!==void 0&&c!=null&&v(e,["tuningTask","hyperparameters","batchSize"],c);const h=m(t,["learningRate"]);if(e!==void 0&&h!=null&&v(e,["tuningTask","hyperparameters","learningRate"],h),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return i}function e5(t,e,n){const i={},s=m(t,["validationDataset"]);e!==void 0&&s!=null&&v(e,["supervisedTuningSpec"],m5(s));const a=m(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&v(e,["tunedModelDisplayName"],a);const l=m(t,["description"]);e!==void 0&&l!=null&&v(e,["description"],l);const c=m(t,["epochCount"]);e!==void 0&&c!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const h=m(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const f=m(t,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const p=m(t,["adapterSize"]);if(e!==void 0&&p!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=m(t,["labels"]);return e!==void 0&&y!=null&&v(e,["labels"],y),i}function t5(t,e){const n={},i=m(t,["baseModel"]);i!=null&&v(n,["baseModel"],i);const s=m(t,["preTunedModel"]);s!=null&&v(n,["preTunedModel"],s);const a=m(t,["trainingDataset"]);a!=null&&v(n,["tuningTask","trainingData"],d5(a));const l=m(t,["config"]);return l!=null&&Z6(l,n),n}function n5(t,e){const n={},i=m(t,["baseModel"]);i!=null&&v(n,["baseModel"],i);const s=m(t,["preTunedModel"]);s!=null&&v(n,["preTunedModel"],s);const a=m(t,["trainingDataset"]);a!=null&&h5(a,n);const l=m(t,["config"]);return l!=null&&e5(l,n),n}function i5(t,e){const n={},i=m(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function r5(t,e){const n={},i=m(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function s5(t,e,n){const i={},s=m(t,["pageSize"]);e!==void 0&&s!=null&&v(e,["_query","pageSize"],s);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const l=m(t,["filter"]);return e!==void 0&&l!=null&&v(e,["_query","filter"],l),i}function o5(t,e,n){const i={},s=m(t,["pageSize"]);e!==void 0&&s!=null&&v(e,["_query","pageSize"],s);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const l=m(t,["filter"]);return e!==void 0&&l!=null&&v(e,["_query","filter"],l),i}function a5(t,e){const n={},i=m(t,["config"]);return i!=null&&s5(i,n),n}function l5(t,e){const n={},i=m(t,["config"]);return i!=null&&o5(i,n),n}function u5(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const s=m(t,["nextPageToken"]);s!=null&&v(n,["nextPageToken"],s);const a=m(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>pI(c))),v(n,["tuningJobs"],l)}return n}function c5(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const s=m(t,["nextPageToken"]);s!=null&&v(n,["nextPageToken"],s);const a=m(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>ry(c))),v(n,["tuningJobs"],l)}return n}function f5(t,e){const n={},i=m(t,["name"]);i!=null&&v(n,["model"],i);const s=m(t,["name"]);return s!=null&&v(n,["endpoint"],s),n}function d5(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),v(n,["examples","examples"],s)}return n}function h5(t,e,n){const i={},s=m(t,["gcsUri"]);e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s);const a=m(t,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function pI(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const s=m(t,["name"]);s!=null&&v(n,["name"],s);const a=m(t,["state"]);a!=null&&v(n,["state"],Kb(a));const l=m(t,["createTime"]);l!=null&&v(n,["createTime"],l);const c=m(t,["tuningTask","startTime"]);c!=null&&v(n,["startTime"],c);const h=m(t,["tuningTask","completeTime"]);h!=null&&v(n,["endTime"],h);const f=m(t,["updateTime"]);f!=null&&v(n,["updateTime"],f);const p=m(t,["description"]);p!=null&&v(n,["description"],p);const y=m(t,["baseModel"]);y!=null&&v(n,["baseModel"],y);const E=m(t,["_self"]);return E!=null&&v(n,["tunedModel"],f5(E)),n}function ry(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const s=m(t,["name"]);s!=null&&v(n,["name"],s);const a=m(t,["state"]);a!=null&&v(n,["state"],Kb(a));const l=m(t,["createTime"]);l!=null&&v(n,["createTime"],l);const c=m(t,["startTime"]);c!=null&&v(n,["startTime"],c);const h=m(t,["endTime"]);h!=null&&v(n,["endTime"],h);const f=m(t,["updateTime"]);f!=null&&v(n,["updateTime"],f);const p=m(t,["error"]);p!=null&&v(n,["error"],p);const y=m(t,["description"]);y!=null&&v(n,["description"],y);const E=m(t,["baseModel"]);E!=null&&v(n,["baseModel"],E);const w=m(t,["tunedModel"]);w!=null&&v(n,["tunedModel"],w);const b=m(t,["preTunedModel"]);b!=null&&v(n,["preTunedModel"],b);const L=m(t,["supervisedTuningSpec"]);L!=null&&v(n,["supervisedTuningSpec"],L);const F=m(t,["tuningDataStats"]);F!=null&&v(n,["tuningDataStats"],F);const O=m(t,["encryptionSpec"]);O!=null&&v(n,["encryptionSpec"],O);const H=m(t,["partnerModelTuningSpec"]);H!=null&&v(n,["partnerModelTuningSpec"],H);const B=m(t,["customBaseModel"]);B!=null&&v(n,["customBaseModel"],B);const X=m(t,["experiment"]);X!=null&&v(n,["experiment"],X);const ne=m(t,["labels"]);ne!=null&&v(n,["labels"],ne);const Y=m(t,["outputUri"]);Y!=null&&v(n,["outputUri"],Y);const R=m(t,["pipelineJob"]);R!=null&&v(n,["pipelineJob"],R);const P=m(t,["serviceAccount"]);P!=null&&v(n,["serviceAccount"],P);const D=m(t,["tunedModelDisplayName"]);D!=null&&v(n,["tunedModelDisplayName"],D);const I=m(t,["veoTuningSpec"]);return I!=null&&v(n,["veoTuningSpec"],I),n}function p5(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const s=m(t,["name"]);s!=null&&v(n,["name"],s);const a=m(t,["metadata"]);a!=null&&v(n,["metadata"],a);const l=m(t,["done"]);l!=null&&v(n,["done"],l);const c=m(t,["error"]);return c!=null&&v(n,["error"],c),n}function m5(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&v(n,["validationDatasetUri"],i);const s=m(t,["vertexDatasetResource"]);return s!=null&&v(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g5 extends ia{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Vc(Zo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:Xg.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=r5(e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>ry(p))}else{const f=i5(e);return c=Ce("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>pI(p))}}async listInternal(e){var n,i,s,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=l5(e);return c=Ce("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=c5(p),E=new eA;return Object.assign(E,y),E})}else{const f=a5(e);return c=Ce("tunedModels",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:p.headers},E})),l.then(p=>{const y=u5(p),E=new eA;return Object.assign(E,y),E})}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const h=W6(e);l=Ce("{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=X6(e);l=Ce("{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=n5(e);return a=Ce("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>ry(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=t5(e);return a=Ce("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>p5(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y5{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _5=1024*1024*8,v5=3,T5=1e3,E5=2,sg="x-goog-upload-status";async function S5(t,e,n){var i,s,a;let l=0,c=0,h=new Wg(new Response),f="upload";for(l=t.size;c<l;){const y=Math.min(_5,l-c),E=t.slice(c,c+y);c+y>=l&&(f+=", finalize");let w=0,b=T5;for(;w<v5&&(h=await n.request({path:"",body:E,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(c),"Content-Length":String(y)}}}),!(!((i=h==null?void 0:h.headers)===null||i===void 0)&&i[sg]));)w++,await A5(b),b=b*E5;if(c+=y,((s=h==null?void 0:h.headers)===null||s===void 0?void 0:s[sg])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const p=await(h==null?void 0:h.json());if(((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[sg])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}async function w5(t){return{size:t.size,type:t.type}}function A5(t){return new Promise(e=>setTimeout(e,t))}class x5{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S5(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await w5(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C5{create(e,n,i){return new b5(e,n,i)}}class b5{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TA="x-goog-api-key";class I5{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(TA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(TA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R5="gl-node/";class R_{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=J4(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new I5(this.apiKey);this.apiClient=new p6({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:R5+"web",uploader:new x5,downloader:new y5}),this.models=new P6(this.apiClient),this.live=new b6(this.apiClient,s,new C5),this.batches=new hU(this.apiClient),this.chats=new jU(this.models,this.apiClient),this.caches=new BU(this.apiClient),this.files=new t3(this.apiClient),this.operations=new L6(this.apiClient),this.authTokens=new Q6(this.apiClient),this.tunings=new g5(this.apiClient)}}const mI=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),gI=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),N5=({className:t="w-5 h-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),yI=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})});function k5(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const M5=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,D5=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,P5={};function EA(t,e){return(P5.jsx?D5:M5).test(t)}const L5=/[ \t\n\f\r]/g;function V5(t){return typeof t=="object"?t.type==="text"?SA(t.value):!1:SA(t)}function SA(t){return t.replace(L5,"")===""}class Uc{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}Uc.prototype.normal={};Uc.prototype.property={};Uc.prototype.space=void 0;function _I(t,e){const n={},i={};for(const s of t)Object.assign(n,s.property),Object.assign(i,s.normal);return new Uc(n,i,e)}function sy(t){return t.toLowerCase()}class Zn{constructor(e,n){this.attribute=n,this.property=e}}Zn.prototype.attribute="";Zn.prototype.booleanish=!1;Zn.prototype.boolean=!1;Zn.prototype.commaOrSpaceSeparated=!1;Zn.prototype.commaSeparated=!1;Zn.prototype.defined=!1;Zn.prototype.mustUseProperty=!1;Zn.prototype.number=!1;Zn.prototype.overloadedBoolean=!1;Zn.prototype.property="";Zn.prototype.spaceSeparated=!1;Zn.prototype.space=void 0;let U5=0;const Ge=ra(),nn=ra(),oy=ra(),ye=ra(),xt=ra(),ul=ra(),ui=ra();function ra(){return 2**++U5}const ay=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ge,booleanish:nn,commaOrSpaceSeparated:ui,commaSeparated:ul,number:ye,overloadedBoolean:oy,spaceSeparated:xt},Symbol.toStringTag,{value:"Module"})),og=Object.keys(ay);class N_ extends Zn{constructor(e,n,i,s){let a=-1;if(super(e,n),wA(this,"space",s),typeof i=="number")for(;++a<og.length;){const l=og[a];wA(this,og[a],(i&ay[l])===ay[l])}}}N_.prototype.defined=!0;function wA(t,e,n){n&&(t[e]=n)}function Ll(t){const e={},n={};for(const[i,s]of Object.entries(t.properties)){const a=new N_(i,t.transform(t.attributes||{},i),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(a.mustUseProperty=!0),e[i]=a,n[sy(i)]=i,n[sy(a.attribute)]=i}return new Uc(e,n,t.space)}const vI=Ll({properties:{ariaActiveDescendant:null,ariaAtomic:nn,ariaAutoComplete:null,ariaBusy:nn,ariaChecked:nn,ariaColCount:ye,ariaColIndex:ye,ariaColSpan:ye,ariaControls:xt,ariaCurrent:null,ariaDescribedBy:xt,ariaDetails:null,ariaDisabled:nn,ariaDropEffect:xt,ariaErrorMessage:null,ariaExpanded:nn,ariaFlowTo:xt,ariaGrabbed:nn,ariaHasPopup:null,ariaHidden:nn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:xt,ariaLevel:ye,ariaLive:null,ariaModal:nn,ariaMultiLine:nn,ariaMultiSelectable:nn,ariaOrientation:null,ariaOwns:xt,ariaPlaceholder:null,ariaPosInSet:ye,ariaPressed:nn,ariaReadOnly:nn,ariaRelevant:null,ariaRequired:nn,ariaRoleDescription:xt,ariaRowCount:ye,ariaRowIndex:ye,ariaRowSpan:ye,ariaSelected:nn,ariaSetSize:ye,ariaSort:null,ariaValueMax:ye,ariaValueMin:ye,ariaValueNow:ye,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function TI(t,e){return e in t?t[e]:e}function EI(t,e){return TI(t,e.toLowerCase())}const O5=Ll({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ul,acceptCharset:xt,accessKey:xt,action:null,allow:null,allowFullScreen:Ge,allowPaymentRequest:Ge,allowUserMedia:Ge,alt:null,as:null,async:Ge,autoCapitalize:null,autoComplete:xt,autoFocus:Ge,autoPlay:Ge,blocking:xt,capture:null,charSet:null,checked:Ge,cite:null,className:xt,cols:ye,colSpan:null,content:null,contentEditable:nn,controls:Ge,controlsList:xt,coords:ye|ul,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ge,defer:Ge,dir:null,dirName:null,disabled:Ge,download:oy,draggable:nn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ge,formTarget:null,headers:xt,height:ye,hidden:oy,high:ye,href:null,hrefLang:null,htmlFor:xt,httpEquiv:xt,id:null,imageSizes:null,imageSrcSet:null,inert:Ge,inputMode:null,integrity:null,is:null,isMap:Ge,itemId:null,itemProp:xt,itemRef:xt,itemScope:Ge,itemType:xt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ge,low:ye,manifest:null,max:null,maxLength:ye,media:null,method:null,min:null,minLength:ye,multiple:Ge,muted:Ge,name:null,nonce:null,noModule:Ge,noValidate:Ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ge,optimum:ye,pattern:null,ping:xt,placeholder:null,playsInline:Ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ge,referrerPolicy:null,rel:xt,required:Ge,reversed:Ge,rows:ye,rowSpan:ye,sandbox:xt,scope:null,scoped:Ge,seamless:Ge,selected:Ge,shadowRootClonable:Ge,shadowRootDelegatesFocus:Ge,shadowRootMode:null,shape:null,size:ye,sizes:null,slot:null,span:ye,spellCheck:nn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ye,step:null,style:null,tabIndex:ye,target:null,title:null,translate:null,type:null,typeMustMatch:Ge,useMap:null,value:nn,width:ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:xt,axis:null,background:null,bgColor:null,border:ye,borderColor:null,bottomMargin:ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ge,declare:Ge,event:null,face:null,frame:null,frameBorder:null,hSpace:ye,leftMargin:ye,link:null,longDesc:null,lowSrc:null,marginHeight:ye,marginWidth:ye,noResize:Ge,noHref:Ge,noShade:Ge,noWrap:Ge,object:null,profile:null,prompt:null,rev:null,rightMargin:ye,rules:null,scheme:null,scrolling:nn,standby:null,summary:null,text:null,topMargin:ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ge,disableRemotePlayback:Ge,prefix:null,property:null,results:ye,security:null,unselectable:null},space:"html",transform:EI}),F5=Ll({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ui,accentHeight:ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ye,amplitude:ye,arabicForm:null,ascent:ye,attributeName:null,attributeType:null,azimuth:ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ye,by:null,calcMode:null,capHeight:ye,className:xt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ye,diffuseConstant:ye,direction:null,display:null,dur:null,divisor:ye,dominantBaseline:null,download:Ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:ye,enableBackground:null,end:null,event:null,exponent:ye,externalResourcesRequired:null,fill:null,fillOpacity:ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ul,g2:ul,glyphName:ul,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ye,horizOriginX:ye,horizOriginY:ye,id:null,ideographic:ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ye,k:ye,k1:ye,k2:ye,k3:ye,k4:ye,kernelMatrix:ui,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ye,overlineThickness:ye,paintOrder:null,panose1:null,path:null,pathLength:ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:xt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ye,pointsAtY:ye,pointsAtZ:ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ui,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ui,rev:ui,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ui,requiredFeatures:ui,requiredFonts:ui,requiredFormats:ui,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ye,specularExponent:ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ye,strikethroughThickness:ye,string:null,stroke:null,strokeDashArray:ui,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ye,strokeOpacity:ye,strokeWidth:null,style:null,surfaceScale:ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ui,tabIndex:ye,tableValues:null,target:null,targetX:ye,targetY:ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ui,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ye,underlineThickness:ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ye,values:null,vAlphabetic:ye,vMathematical:ye,vectorEffect:null,vHanging:ye,vIdeographic:ye,version:null,vertAdvY:ye,vertOriginX:ye,vertOriginY:ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:TI}),SI=Ll({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),wI=Ll({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:EI}),AI=Ll({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),z5={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},q5=/[A-Z]/g,AA=/-[a-z]/g,B5=/^data[-\w.:]+$/i;function H5(t,e){const n=sy(e);let i=e,s=Zn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&B5.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(AA,j5);i="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!AA.test(a)){let l=a.replace(q5,G5);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=N_}return new s(i,e)}function G5(t){return"-"+t.toLowerCase()}function j5(t){return t.charAt(1).toUpperCase()}const Y5=_I([vI,O5,SI,wI,AI],"html"),k_=_I([vI,F5,SI,wI,AI],"svg");function $5(t){return t.join(" ").trim()}var Ya={},ag,xA;function J5(){if(xA)return ag;xA=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,h=`
`,f="/",p="*",y="",E="comment",w="declaration";ag=function(L,F){if(typeof L!="string")throw new TypeError("First argument must be a string");if(!L)return[];F=F||{};var O=1,H=1;function B(k){var oe=k.match(e);oe&&(O+=oe.length);var me=k.lastIndexOf(h);H=~me?k.length-me:H+k.length}function X(){var k={line:O,column:H};return function(oe){return oe.position=new ne(k),P(),oe}}function ne(k){this.start=k,this.end={line:O,column:H},this.source=F.source}ne.prototype.content=L;function Y(k){var oe=new Error(F.source+":"+O+":"+H+": "+k);if(oe.reason=k,oe.filename=F.source,oe.line=O,oe.column=H,oe.source=L,!F.silent)throw oe}function R(k){var oe=k.exec(L);if(oe){var me=oe[0];return B(me),L=L.slice(me.length),oe}}function P(){R(n)}function D(k){var oe;for(k=k||[];oe=I();)oe!==!1&&k.push(oe);return k}function I(){var k=X();if(!(f!=L.charAt(0)||p!=L.charAt(1))){for(var oe=2;y!=L.charAt(oe)&&(p!=L.charAt(oe)||f!=L.charAt(oe+1));)++oe;if(oe+=2,y===L.charAt(oe-1))return Y("End of comment missing");var me=L.slice(2,oe-2);return H+=2,B(me),L=L.slice(oe),H+=2,k({type:E,comment:me})}}function U(){var k=X(),oe=R(i);if(oe){if(I(),!R(s))return Y("property missing ':'");var me=R(a),K=k({type:w,property:b(oe[0].replace(t,y)),value:me?b(me[0].replace(t,y)):y});return R(l),K}}function z(){var k=[];D(k);for(var oe;oe=U();)oe!==!1&&(k.push(oe),D(k));return k}return P(),z()};function b(L){return L?L.replace(c,y):y}return ag}var CA;function K5(){if(CA)return Ya;CA=1;var t=Ya&&Ya.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.default=n;const e=t(J5());function n(i,s){let a=null;if(!i||typeof i!="string")return a;const l=(0,e.default)(i),c=typeof s=="function";return l.forEach(h=>{if(h.type!=="declaration")return;const{property:f,value:p}=h;c?s(f,p,h):p&&(a=a||{},a[f]=p)}),a}return Ya}var Fu={},bA;function Q5(){if(bA)return Fu;bA=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(f){return!f||n.test(f)||t.test(f)},l=function(f,p){return p.toUpperCase()},c=function(f,p){return"".concat(p,"-")},h=function(f,p){return p===void 0&&(p={}),a(f)?f:(f=f.toLowerCase(),p.reactCompat?f=f.replace(s,c):f=f.replace(i,c),f.replace(e,l))};return Fu.camelCase=h,Fu}var zu,IA;function X5(){if(IA)return zu;IA=1;var t=zu&&zu.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(K5()),n=Q5();function i(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(c,h){c&&h&&(l[(0,n.camelCase)(c,a)]=h)}),l}return i.default=i,zu=i,zu}var W5=X5();const Z5=fh(W5),xI=CI("end"),M_=CI("start");function CI(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function eF(t){const e=M_(t),n=xI(t);if(e&&n)return{start:e,end:n}}function ic(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?RA(t.position):"start"in t||"end"in t?RA(t):"line"in t||"column"in t?ly(t):""}function ly(t){return NA(t&&t.line)+":"+NA(t&&t.column)}function RA(t){return ly(t&&t.start)+"-"+ly(t&&t.end)}function NA(t){return t&&typeof t=="number"?t:1}class Pn extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof i=="string"){const h=i.indexOf(":");h===-1?a.ruleId=i:(a.source=i.slice(0,h),a.ruleId=i.slice(h+1))}if(!a.place&&a.ancestors&&a.ancestors){const h=a.ancestors[a.ancestors.length-1];h&&(a.place=h.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=c?c.line:void 0,this.name=ic(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Pn.prototype.file="";Pn.prototype.name="";Pn.prototype.reason="";Pn.prototype.message="";Pn.prototype.stack="";Pn.prototype.column=void 0;Pn.prototype.line=void 0;Pn.prototype.ancestors=void 0;Pn.prototype.cause=void 0;Pn.prototype.fatal=void 0;Pn.prototype.place=void 0;Pn.prototype.ruleId=void 0;Pn.prototype.source=void 0;const D_={}.hasOwnProperty,tF=new Map,nF=/[A-Z]/g,iF=new Set(["table","tbody","thead","tfoot","tr"]),rF=new Set(["td","th"]),bI="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function sF(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=hF(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=dF(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?k_:Y5,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=II(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function II(t,e,n){if(e.type==="element")return oF(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return aF(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return uF(t,e,n);if(e.type==="mdxjsEsm")return lF(t,e);if(e.type==="root")return cF(t,e,n);if(e.type==="text")return fF(t,e)}function oF(t,e,n){const i=t.schema;let s=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(s=k_,t.schema=s),t.ancestors.push(e);const a=NI(t,e.tagName,!1),l=pF(t,e);let c=L_(t,e);return iF.has(e.tagName)&&(c=c.filter(function(h){return typeof h=="string"?!V5(h):!0})),RI(t,l,a,e),P_(l,c),t.ancestors.pop(),t.schema=i,t.create(e,a,l,n)}function aF(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}Tc(t,e.position)}function lF(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Tc(t,e.position)}function uF(t,e,n){const i=t.schema;let s=i;e.name==="svg"&&i.space==="html"&&(s=k_,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:NI(t,e.name,!0),l=mF(t,e),c=L_(t,e);return RI(t,l,a,e),P_(l,c),t.ancestors.pop(),t.schema=i,t.create(e,a,l,n)}function cF(t,e,n){const i={};return P_(i,L_(t,e)),t.create(e,t.Fragment,i,n)}function fF(t,e){return e.value}function RI(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function P_(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function dF(t,e,n){return i;function i(s,a,l,c){const f=Array.isArray(l.children)?n:e;return c?f(a,l,c):f(a,l)}}function hF(t,e){return n;function n(i,s,a,l){const c=Array.isArray(a.children),h=M_(i);return e(s,a,l,c,{columnNumber:h?h.column-1:void 0,fileName:t,lineNumber:h?h.line:void 0},void 0)}}function pF(t,e){const n={};let i,s;for(s in e.properties)if(s!=="children"&&D_.call(e.properties,s)){const a=gF(t,s,e.properties[s]);if(a){const[l,c]=a;t.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&rF.has(e.tagName)?i=c:n[l]=c}}if(i){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function mF(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const a=i.data.estree.body[0];a.type;const l=a.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Tc(t,e.position);else{const s=i.name;let a;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const c=i.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else Tc(t,e.position);else a=i.value===null?!0:i.value;n[s]=a}return n}function L_(t,e){const n=[];let i=-1;const s=t.passKeys?new Map:tF;for(;++i<e.children.length;){const a=e.children[i];let l;if(t.passKeys){const h=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(h){const f=s.get(h)||0;l=h+"-"+f,s.set(h,f+1)}}const c=II(t,a,l);c!==void 0&&n.push(c)}return n}function gF(t,e,n){const i=H5(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?k5(n):$5(n)),i.property==="style"){let s=typeof n=="object"?n:yF(t,String(n));return t.stylePropertyNameCase==="css"&&(s=_F(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&i.space?z5[i.property]||i.property:i.attribute,n]}}function yF(t,e){try{return Z5(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,s=new Pn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=bI+"#cannot-parse-style-attribute",s}}function NI(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const c=EA(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}i=l}else i=EA(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const s=i.value;return D_.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(i);Tc(t)}function Tc(t,e){const n=new Pn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=bI+"#cannot-handle-mdx-estrees-without-createevaluater",n}function _F(t){const e={};let n;for(n in t)D_.call(t,n)&&(e[vF(n)]=t[n]);return e}function vF(t){let e=t.replace(nF,TF);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function TF(t){return"-"+t.toLowerCase()}const lg={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},EF={};function V_(t,e){const n=EF,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return kI(t,i,s)}function kI(t,e,n){if(SF(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return kA(t.children,e,n)}return Array.isArray(t)?kA(t,e,n):""}function kA(t,e,n){const i=[];let s=-1;for(;++s<t.length;)i[s]=kI(t[s],e,n);return i.join("")}function SF(t){return!!(t&&typeof t=="object")}const MA=document.createElement("i");function U_(t){const e="&"+t+";";MA.innerHTML=e;const n=MA.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function pi(t,e,n,i){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,i.length<1e4)l=Array.from(i),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<i.length;)l=i.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function Ri(t,e){return t.length>0?(pi(t,t.length,0,e),t):e}const DA={}.hasOwnProperty;function MI(t){const e={};let n=-1;for(;++n<t.length;)wF(e,t[n]);return e}function wF(t,e){let n;for(n in e){const s=(DA.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){DA.call(s,l)||(s[l]=[]);const c=a[l];AF(s[l],Array.isArray(c)?c:c?[c]:[])}}}function AF(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);pi(t,0,0,i)}function DI(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function $i(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Fn=co(/[A-Za-z]/),Mn=co(/[\dA-Za-z]/),xF=co(/[#-'*+\--9=?A-Z^-~]/);function ah(t){return t!==null&&(t<32||t===127)}const uy=co(/\d/),CF=co(/[\dA-Fa-f]/),bF=co(/[!-/:-@[-`{-~]/);function Pe(t){return t!==null&&t<-2}function At(t){return t!==null&&(t<0||t===32)}function Ke(t){return t===-2||t===-1||t===32}const Fh=co(new RegExp("\\p{P}|\\p{S}","u")),ea=co(/\s/);function co(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Vl(t){const e=[];let n=-1,i=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&Mn(t.charCodeAt(n+1))&&Mn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(l=String.fromCharCode(a,c),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(i,n),encodeURIComponent(l)),i=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(i)}function ot(t,e,n,i){const s=i?i-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(h){return Ke(h)?(t.enter(n),c(h)):e(h)}function c(h){return Ke(h)&&a++<s?(t.consume(h),c):(t.exit(n),e(h))}}const IF={tokenize:RF};function RF(t){const e=t.attempt(this.parser.constructs.contentInitial,i,s);let n;return e;function i(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),ot(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),a(c)}function a(c){const h=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return Pe(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),l)}}const NF={tokenize:kF},PA={tokenize:MF};function kF(t){const e=this,n=[];let i=0,s,a,l;return c;function c(B){if(i<n.length){const X=n[i];return e.containerState=X[1],t.attempt(X[0].continuation,h,f)(B)}return f(B)}function h(B){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&H();const X=e.events.length;let ne=X,Y;for(;ne--;)if(e.events[ne][0]==="exit"&&e.events[ne][1].type==="chunkFlow"){Y=e.events[ne][1].end;break}O(i);let R=X;for(;R<e.events.length;)e.events[R][1].end={...Y},R++;return pi(e.events,ne+1,0,e.events.slice(X)),e.events.length=R,f(B)}return c(B)}function f(B){if(i===n.length){if(!s)return E(B);if(s.currentConstruct&&s.currentConstruct.concrete)return b(B);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(PA,p,y)(B)}function p(B){return s&&H(),O(i),E(B)}function y(B){return e.parser.lazy[e.now().line]=i!==n.length,l=e.now().offset,b(B)}function E(B){return e.containerState={},t.attempt(PA,w,b)(B)}function w(B){return i++,n.push([e.currentConstruct,e.containerState]),E(B)}function b(B){if(B===null){s&&H(),O(0),t.consume(B);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),L(B)}function L(B){if(B===null){F(t.exit("chunkFlow"),!0),O(0),t.consume(B);return}return Pe(B)?(t.consume(B),F(t.exit("chunkFlow")),i=0,e.interrupt=void 0,c):(t.consume(B),L)}function F(B,X){const ne=e.sliceStream(B);if(X&&ne.push(null),B.previous=a,a&&(a.next=B),a=B,s.defineSkip(B.start),s.write(ne),e.parser.lazy[B.start.line]){let Y=s.events.length;for(;Y--;)if(s.events[Y][1].start.offset<l&&(!s.events[Y][1].end||s.events[Y][1].end.offset>l))return;const R=e.events.length;let P=R,D,I;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(D){I=e.events[P][1].end;break}D=!0}for(O(i),Y=R;Y<e.events.length;)e.events[Y][1].end={...I},Y++;pi(e.events,P+1,0,e.events.slice(R)),e.events.length=Y}}function O(B){let X=n.length;for(;X-- >B;){const ne=n[X];e.containerState=ne[1],ne[0].exit.call(e,t)}n.length=B}function H(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function MF(t,e,n){return ot(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Tl(t){if(t===null||At(t)||ea(t))return 1;if(Fh(t))return 2}function zh(t,e,n){const i=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!i.includes(a)&&(e=a(e,n),i.push(a))}return e}const cy={name:"attention",resolveAll:DF,tokenize:PF};function DF(t,e){let n=-1,i,s,a,l,c,h,f,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;h=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[i][1].end},E={...t[n][1].start};LA(y,-h),LA(E,h),l={type:h>1?"strongSequence":"emphasisSequence",start:y,end:{...t[i][1].end}},c={type:h>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:E},a={type:h>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},s={type:h>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[i][1].end={...l.start},t[n][1].start={...c.end},f=[],t[i][1].end.offset-t[i][1].start.offset&&(f=Ri(f,[["enter",t[i][1],e],["exit",t[i][1],e]])),f=Ri(f,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),f=Ri(f,zh(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),f=Ri(f,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,f=Ri(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):p=0,pi(t,i-1,n-i+3,f),n=i+f.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function PF(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,s=Tl(i);let a;return l;function l(h){return a=h,t.enter("attentionSequence"),c(h)}function c(h){if(h===a)return t.consume(h),c;const f=t.exit("attentionSequence"),p=Tl(h),y=!p||p===2&&s||n.includes(h),E=!s||s===2&&p||n.includes(i);return f._open=!!(a===42?y:y&&(s||!E)),f._close=!!(a===42?E:E&&(p||!y)),e(h)}}function LA(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const LF={name:"autolink",tokenize:VF};function VF(t,e,n){let i=0;return s;function s(w){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(w){return Fn(w)?(t.consume(w),l):w===64?n(w):f(w)}function l(w){return w===43||w===45||w===46||Mn(w)?(i=1,c(w)):f(w)}function c(w){return w===58?(t.consume(w),i=0,h):(w===43||w===45||w===46||Mn(w))&&i++<32?(t.consume(w),c):(i=0,f(w))}function h(w){return w===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),e):w===null||w===32||w===60||ah(w)?n(w):(t.consume(w),h)}function f(w){return w===64?(t.consume(w),p):xF(w)?(t.consume(w),f):n(w)}function p(w){return Mn(w)?y(w):n(w)}function y(w){return w===46?(t.consume(w),i=0,p):w===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),e):E(w)}function E(w){if((w===45||Mn(w))&&i++<63){const b=w===45?E:y;return t.consume(w),b}return n(w)}}const Oc={partial:!0,tokenize:UF};function UF(t,e,n){return i;function i(a){return Ke(a)?ot(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Pe(a)?e(a):n(a)}}const PI={continuation:{tokenize:FF},exit:zF,name:"blockQuote",tokenize:OF};function OF(t,e,n){const i=this;return s;function s(l){if(l===62){const c=i.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Ke(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function FF(t,e,n){const i=this;return s;function s(l){return Ke(l)?ot(t,a,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(PI,e,n)(l)}}function zF(t){t.exit("blockQuote")}const LI={name:"characterEscape",tokenize:qF};function qF(t,e,n){return i;function i(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return bF(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const VI={name:"characterReference",tokenize:BF};function BF(t,e,n){const i=this;let s=0,a,l;return c;function c(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),h}function h(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),a=31,l=Mn,p(y))}function f(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=CF,p):(t.enter("characterReferenceValue"),a=7,l=uy,p(y))}function p(y){if(y===59&&s){const E=t.exit("characterReferenceValue");return l===Mn&&!U_(i.sliceSerialize(E))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(y)&&s++<a?(t.consume(y),p):n(y)}}const VA={partial:!0,tokenize:GF},UA={concrete:!0,name:"codeFenced",tokenize:HF};function HF(t,e,n){const i=this,s={partial:!0,tokenize:ne};let a=0,l=0,c;return h;function h(Y){return f(Y)}function f(Y){const R=i.events[i.events.length-1];return a=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,c=Y,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(Y)}function p(Y){return Y===c?(l++,t.consume(Y),p):l<3?n(Y):(t.exit("codeFencedFenceSequence"),Ke(Y)?ot(t,y,"whitespace")(Y):y(Y))}function y(Y){return Y===null||Pe(Y)?(t.exit("codeFencedFence"),i.interrupt?e(Y):t.check(VA,L,X)(Y)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),E(Y))}function E(Y){return Y===null||Pe(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y(Y)):Ke(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ot(t,w,"whitespace")(Y)):Y===96&&Y===c?n(Y):(t.consume(Y),E)}function w(Y){return Y===null||Pe(Y)?y(Y):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(Y))}function b(Y){return Y===null||Pe(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y(Y)):Y===96&&Y===c?n(Y):(t.consume(Y),b)}function L(Y){return t.attempt(s,X,F)(Y)}function F(Y){return t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),O}function O(Y){return a>0&&Ke(Y)?ot(t,H,"linePrefix",a+1)(Y):H(Y)}function H(Y){return Y===null||Pe(Y)?t.check(VA,L,X)(Y):(t.enter("codeFlowValue"),B(Y))}function B(Y){return Y===null||Pe(Y)?(t.exit("codeFlowValue"),H(Y)):(t.consume(Y),B)}function X(Y){return t.exit("codeFenced"),e(Y)}function ne(Y,R,P){let D=0;return I;function I(me){return Y.enter("lineEnding"),Y.consume(me),Y.exit("lineEnding"),U}function U(me){return Y.enter("codeFencedFence"),Ke(me)?ot(Y,z,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(me):z(me)}function z(me){return me===c?(Y.enter("codeFencedFenceSequence"),k(me)):P(me)}function k(me){return me===c?(D++,Y.consume(me),k):D>=l?(Y.exit("codeFencedFenceSequence"),Ke(me)?ot(Y,oe,"whitespace")(me):oe(me)):P(me)}function oe(me){return me===null||Pe(me)?(Y.exit("codeFencedFence"),R(me)):P(me)}}}function GF(t,e,n){const i=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return i.parser.lazy[i.now().line]?n(l):e(l)}}const ug={name:"codeIndented",tokenize:YF},jF={partial:!0,tokenize:$F};function YF(t,e,n){const i=this;return s;function s(f){return t.enter("codeIndented"),ot(t,a,"linePrefix",5)(f)}function a(f){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?h(f):Pe(f)?t.attempt(jF,l,h)(f):(t.enter("codeFlowValue"),c(f))}function c(f){return f===null||Pe(f)?(t.exit("codeFlowValue"),l(f)):(t.consume(f),c)}function h(f){return t.exit("codeIndented"),e(f)}}function $F(t,e,n){const i=this;return s;function s(l){return i.parser.lazy[i.now().line]?n(l):Pe(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):ot(t,a,"linePrefix",5)(l)}function a(l){const c=i.events[i.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):Pe(l)?s(l):n(l)}}const JF={name:"codeText",previous:QF,resolve:KF,tokenize:XF};function KF(t){let e=t.length-4,n=3,i,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)s===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(s=i):(i===e||t[i][1].type==="lineEnding")&&(t[s][1].type="codeTextData",i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),e-=i-s-2,i=s+2),s=void 0);return t}function QF(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function XF(t,e,n){let i=0,s,a;return l;function l(y){return t.enter("codeText"),t.enter("codeTextSequence"),c(y)}function c(y){return y===96?(t.consume(y),i++,c):(t.exit("codeTextSequence"),h(y))}function h(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),h):y===96?(a=t.enter("codeTextSequence"),s=0,p(y)):Pe(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),h):(t.enter("codeTextData"),f(y))}function f(y){return y===null||y===32||y===96||Pe(y)?(t.exit("codeTextData"),h(y)):(t.consume(y),f)}function p(y){return y===96?(t.consume(y),s++,p):s===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(a.type="codeTextData",f(y))}}class WF{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return i&&qu(this.left,i),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),qu(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),qu(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);qu(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);qu(this.left,n.reverse())}}}function qu(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function UI(t){const e={};let n=-1,i,s,a,l,c,h,f;const p=new WF(t);for(;++n<p.length;){for(;n in e;)n=e[n];if(i=p.get(n),n&&i[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(h=i[1]._tokenizer.events,a=0,a<h.length&&h[a][1].type==="lineEndingBlank"&&(a+=2),a<h.length&&h[a][1].type==="content"))for(;++a<h.length&&h[a][1].type!=="content";)h[a][1].type==="chunkText"&&(h[a][1]._isInFirstContentOfListItem=!0,a++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,ZF(p,n)),n=e[n],f=!0);else if(i[1]._container){for(a=n,s=void 0;a--;)if(l=p.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(p.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(i[1].end={...p.get(s)[1].start},c=p.slice(s,n),c.unshift(i),p.splice(s,n-s+1,c))}}return pi(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!f}function ZF(t,e){const n=t.get(e)[1],i=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,h=[],f={};let p,y,E=-1,w=n,b=0,L=0;const F=[L];for(;w;){for(;t.get(++s)[1]!==w;);a.push(s),w._tokenizer||(p=i.sliceStream(w),w.next||p.push(null),y&&l.defineSkip(w.start),w._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),w._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),y=w,w=w.next}for(w=n;++E<c.length;)c[E][0]==="exit"&&c[E-1][0]==="enter"&&c[E][1].type===c[E-1][1].type&&c[E][1].start.line!==c[E][1].end.line&&(L=E+1,F.push(L),w._tokenizer=void 0,w.previous=void 0,w=w.next);for(l.events=[],w?(w._tokenizer=void 0,w.previous=void 0):F.pop(),E=F.length;E--;){const O=c.slice(F[E],F[E+1]),H=a.pop();h.push([H,H+O.length-1]),t.splice(H,2,O)}for(h.reverse(),E=-1;++E<h.length;)f[b+h[E][0]]=b+h[E][1],b+=h[E][1]-h[E][0]-1;return f}const e9={resolve:n9,tokenize:i9},t9={partial:!0,tokenize:r9};function n9(t){return UI(t),t}function i9(t,e){let n;return i;function i(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?a(c):Pe(c)?t.check(t9,l,a)(c):(t.consume(c),s)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function r9(t,e,n){const i=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),ot(t,a,"linePrefix")}function a(l){if(l===null||Pe(l))return n(l);const c=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):t.interrupt(i.parser.constructs.flow,n,e)(l)}}function OI(t,e,n,i,s,a,l,c,h){const f=h||Number.POSITIVE_INFINITY;let p=0;return y;function y(O){return O===60?(t.enter(i),t.enter(s),t.enter(a),t.consume(O),t.exit(a),E):O===null||O===32||O===41||ah(O)?n(O):(t.enter(i),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),L(O))}function E(O){return O===62?(t.enter(a),t.consume(O),t.exit(a),t.exit(s),t.exit(i),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),w(O))}function w(O){return O===62?(t.exit("chunkString"),t.exit(c),E(O)):O===null||O===60||Pe(O)?n(O):(t.consume(O),O===92?b:w)}function b(O){return O===60||O===62||O===92?(t.consume(O),w):w(O)}function L(O){return!p&&(O===null||O===41||At(O))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(i),e(O)):p<f&&O===40?(t.consume(O),p++,L):O===41?(t.consume(O),p--,L):O===null||O===32||O===40||ah(O)?n(O):(t.consume(O),O===92?F:L)}function F(O){return O===40||O===41||O===92?(t.consume(O),L):L(O)}}function FI(t,e,n,i,s,a){const l=this;let c=0,h;return f;function f(w){return t.enter(i),t.enter(s),t.consume(w),t.exit(s),t.enter(a),p}function p(w){return c>999||w===null||w===91||w===93&&!h||w===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(w):w===93?(t.exit(a),t.enter(s),t.consume(w),t.exit(s),t.exit(i),e):Pe(w)?(t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),y(w))}function y(w){return w===null||w===91||w===93||Pe(w)||c++>999?(t.exit("chunkString"),p(w)):(t.consume(w),h||(h=!Ke(w)),w===92?E:y)}function E(w){return w===91||w===92||w===93?(t.consume(w),c++,y):y(w)}}function zI(t,e,n,i,s,a){let l;return c;function c(E){return E===34||E===39||E===40?(t.enter(i),t.enter(s),t.consume(E),t.exit(s),l=E===40?41:E,h):n(E)}function h(E){return E===l?(t.enter(s),t.consume(E),t.exit(s),t.exit(i),e):(t.enter(a),f(E))}function f(E){return E===l?(t.exit(a),h(l)):E===null?n(E):Pe(E)?(t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),ot(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(E))}function p(E){return E===l||E===null||Pe(E)?(t.exit("chunkString"),f(E)):(t.consume(E),E===92?y:p)}function y(E){return E===l||E===92?(t.consume(E),p):p(E)}}function rc(t,e){let n;return i;function i(s){return Pe(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,i):Ke(s)?ot(t,i,n?"linePrefix":"lineSuffix")(s):e(s)}}const s9={name:"definition",tokenize:a9},o9={partial:!0,tokenize:l9};function a9(t,e,n){const i=this;let s;return a;function a(w){return t.enter("definition"),l(w)}function l(w){return FI.call(i,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(w)}function c(w){return s=$i(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),w===58?(t.enter("definitionMarker"),t.consume(w),t.exit("definitionMarker"),h):n(w)}function h(w){return At(w)?rc(t,f)(w):f(w)}function f(w){return OI(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(w)}function p(w){return t.attempt(o9,y,y)(w)}function y(w){return Ke(w)?ot(t,E,"whitespace")(w):E(w)}function E(w){return w===null||Pe(w)?(t.exit("definition"),i.parser.defined.push(s),e(w)):n(w)}}function l9(t,e,n){return i;function i(c){return At(c)?rc(t,s)(c):n(c)}function s(c){return zI(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return Ke(c)?ot(t,l,"whitespace")(c):l(c)}function l(c){return c===null||Pe(c)?e(c):n(c)}}const u9={name:"hardBreakEscape",tokenize:c9};function c9(t,e,n){return i;function i(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Pe(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const f9={name:"headingAtx",resolve:d9,tokenize:h9};function d9(t,e){let n=t.length-2,i=3,s,a;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(s={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},a={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},pi(t,i,n-i+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function h9(t,e,n){let i=0;return s;function s(p){return t.enter("atxHeading"),a(p)}function a(p){return t.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&i++<6?(t.consume(p),l):p===null||At(p)?(t.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(t.enter("atxHeadingSequence"),h(p)):p===null||Pe(p)?(t.exit("atxHeading"),e(p)):Ke(p)?ot(t,c,"whitespace")(p):(t.enter("atxHeadingText"),f(p))}function h(p){return p===35?(t.consume(p),h):(t.exit("atxHeadingSequence"),c(p))}function f(p){return p===null||p===35||At(p)?(t.exit("atxHeadingText"),c(p)):(t.consume(p),f)}}const p9=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],OA=["pre","script","style","textarea"],m9={concrete:!0,name:"htmlFlow",resolveTo:_9,tokenize:v9},g9={partial:!0,tokenize:E9},y9={partial:!0,tokenize:T9};function _9(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function v9(t,e,n){const i=this;let s,a,l,c,h;return f;function f(M){return p(M)}function p(M){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(M),y}function y(M){return M===33?(t.consume(M),E):M===47?(t.consume(M),a=!0,L):M===63?(t.consume(M),s=3,i.interrupt?e:q):Fn(M)?(t.consume(M),l=String.fromCharCode(M),F):n(M)}function E(M){return M===45?(t.consume(M),s=2,w):M===91?(t.consume(M),s=5,c=0,b):Fn(M)?(t.consume(M),s=4,i.interrupt?e:q):n(M)}function w(M){return M===45?(t.consume(M),i.interrupt?e:q):n(M)}function b(M){const se="CDATA[";return M===se.charCodeAt(c++)?(t.consume(M),c===se.length?i.interrupt?e:z:b):n(M)}function L(M){return Fn(M)?(t.consume(M),l=String.fromCharCode(M),F):n(M)}function F(M){if(M===null||M===47||M===62||At(M)){const se=M===47,ge=l.toLowerCase();return!se&&!a&&OA.includes(ge)?(s=1,i.interrupt?e(M):z(M)):p9.includes(l.toLowerCase())?(s=6,se?(t.consume(M),O):i.interrupt?e(M):z(M)):(s=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(M):a?H(M):B(M))}return M===45||Mn(M)?(t.consume(M),l+=String.fromCharCode(M),F):n(M)}function O(M){return M===62?(t.consume(M),i.interrupt?e:z):n(M)}function H(M){return Ke(M)?(t.consume(M),H):I(M)}function B(M){return M===47?(t.consume(M),I):M===58||M===95||Fn(M)?(t.consume(M),X):Ke(M)?(t.consume(M),B):I(M)}function X(M){return M===45||M===46||M===58||M===95||Mn(M)?(t.consume(M),X):ne(M)}function ne(M){return M===61?(t.consume(M),Y):Ke(M)?(t.consume(M),ne):B(M)}function Y(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(t.consume(M),h=M,R):Ke(M)?(t.consume(M),Y):P(M)}function R(M){return M===h?(t.consume(M),h=null,D):M===null||Pe(M)?n(M):(t.consume(M),R)}function P(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||At(M)?ne(M):(t.consume(M),P)}function D(M){return M===47||M===62||Ke(M)?B(M):n(M)}function I(M){return M===62?(t.consume(M),U):n(M)}function U(M){return M===null||Pe(M)?z(M):Ke(M)?(t.consume(M),U):n(M)}function z(M){return M===45&&s===2?(t.consume(M),K):M===60&&s===1?(t.consume(M),he):M===62&&s===4?(t.consume(M),G):M===63&&s===3?(t.consume(M),q):M===93&&s===5?(t.consume(M),Ie):Pe(M)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(g9,W,k)(M)):M===null||Pe(M)?(t.exit("htmlFlowData"),k(M)):(t.consume(M),z)}function k(M){return t.check(y9,oe,W)(M)}function oe(M){return t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),me}function me(M){return M===null||Pe(M)?k(M):(t.enter("htmlFlowData"),z(M))}function K(M){return M===45?(t.consume(M),q):z(M)}function he(M){return M===47?(t.consume(M),l="",Se):z(M)}function Se(M){if(M===62){const se=l.toLowerCase();return OA.includes(se)?(t.consume(M),G):z(M)}return Fn(M)&&l.length<8?(t.consume(M),l+=String.fromCharCode(M),Se):z(M)}function Ie(M){return M===93?(t.consume(M),q):z(M)}function q(M){return M===62?(t.consume(M),G):M===45&&s===2?(t.consume(M),q):z(M)}function G(M){return M===null||Pe(M)?(t.exit("htmlFlowData"),W(M)):(t.consume(M),G)}function W(M){return t.exit("htmlFlow"),e(M)}}function T9(t,e,n){const i=this;return s;function s(l){return Pe(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return i.parser.lazy[i.now().line]?n(l):e(l)}}function E9(t,e,n){return i;function i(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(Oc,e,n)}}const S9={name:"htmlText",tokenize:w9};function w9(t,e,n){const i=this;let s,a,l;return c;function c(q){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(q),h}function h(q){return q===33?(t.consume(q),f):q===47?(t.consume(q),ne):q===63?(t.consume(q),B):Fn(q)?(t.consume(q),P):n(q)}function f(q){return q===45?(t.consume(q),p):q===91?(t.consume(q),a=0,b):Fn(q)?(t.consume(q),H):n(q)}function p(q){return q===45?(t.consume(q),w):n(q)}function y(q){return q===null?n(q):q===45?(t.consume(q),E):Pe(q)?(l=y,he(q)):(t.consume(q),y)}function E(q){return q===45?(t.consume(q),w):y(q)}function w(q){return q===62?K(q):q===45?E(q):y(q)}function b(q){const G="CDATA[";return q===G.charCodeAt(a++)?(t.consume(q),a===G.length?L:b):n(q)}function L(q){return q===null?n(q):q===93?(t.consume(q),F):Pe(q)?(l=L,he(q)):(t.consume(q),L)}function F(q){return q===93?(t.consume(q),O):L(q)}function O(q){return q===62?K(q):q===93?(t.consume(q),O):L(q)}function H(q){return q===null||q===62?K(q):Pe(q)?(l=H,he(q)):(t.consume(q),H)}function B(q){return q===null?n(q):q===63?(t.consume(q),X):Pe(q)?(l=B,he(q)):(t.consume(q),B)}function X(q){return q===62?K(q):B(q)}function ne(q){return Fn(q)?(t.consume(q),Y):n(q)}function Y(q){return q===45||Mn(q)?(t.consume(q),Y):R(q)}function R(q){return Pe(q)?(l=R,he(q)):Ke(q)?(t.consume(q),R):K(q)}function P(q){return q===45||Mn(q)?(t.consume(q),P):q===47||q===62||At(q)?D(q):n(q)}function D(q){return q===47?(t.consume(q),K):q===58||q===95||Fn(q)?(t.consume(q),I):Pe(q)?(l=D,he(q)):Ke(q)?(t.consume(q),D):K(q)}function I(q){return q===45||q===46||q===58||q===95||Mn(q)?(t.consume(q),I):U(q)}function U(q){return q===61?(t.consume(q),z):Pe(q)?(l=U,he(q)):Ke(q)?(t.consume(q),U):D(q)}function z(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(t.consume(q),s=q,k):Pe(q)?(l=z,he(q)):Ke(q)?(t.consume(q),z):(t.consume(q),oe)}function k(q){return q===s?(t.consume(q),s=void 0,me):q===null?n(q):Pe(q)?(l=k,he(q)):(t.consume(q),k)}function oe(q){return q===null||q===34||q===39||q===60||q===61||q===96?n(q):q===47||q===62||At(q)?D(q):(t.consume(q),oe)}function me(q){return q===47||q===62||At(q)?D(q):n(q)}function K(q){return q===62?(t.consume(q),t.exit("htmlTextData"),t.exit("htmlText"),e):n(q)}function he(q){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),Se}function Se(q){return Ke(q)?ot(t,Ie,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):Ie(q)}function Ie(q){return t.enter("htmlTextData"),l(q)}}const O_={name:"labelEnd",resolveAll:b9,resolveTo:I9,tokenize:R9},A9={tokenize:N9},x9={tokenize:k9},C9={tokenize:M9};function b9(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const s=i.type==="labelImage"?4:2;i.type="data",e+=s}}return t.length!==n.length&&pi(t,0,t.length,n),t}function I9(t,e){let n=t.length,i=0,s,a,l,c;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){i=2;break}}else s.type==="labelEnd"&&(l=n);const h={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},p={type:"labelText",start:{...t[a+i+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",h,e],["enter",f,e]],c=Ri(c,t.slice(a+1,a+i+3)),c=Ri(c,[["enter",p,e]]),c=Ri(c,zh(e.parser.constructs.insideSpan.null,t.slice(a+i+4,l-3),e)),c=Ri(c,[["exit",p,e],t[l-2],t[l-1],["exit",f,e]]),c=Ri(c,t.slice(l+1)),c=Ri(c,[["exit",h,e]]),pi(t,a,t.length,c),t}function R9(t,e,n){const i=this;let s=i.events.length,a,l;for(;s--;)if((i.events[s][1].type==="labelImage"||i.events[s][1].type==="labelLink")&&!i.events[s][1]._balanced){a=i.events[s][1];break}return c;function c(E){return a?a._inactive?y(E):(l=i.parser.defined.includes($i(i.sliceSerialize({start:a.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(E),t.exit("labelMarker"),t.exit("labelEnd"),h):n(E)}function h(E){return E===40?t.attempt(A9,p,l?p:y)(E):E===91?t.attempt(x9,p,l?f:y)(E):l?p(E):y(E)}function f(E){return t.attempt(C9,p,y)(E)}function p(E){return e(E)}function y(E){return a._balanced=!0,n(E)}}function N9(t,e,n){return i;function i(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),s}function s(y){return At(y)?rc(t,a)(y):a(y)}function a(y){return y===41?p(y):OI(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function l(y){return At(y)?rc(t,h)(y):p(y)}function c(y){return n(y)}function h(y){return y===34||y===39||y===40?zI(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):p(y)}function f(y){return At(y)?rc(t,p)(y):p(y)}function p(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function k9(t,e,n){const i=this;return s;function s(c){return FI.call(i,t,a,l,"reference","referenceMarker","referenceString")(c)}function a(c){return i.parser.defined.includes($i(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function l(c){return n(c)}}function M9(t,e,n){return i;function i(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const D9={name:"labelStartImage",resolveAll:O_.resolveAll,tokenize:P9};function P9(t,e,n){const i=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(c):e(c)}}const L9={name:"labelStartLink",resolveAll:O_.resolveAll,tokenize:V9};function V9(t,e,n){const i=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):e(l)}}const cg={name:"lineEnding",tokenize:U9};function U9(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),ot(t,e,"linePrefix")}}const Pd={name:"thematicBreak",tokenize:O9};function O9(t,e,n){let i=0,s;return a;function a(f){return t.enter("thematicBreak"),l(f)}function l(f){return s=f,c(f)}function c(f){return f===s?(t.enter("thematicBreakSequence"),h(f)):i>=3&&(f===null||Pe(f))?(t.exit("thematicBreak"),e(f)):n(f)}function h(f){return f===s?(t.consume(f),i++,h):(t.exit("thematicBreakSequence"),Ke(f)?ot(t,c,"whitespace")(f):c(f))}}const Xn={continuation:{tokenize:B9},exit:G9,name:"list",tokenize:q9},F9={partial:!0,tokenize:j9},z9={partial:!0,tokenize:H9};function q9(t,e,n){const i=this,s=i.events[i.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return c;function c(w){const b=i.containerState.type||(w===42||w===43||w===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!i.containerState.marker||w===i.containerState.marker:uy(w)){if(i.containerState.type||(i.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),w===42||w===45?t.check(Pd,n,f)(w):f(w);if(!i.interrupt||w===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(w)}return n(w)}function h(w){return uy(w)&&++l<10?(t.consume(w),h):(!i.interrupt||l<2)&&(i.containerState.marker?w===i.containerState.marker:w===41||w===46)?(t.exit("listItemValue"),f(w)):n(w)}function f(w){return t.enter("listItemMarker"),t.consume(w),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||w,t.check(Oc,i.interrupt?n:p,t.attempt(F9,E,y))}function p(w){return i.containerState.initialBlankLine=!0,a++,E(w)}function y(w){return Ke(w)?(t.enter("listItemPrefixWhitespace"),t.consume(w),t.exit("listItemPrefixWhitespace"),E):n(w)}function E(w){return i.containerState.size=a+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(w)}}function B9(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Oc,s,a);function s(c){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ot(t,e,"listItemIndent",i.containerState.size+1)(c)}function a(c){return i.containerState.furtherBlankLines||!Ke(c)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,l(c)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(z9,e,l)(c))}function l(c){return i.containerState._closeFlow=!0,i.interrupt=void 0,ot(t,t.attempt(Xn,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function H9(t,e,n){const i=this;return ot(t,s,"listItemIndent",i.containerState.size+1);function s(a){const l=i.events[i.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===i.containerState.size?e(a):n(a)}}function G9(t){t.exit(this.containerState.type)}function j9(t,e,n){const i=this;return ot(t,s,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=i.events[i.events.length-1];return!Ke(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const FA={name:"setextUnderline",resolveTo:Y9,tokenize:$9};function Y9(t,e){let n=t.length,i,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[i][1],e]),t[i][1].end={...t[a][1].end}):t[i][1]=l,t.push(["exit",l,e]),t}function $9(t,e,n){const i=this;let s;return a;function a(f){let p=i.events.length,y;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){y=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||y)?(t.enter("setextHeadingLine"),s=f,l(f)):n(f)}function l(f){return t.enter("setextHeadingLineSequence"),c(f)}function c(f){return f===s?(t.consume(f),c):(t.exit("setextHeadingLineSequence"),Ke(f)?ot(t,h,"lineSuffix")(f):h(f))}function h(f){return f===null||Pe(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const J9={tokenize:K9};function K9(t){const e=this,n=t.attempt(Oc,i,t.attempt(this.parser.constructs.flowInitial,s,ot(t,t.attempt(this.parser.constructs.flow,s,t.attempt(e9,s)),"linePrefix")));return n;function i(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Q9={resolveAll:BI()},X9=qI("string"),W9=qI("text");function qI(t){return{resolveAll:BI(t==="text"?Z9:void 0),tokenize:e};function e(n){const i=this,s=this.parser.constructs[t],a=n.attempt(s,l,c);return l;function l(p){return f(p)?a(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),h}function h(p){return f(p)?(n.exit("data"),a(p)):(n.consume(p),h)}function f(p){if(p===null)return!0;const y=s[p];let E=-1;if(y)for(;++E<y.length;){const w=y[E];if(!w.previous||w.previous.call(i,i.previous))return!0}return!1}}}function BI(t){return e;function e(n,i){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,i):n}}function Z9(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],s=e.sliceStream(i);let a=s.length,l=-1,c=0,h;for(;a--;){const f=s[a];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(f===-2)h=!0,c++;else if(f!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const f={type:n===t.length||h||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:i.start._bufferIndex+l,_index:i.start._index+a,line:i.end.line,column:i.end.column-c,offset:i.end.offset-c},end:{...i.end}};i.end={...f.start},i.start.offset===i.end.offset?Object.assign(i,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const ez={42:Xn,43:Xn,45:Xn,48:Xn,49:Xn,50:Xn,51:Xn,52:Xn,53:Xn,54:Xn,55:Xn,56:Xn,57:Xn,62:PI},tz={91:s9},nz={[-2]:ug,[-1]:ug,32:ug},iz={35:f9,42:Pd,45:[FA,Pd],60:m9,61:FA,95:Pd,96:UA,126:UA},rz={38:VI,92:LI},sz={[-5]:cg,[-4]:cg,[-3]:cg,33:D9,38:VI,42:cy,60:[LF,S9],91:L9,92:[u9,LI],93:O_,95:cy,96:JF},oz={null:[cy,Q9]},az={null:[42,95]},lz={null:[]},uz=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:az,contentInitial:tz,disable:lz,document:ez,flow:iz,flowInitial:nz,insideSpan:oz,string:rz,text:sz},Symbol.toStringTag,{value:"Module"}));function cz(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],c=[];const h={attempt:R(ne),check:R(Y),consume:H,enter:B,exit:X,interrupt:R(Y,{interrupt:!0})},f={code:null,containerState:{},defineSkip:L,events:[],now:b,parser:t,previous:null,sliceSerialize:E,sliceStream:w,write:y};let p=e.tokenize.call(f,h);return e.resolveAll&&a.push(e),f;function y(U){return l=Ri(l,U),F(),l[l.length-1]!==null?[]:(P(e,0),f.events=zh(a,f.events,f),f.events)}function E(U,z){return dz(w(U),z)}function w(U){return fz(l,U)}function b(){const{_bufferIndex:U,_index:z,line:k,column:oe,offset:me}=i;return{_bufferIndex:U,_index:z,line:k,column:oe,offset:me}}function L(U){s[U.line]=U.column,I()}function F(){let U;for(;i._index<l.length;){const z=l[i._index];if(typeof z=="string")for(U=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===U&&i._bufferIndex<z.length;)O(z.charCodeAt(i._bufferIndex));else O(z)}}function O(U){p=p(U)}function H(U){Pe(U)?(i.line++,i.column=1,i.offset+=U===-3?2:1,I()):U!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===l[i._index].length&&(i._bufferIndex=-1,i._index++)),f.previous=U}function B(U,z){const k=z||{};return k.type=U,k.start=b(),f.events.push(["enter",k,f]),c.push(k),k}function X(U){const z=c.pop();return z.end=b(),f.events.push(["exit",z,f]),z}function ne(U,z){P(U,z.from)}function Y(U,z){z.restore()}function R(U,z){return k;function k(oe,me,K){let he,Se,Ie,q;return Array.isArray(oe)?W(oe):"tokenize"in oe?W([oe]):G(oe);function G(Te){return Ae;function Ae(Re){const ze=Re!==null&&Te[Re],on=Re!==null&&Te.null,Dt=[...Array.isArray(ze)?ze:ze?[ze]:[],...Array.isArray(on)?on:on?[on]:[]];return W(Dt)(Re)}}function W(Te){return he=Te,Se=0,Te.length===0?K:M(Te[Se])}function M(Te){return Ae;function Ae(Re){return q=D(),Ie=Te,Te.partial||(f.currentConstruct=Te),Te.name&&f.parser.constructs.disable.null.includes(Te.name)?ge():Te.tokenize.call(z?Object.assign(Object.create(f),z):f,h,se,ge)(Re)}}function se(Te){return U(Ie,q),me}function ge(Te){return q.restore(),++Se<he.length?M(he[Se]):K}}}function P(U,z){U.resolveAll&&!a.includes(U)&&a.push(U),U.resolve&&pi(f.events,z,f.events.length-z,U.resolve(f.events.slice(z),f)),U.resolveTo&&(f.events=U.resolveTo(f.events,f))}function D(){const U=b(),z=f.previous,k=f.currentConstruct,oe=f.events.length,me=Array.from(c);return{from:oe,restore:K};function K(){i=U,f.previous=z,f.currentConstruct=k,f.events.length=oe,c=me,I()}}function I(){i.line in s&&i.column<2&&(i.column=s[i.line],i.offset+=s[i.line]-1)}}function fz(t,e){const n=e.start._index,i=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(i,a)];else{if(l=t.slice(n,s),i>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(i):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function dz(t,e){let n=-1;const i=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,i.push(l)}return i.join("")}function hz(t){const i={constructs:MI([uz,...(t||{}).extensions||[]]),content:s(IF),defined:[],document:s(NF),flow:s(J9),lazy:{},string:s(X9),text:s(W9)};return i;function s(a){return l;function l(c){return cz(i,a,c)}}}function pz(t){for(;!UI(t););return t}const zA=/[\0\t\n\r]/g;function mz(){let t=1,e="",n=!0,i;return s;function s(a,l,c){const h=[];let f,p,y,E,w;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),y=0,e="",n&&(a.charCodeAt(0)===65279&&y++,n=void 0);y<a.length;){if(zA.lastIndex=y,f=zA.exec(a),E=f&&f.index!==void 0?f.index:a.length,w=a.charCodeAt(E),!f){e=a.slice(y);break}if(w===10&&y===E&&i)h.push(-3),i=void 0;else switch(i&&(h.push(-5),i=void 0),y<E&&(h.push(a.slice(y,E)),t+=E-y),w){case 0:{h.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,h.push(-2);t++<p;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:i=!0,t=1}y=E+1}return c&&(i&&h.push(-5),e&&h.push(e),h.push(null)),h}}const gz=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function yz(t){return t.replace(gz,_z)}function _z(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return DI(n.slice(a?2:1),a?16:10)}return U_(n)||t}const HI={}.hasOwnProperty;function vz(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Tz(n)(pz(hz(n).document().write(mz()(t,e,!0))))}function Tz(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(je),autolinkProtocol:D,autolinkEmail:D,atxHeading:a(mi),blockQuote:a(on),characterEscape:D,characterReference:D,codeFenced:a(Dt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Dt,l),codeText:a(yt,l),codeTextData:D,data:D,codeFlowValue:D,definition:a(qt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Nt),hardBreakEscape:a(qn),hardBreakTrailing:a(qn),htmlFlow:a(Bn,l),htmlFlowData:D,htmlText:a(Bn,l),htmlTextData:D,image:a(Qi),label:l,link:a(je),listItem:a(Hn),listItemValue:E,listOrdered:a(rt,y),listUnordered:a(rt),paragraph:a(us),reference:M,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(mi),strong:a(sa),thematicBreak:a(Ir)},exit:{atxHeading:h(),atxHeadingSequence:ne,autolink:h(),autolinkEmail:ze,autolinkProtocol:Re,blockQuote:h(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:Te,characterReference:Ae,codeFenced:h(F),codeFencedFence:L,codeFencedFenceInfo:w,codeFencedFenceMeta:b,codeFlowValue:I,codeIndented:h(O),codeText:h(me),codeTextData:I,data:I,definition:h(),definitionDestinationString:X,definitionLabelString:H,definitionTitleString:B,emphasis:h(),hardBreakEscape:h(z),hardBreakTrailing:h(z),htmlFlow:h(k),htmlFlowData:I,htmlText:h(oe),htmlTextData:I,image:h(he),label:Ie,labelText:Se,lineEnding:U,link:h(K),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:se,resourceDestinationString:q,resourceTitleString:G,resource:W,setextHeading:h(P),setextHeadingLineSequence:R,setextHeadingText:Y,strong:h(),thematicBreak:h()}};GI(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(ue){let _e={type:"root",children:[]};const De={stack:[_e],tokenStack:[],config:e,enter:c,exit:f,buffer:l,resume:p,data:n},Ye=[];let lt=-1;for(;++lt<ue.length;)if(ue[lt][1].type==="listOrdered"||ue[lt][1].type==="listUnordered")if(ue[lt][0]==="enter")Ye.push(lt);else{const Cn=Ye.pop();lt=s(ue,Cn,lt)}for(lt=-1;++lt<ue.length;){const Cn=e[ue[lt][0]];HI.call(Cn,ue[lt][1].type)&&Cn[ue[lt][1].type].call(Object.assign({sliceSerialize:ue[lt][2].sliceSerialize},De),ue[lt][1])}if(De.tokenStack.length>0){const Cn=De.tokenStack[De.tokenStack.length-1];(Cn[1]||qA).call(De,void 0,Cn[0])}for(_e.position={start:Bs(ue.length>0?ue[0][1].start:{line:1,column:1,offset:0}),end:Bs(ue.length>0?ue[ue.length-2][1].end:{line:1,column:1,offset:0})},lt=-1;++lt<e.transforms.length;)_e=e.transforms[lt](_e)||_e;return _e}function s(ue,_e,De){let Ye=_e-1,lt=-1,Cn=!1,gi,Bt,Pt,cn;for(;++Ye<=De;){const tt=ue[Ye];switch(tt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tt[0]==="enter"?lt++:lt--,cn=void 0;break}case"lineEndingBlank":{tt[0]==="enter"&&(gi&&!cn&&!lt&&!Pt&&(Pt=Ye),cn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:cn=void 0}if(!lt&&tt[0]==="enter"&&tt[1].type==="listItemPrefix"||lt===-1&&tt[0]==="exit"&&(tt[1].type==="listUnordered"||tt[1].type==="listOrdered")){if(gi){let Mi=Ye;for(Bt=void 0;Mi--;){const bn=ue[Mi];if(bn[1].type==="lineEnding"||bn[1].type==="lineEndingBlank"){if(bn[0]==="exit")continue;Bt&&(ue[Bt][1].type="lineEndingBlank",Cn=!0),bn[1].type="lineEnding",Bt=Mi}else if(!(bn[1].type==="linePrefix"||bn[1].type==="blockQuotePrefix"||bn[1].type==="blockQuotePrefixWhitespace"||bn[1].type==="blockQuoteMarker"||bn[1].type==="listItemIndent"))break}Pt&&(!Bt||Pt<Bt)&&(gi._spread=!0),gi.end=Object.assign({},Bt?ue[Bt][1].start:tt[1].end),ue.splice(Bt||Ye,0,["exit",gi,tt[2]]),Ye++,De++}if(tt[1].type==="listItemPrefix"){const Mi={type:"listItem",_spread:!1,start:Object.assign({},tt[1].start),end:void 0};gi=Mi,ue.splice(Ye,0,["enter",Mi,tt[2]]),Ye++,De++,Pt=void 0,cn=!0}}}return ue[_e][1]._spread=Cn,De}function a(ue,_e){return De;function De(Ye){c.call(this,ue(Ye),Ye),_e&&_e.call(this,Ye)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(ue,_e,De){this.stack[this.stack.length-1].children.push(ue),this.stack.push(ue),this.tokenStack.push([_e,De||void 0]),ue.position={start:Bs(_e.start),end:void 0}}function h(ue){return _e;function _e(De){ue&&ue.call(this,De),f.call(this,De)}}function f(ue,_e){const De=this.stack.pop(),Ye=this.tokenStack.pop();if(Ye)Ye[0].type!==ue.type&&(_e?_e.call(this,ue,Ye[0]):(Ye[1]||qA).call(this,ue,Ye[0]));else throw new Error("Cannot close `"+ue.type+"` ("+ic({start:ue.start,end:ue.end})+"): its not open");De.position.end=Bs(ue.end)}function p(){return V_(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function E(ue){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(ue),10),this.data.expectingFirstListItemValue=void 0}}function w(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=ue}function b(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=ue}function L(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function F(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ue.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function O(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ue.replace(/(\r?\n|\r)$/g,"")}function H(ue){const _e=this.resume(),De=this.stack[this.stack.length-1];De.label=_e,De.identifier=$i(this.sliceSerialize(ue)).toLowerCase()}function B(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.title=ue}function X(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.url=ue}function ne(ue){const _e=this.stack[this.stack.length-1];if(!_e.depth){const De=this.sliceSerialize(ue).length;_e.depth=De}}function Y(){this.data.setextHeadingSlurpLineEnding=!0}function R(ue){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(ue).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function D(ue){const De=this.stack[this.stack.length-1].children;let Ye=De[De.length-1];(!Ye||Ye.type!=="text")&&(Ye=gn(),Ye.position={start:Bs(ue.start),end:void 0},De.push(Ye)),this.stack.push(Ye)}function I(ue){const _e=this.stack.pop();_e.value+=this.sliceSerialize(ue),_e.position.end=Bs(ue.end)}function U(ue){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const De=_e.children[_e.children.length-1];De.position.end=Bs(ue.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(_e.type)&&(D.call(this,ue),I.call(this,ue))}function z(){this.data.atHardBreak=!0}function k(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ue}function oe(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ue}function me(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.value=ue}function K(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=_e,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function he(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=_e,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function Se(ue){const _e=this.sliceSerialize(ue),De=this.stack[this.stack.length-2];De.label=yz(_e),De.identifier=$i(_e).toLowerCase()}function Ie(){const ue=this.stack[this.stack.length-1],_e=this.resume(),De=this.stack[this.stack.length-1];if(this.data.inReference=!0,De.type==="link"){const Ye=ue.children;De.children=Ye}else De.alt=_e}function q(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.url=ue}function G(){const ue=this.resume(),_e=this.stack[this.stack.length-1];_e.title=ue}function W(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function se(ue){const _e=this.resume(),De=this.stack[this.stack.length-1];De.label=_e,De.identifier=$i(this.sliceSerialize(ue)).toLowerCase(),this.data.referenceType="full"}function ge(ue){this.data.characterReferenceType=ue.type}function Te(ue){const _e=this.sliceSerialize(ue),De=this.data.characterReferenceType;let Ye;De?(Ye=DI(_e,De==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ye=U_(_e);const lt=this.stack[this.stack.length-1];lt.value+=Ye}function Ae(ue){const _e=this.stack.pop();_e.position.end=Bs(ue.end)}function Re(ue){I.call(this,ue);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(ue)}function ze(ue){I.call(this,ue);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(ue)}function on(){return{type:"blockquote",children:[]}}function Dt(){return{type:"code",lang:null,meta:null,value:""}}function yt(){return{type:"inlineCode",value:""}}function qt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Nt(){return{type:"emphasis",children:[]}}function mi(){return{type:"heading",depth:0,children:[]}}function qn(){return{type:"break"}}function Bn(){return{type:"html",value:""}}function Qi(){return{type:"image",title:null,url:"",alt:null}}function je(){return{type:"link",title:null,url:"",children:[]}}function rt(ue){return{type:"list",ordered:ue.type==="listOrdered",start:null,spread:ue._spread,children:[]}}function Hn(ue){return{type:"listItem",spread:ue._spread,checked:null,children:[]}}function us(){return{type:"paragraph",children:[]}}function sa(){return{type:"strong",children:[]}}function gn(){return{type:"text",value:""}}function Ir(){return{type:"thematicBreak"}}}function Bs(t){return{line:t.line,column:t.column,offset:t.offset}}function GI(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?GI(t,i):Ez(t,i)}}function Ez(t,e){let n;for(n in e)if(HI.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function qA(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+ic({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+ic({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+ic({start:e.start,end:e.end})+") is still open")}function Sz(t){const e=this;e.parser=n;function n(i){return vz(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function wz(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Az(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function xz(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function Cz(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function bz(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Iz(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),s=Vl(i.toLowerCase()),a=t.footnoteOrder.indexOf(i);let l,c=t.footnoteCounts.get(i);c===void 0?(c=0,t.footnoteOrder.push(i),l=t.footnoteOrder.length):l=a+1,c+=1,t.footnoteCounts.set(i,c);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,h);const f={type:"element",tagName:"sup",properties:{},children:[h]};return t.patch(e,f),t.applyData(e,f)}function Rz(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Nz(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function jI(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=i:s.push({type:"text",value:i}),s}function kz(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return jI(t,e);const s={src:Vl(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(s.title=i.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function Mz(t,e){const n={src:Vl(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function Dz(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function Pz(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return jI(t,e);const s={href:Vl(i.url||"")};i.title!==null&&i.title!==void 0&&(s.title=i.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function Lz(t,e){const n={href:Vl(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function Vz(t,e,n){const i=t.all(e),s=n?Uz(n):YI(e),a={},l=[];if(typeof e.checked=="boolean"){const p=i[0];let y;p&&p.type==="element"&&p.tagName==="p"?y=p:(y={type:"element",tagName:"p",properties:{},children:[]},i.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<i.length;){const p=i[c];(s||c!==0||p.type!=="element"||p.tagName!=="p")&&l.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!s?l.push(...p.children):l.push(p)}const h=i[i.length-1];h&&(s||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,f),t.applyData(e,f)}function Uz(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=YI(n[i])}return e}function YI(t){const e=t.spread;return e??t.children.length>1}function Oz(t,e){const n={},i=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<i.length;){const l=i[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,a),t.applyData(e,a)}function Fz(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function zz(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function qz(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Bz(t,e){const n=t.all(e),i=n.shift(),s=[];if(i){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=M_(e.children[1]),h=xI(e.children[e.children.length-1]);c&&h&&(l.position={start:c,end:h}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function Hz(t,e,n){const i=n?n.children:void 0,a=(i?i.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:e.children.length;let h=-1;const f=[];for(;++h<c;){const y=e.children[h],E={},w=l?l[h]:void 0;w&&(E.align=w);let b={type:"element",tagName:a,properties:E,children:[]};y&&(b.children=t.all(y),t.patch(y,b),b=t.applyData(y,b)),f.push(b)}const p={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(e,p),t.applyData(e,p)}function Gz(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const BA=9,HA=32;function jz(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),s=0;const a=[];for(;i;)a.push(GA(e.slice(s,i.index),s>0,!0),i[0]),s=i.index+i[0].length,i=n.exec(e);return a.push(GA(e.slice(s),s>0,!1)),a.join("")}function GA(t,e,n){let i=0,s=t.length;if(e){let a=t.codePointAt(i);for(;a===BA||a===HA;)i++,a=t.codePointAt(i)}if(n){let a=t.codePointAt(s-1);for(;a===BA||a===HA;)s--,a=t.codePointAt(s-1)}return s>i?t.slice(i,s):""}function Yz(t,e){const n={type:"text",value:jz(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function $z(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Jz={blockquote:wz,break:Az,code:xz,delete:Cz,emphasis:bz,footnoteReference:Iz,heading:Rz,html:Nz,imageReference:kz,image:Mz,inlineCode:Dz,linkReference:Pz,link:Lz,listItem:Vz,list:Oz,paragraph:Fz,root:zz,strong:qz,table:Bz,tableCell:Gz,tableRow:Hz,text:Yz,thematicBreak:$z,toml:_d,yaml:_d,definition:_d,footnoteDefinition:_d};function _d(){}const $I=-1,qh=0,sc=1,lh=2,F_=3,z_=4,q_=5,B_=6,JI=7,KI=8,jA=typeof self=="object"?self:globalThis,Kz=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),i=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case qh:case $I:return n(l,s);case sc:{const c=n([],s);for(const h of l)c.push(i(h));return c}case lh:{const c=n({},s);for(const[h,f]of l)c[i(h)]=i(f);return c}case F_:return n(new Date(l),s);case z_:{const{source:c,flags:h}=l;return n(new RegExp(c,h),s)}case q_:{const c=n(new Map,s);for(const[h,f]of l)c.set(i(h),i(f));return c}case B_:{const c=n(new Set,s);for(const h of l)c.add(i(h));return c}case JI:{const{name:c,message:h}=l;return n(new jA[c](h),s)}case KI:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new jA[a](l),s)};return i},YA=t=>Kz(new Map,t)(0),$a="",{toString:Qz}={},{keys:Xz}=Object,Bu=t=>{const e=typeof t;if(e!=="object"||!t)return[qh,e];const n=Qz.call(t).slice(8,-1);switch(n){case"Array":return[sc,$a];case"Object":return[lh,$a];case"Date":return[F_,$a];case"RegExp":return[z_,$a];case"Map":return[q_,$a];case"Set":return[B_,$a];case"DataView":return[sc,n]}return n.includes("Array")?[sc,n]:n.includes("Error")?[JI,n]:[lh,n]},vd=([t,e])=>t===qh&&(e==="function"||e==="symbol"),Wz=(t,e,n,i)=>{const s=(l,c)=>{const h=i.push(l)-1;return n.set(c,h),h},a=l=>{if(n.has(l))return n.get(l);let[c,h]=Bu(l);switch(c){case qh:{let p=l;switch(h){case"bigint":c=KI,p=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+h);p=null;break;case"undefined":return s([$I],l)}return s([c,p],l)}case sc:{if(h){let E=l;return h==="DataView"?E=new Uint8Array(l.buffer):h==="ArrayBuffer"&&(E=new Uint8Array(l)),s([h,[...E]],l)}const p=[],y=s([c,p],l);for(const E of l)p.push(a(E));return y}case lh:{if(h)switch(h){case"BigInt":return s([h,l.toString()],l);case"Boolean":case"Number":case"String":return s([h,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const p=[],y=s([c,p],l);for(const E of Xz(l))(t||!vd(Bu(l[E])))&&p.push([a(E),a(l[E])]);return y}case F_:return s([c,l.toISOString()],l);case z_:{const{source:p,flags:y}=l;return s([c,{source:p,flags:y}],l)}case q_:{const p=[],y=s([c,p],l);for(const[E,w]of l)(t||!(vd(Bu(E))||vd(Bu(w))))&&p.push([a(E),a(w)]);return y}case B_:{const p=[],y=s([c,p],l);for(const E of l)(t||!vd(Bu(E)))&&p.push(a(E));return y}}const{message:f}=l;return s([c,{name:h,message:f}],l)};return a},$A=(t,{json:e,lossy:n}={})=>{const i=[];return Wz(!(e||n),!!e,new Map,i)(t),i},uh=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?YA($A(t,e)):structuredClone(t):(t,e)=>YA($A(t,e));function Zz(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function eq(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function tq(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Zz,i=t.options.footnoteBackLabel||eq,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let h=-1;for(;++h<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[h]);if(!f)continue;const p=t.all(f),y=String(f.identifier).toUpperCase(),E=Vl(y.toLowerCase());let w=0;const b=[],L=t.footnoteCounts.get(y);for(;L!==void 0&&++w<=L;){b.length>0&&b.push({type:"text",value:" "});let H=typeof n=="string"?n:n(h,w);typeof H=="string"&&(H={type:"text",value:H}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+E+(w>1?"-"+w:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(h,w),className:["data-footnote-backref"]},children:Array.isArray(H)?H:[H]})}const F=p[p.length-1];if(F&&F.type==="element"&&F.tagName==="p"){const H=F.children[F.children.length-1];H&&H.type==="text"?H.value+=" ":F.children.push({type:"text",value:" "}),F.children.push(...b)}else p.push(...b);const O={type:"element",tagName:"li",properties:{id:e+"fn-"+E},children:t.wrap(p,!0)};t.patch(f,O),c.push(O)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...uh(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const Bh=(function(t){if(t==null)return sq;if(typeof t=="function")return Hh(t);if(typeof t=="object")return Array.isArray(t)?nq(t):iq(t);if(typeof t=="string")return rq(t);throw new Error("Expected function, string, or object as test")});function nq(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Bh(t[n]);return Hh(i);function i(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function iq(t){const e=t;return Hh(n);function n(i){const s=i;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function rq(t){return Hh(e);function e(n){return n&&n.type===t}}function Hh(t){return e;function e(n,i,s){return!!(oq(n)&&t.call(this,n,typeof i=="number"?i:void 0,s||void 0))}}function sq(){return!0}function oq(t){return t!==null&&typeof t=="object"&&"type"in t}const QI=[],aq=!0,fy=!1,lq="skip";function XI(t,e,n,i){let s;typeof e=="function"&&typeof n!="function"?(i=n,n=e):s=e;const a=Bh(s),l=i?-1:1;c(t,void 0,[])();function c(h,f,p){const y=h&&typeof h=="object"?h:{};if(typeof y.type=="string"){const w=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(E,"name",{value:"node ("+(h.type+(w?"<"+w+">":""))+")"})}return E;function E(){let w=QI,b,L,F;if((!e||a(h,f,p[p.length-1]||void 0))&&(w=uq(n(h,p)),w[0]===fy))return w;if("children"in h&&h.children){const O=h;if(O.children&&w[0]!==lq)for(L=(i?O.children.length:-1)+l,F=p.concat(O);L>-1&&L<O.children.length;){const H=O.children[L];if(b=c(H,L,F)(),b[0]===fy)return b;L=typeof b[1]=="number"?b[1]:L+l}}return w}}}function uq(t){return Array.isArray(t)?t:typeof t=="number"?[aq,t]:t==null?QI:[t]}function H_(t,e,n,i){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=i),XI(t,a,c,s);function c(h,f){const p=f[f.length-1],y=p?p.children.indexOf(h):void 0;return l(h,y,p)}}const dy={}.hasOwnProperty,cq={};function fq(t,e){const n=e||cq,i=new Map,s=new Map,a=new Map,l={...Jz,...n.handlers},c={all:f,applyData:hq,definitionById:i,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:h,options:n,patch:dq,wrap:mq};return H_(t,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const y=p.type==="definition"?i:s,E=String(p.identifier).toUpperCase();y.has(E)||y.set(E,p)}}),c;function h(p,y){const E=p.type,w=c.handlers[E];if(dy.call(c.handlers,E)&&w)return w(c,p,y);if(c.options.passThrough&&c.options.passThrough.includes(E)){if("children"in p){const{children:L,...F}=p,O=uh(F);return O.children=c.all(p),O}return uh(p)}return(c.options.unknownHandler||pq)(c,p,y)}function f(p){const y=[];if("children"in p){const E=p.children;let w=-1;for(;++w<E.length;){const b=c.one(E[w],p);if(b){if(w&&E[w-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=JA(b.value)),!Array.isArray(b)&&b.type==="element")){const L=b.children[0];L&&L.type==="text"&&(L.value=JA(L.value))}Array.isArray(b)?y.push(...b):y.push(b)}}}return y}}function dq(t,e){t.position&&(e.position=eF(t))}function hq(t,e){let n=e;if(t&&t.data){const i=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const l="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,uh(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function pq(t,e){const n=e.data||{},i="value"in e&&!(dy.call(n,"hProperties")||dy.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function mq(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function JA(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function KA(t,e){const n=fq(t,e),i=n.one(t,void 0),s=tq(n),a=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function gq(t,e){return t&&"run"in t?async function(n,i){const s=KA(n,{file:i,...e});await t.run(s,i)}:function(n,i){return KA(n,{file:i,...t||e})}}function QA(t){if(t)throw t}var fg,XA;function yq(){if(XA)return fg;XA=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},a=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var p=t.call(f,"constructor"),y=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!p&&!y)return!1;var E;for(E in f);return typeof E>"u"||t.call(f,E)},l=function(f,p){n&&p.name==="__proto__"?n(f,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):f[p.name]=p.newValue},c=function(f,p){if(p==="__proto__")if(t.call(f,p)){if(i)return i(f,p).value}else return;return f[p]};return fg=function h(){var f,p,y,E,w,b,L=arguments[0],F=1,O=arguments.length,H=!1;for(typeof L=="boolean"&&(H=L,L=arguments[1]||{},F=2),(L==null||typeof L!="object"&&typeof L!="function")&&(L={});F<O;++F)if(f=arguments[F],f!=null)for(p in f)y=c(L,p),E=c(f,p),L!==E&&(H&&E&&(a(E)||(w=s(E)))?(w?(w=!1,b=y&&s(y)?y:[]):b=y&&a(y)?y:{},l(L,{name:p,newValue:h(H,b,E)})):typeof E<"u"&&l(L,{name:p,newValue:E}));return L},fg}var _q=yq();const dg=fh(_q);function hy(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function vq(){const t=[],e={run:n,use:i};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...s);function c(h,...f){const p=t[++a];let y=-1;if(h){l(h);return}for(;++y<s.length;)(f[y]===null||f[y]===void 0)&&(f[y]=s[y]);s=f,p?Tq(p,c)(...f):l(null,...f)}}function i(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function Tq(t,e){let n;return i;function i(...l){const c=t.length>l.length;let h;c&&l.push(s);try{h=t.apply(this,l)}catch(f){const p=f;if(c&&n)throw p;return s(p)}c||(h&&h.then&&typeof h.then=="function"?h.then(a,s):h instanceof Error?s(h):a(h))}function s(l,...c){n||(n=!0,e(l,...c))}function a(l){s(null,l)}}const _r={basename:Eq,dirname:Sq,extname:wq,join:Aq,sep:"/"};function Eq(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Fc(t);let n=0,i=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else i<0&&(a=!0,i=s+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let l=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(i=s):(c=-1,i=l));return n===i?i=l:i<0&&(i=t.length),t.slice(n,i)}function Sq(t){if(Fc(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function wq(t){Fc(t);let e=t.length,n=-1,i=0,s=-1,a=0,l;for(;e--;){const c=t.codePointAt(e);if(c===47){if(l){i=e+1;break}continue}n<0&&(l=!0,n=e+1),c===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===i+1?"":t.slice(s,n)}function Aq(...t){let e=-1,n;for(;++e<t.length;)Fc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":xq(n)}function xq(t){Fc(t);const e=t.codePointAt(0)===47;let n=Cq(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Cq(t,e){let n="",i=0,s=-1,a=0,l=-1,c,h;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",i=0):(n=n.slice(0,h),i=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",i=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),i=l-s-1;s=l,a=0}else c===46&&a>-1?a++:a=-1}return n}function Fc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const bq={cwd:Iq};function Iq(){return"/"}function py(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Rq(t){if(typeof t=="string")t=new URL(t);else if(!py(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Nq(t)}function Nq(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const hg=["history","path","basename","stem","extname","dirname"];class WI{constructor(e){let n;e?py(e)?n={path:e}:typeof e=="string"||kq(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":bq.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<hg.length;){const a=hg[i];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)hg.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?_r.basename(this.path):void 0}set basename(e){mg(e,"basename"),pg(e,"basename"),this.path=_r.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?_r.dirname(this.path):void 0}set dirname(e){WA(this.basename,"dirname"),this.path=_r.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?_r.extname(this.path):void 0}set extname(e){if(pg(e,"extname"),WA(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_r.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){py(e)&&(e=Rq(e)),mg(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?_r.basename(this.path,this.extname):void 0}set stem(e){mg(e,"stem"),pg(e,"stem"),this.path=_r.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const s=this.message(e,n,i);throw s.fatal=!0,s}info(e,n,i){const s=this.message(e,n,i);return s.fatal=void 0,s}message(e,n,i){const s=new Pn(e,n,i);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function pg(t,e){if(t&&t.includes(_r.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+_r.sep+"`")}function mg(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function WA(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function kq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Mq=(function(t){const i=this.constructor.prototype,s=i[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,i),a}),Dq={}.hasOwnProperty;class G_ extends Mq{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=vq()}copy(){const e=new G_;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(dg(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(_g("data",this.frozen),this.namespace[e]=n,this):Dq.call(this.namespace,e)&&this.namespace[e]||void 0:e?(_g("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const s=n.call(e,...i);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Td(e),i=this.parser||this.Parser;return gg("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),gg("process",this.parser||this.Parser),yg("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const c=Td(e),h=i.parse(c);i.run(h,c,function(p,y,E){if(p||!y||!E)return f(p);const w=y,b=i.stringify(w,E);Vq(b)?E.value=b:E.result=b,f(p,E)});function f(p,y){p||!y?l(p):a?a(y):n(void 0,y)}}}processSync(e){let n=!1,i;return this.freeze(),gg("processSync",this.parser||this.Parser),yg("processSync",this.compiler||this.Compiler),this.process(e,s),ex("processSync","process",n),i;function s(a,l){n=!0,QA(a),i=l}}run(e,n,i){ZA(e),this.freeze();const s=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?a(void 0,i):new Promise(a);function a(l,c){const h=Td(n);s.run(e,h,f);function f(p,y,E){const w=y||e;p?c(p):l?l(w):i(void 0,w,E)}}}runSync(e,n){let i=!1,s;return this.run(e,n,a),ex("runSync","run",i),s;function a(l,c){QA(l),s=c,i=!0}}stringify(e,n){this.freeze();const i=Td(n),s=this.compiler||this.Compiler;return yg("stringify",s),ZA(e),s(e,i)}use(e,...n){const i=this.attachers,s=this.namespace;if(_g("use",this.frozen),e!=null)if(typeof e=="function")h(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(f){if(typeof f=="function")h(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[p,...y]=f;h(p,y)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(f.plugins),f.settings&&(s.settings=dg(!0,s.settings,f.settings))}function c(f){let p=-1;if(f!=null)if(Array.isArray(f))for(;++p<f.length;){const y=f[p];a(y)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function h(f,p){let y=-1,E=-1;for(;++y<i.length;)if(i[y][0]===f){E=y;break}if(E===-1)i.push([f,...p]);else if(p.length>0){let[w,...b]=p;const L=i[E][1];hy(L)&&hy(w)&&(w=dg(!0,L,w)),i[E]=[f,w,...b]}}}}const Pq=new G_().freeze();function gg(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function yg(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function _g(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ZA(t){if(!hy(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ex(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Td(t){return Lq(t)?t:new WI(t)}function Lq(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Vq(t){return typeof t=="string"||Uq(t)}function Uq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Oq="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",tx=[],nx={allowDangerousHtml:!0},Fq=/^(https?|ircs?|mailto|xmpp)$/i,zq=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ZI(t){const e=t.allowedElements,n=t.allowElement,i=t.children||"",s=t.className,a=t.components,l=t.disallowedElements,c=t.rehypePlugins||tx,h=t.remarkPlugins||tx,f=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...nx}:nx,p=t.skipHtml,y=t.unwrapDisallowed,E=t.urlTransform||qq,w=Pq().use(Sz).use(h).use(gq,f).use(c),b=new WI;typeof i=="string"&&(b.value=i);for(const H of zq)Object.hasOwn(t,H.from)&&(""+H.from+(H.to?"use `"+H.to+"` instead":"remove it")+Oq+H.id,void 0);const L=w.parse(b);let F=w.runSync(L,b);return s&&(F={type:"element",tagName:"div",properties:{className:s},children:F.type==="root"?F.children:[F]}),H_(F,O),sF(F,{Fragment:S.Fragment,components:a,ignoreInvalidStyle:!0,jsx:S.jsx,jsxs:S.jsxs,passKeys:!0,passNode:!0});function O(H,B,X){if(H.type==="raw"&&X&&typeof B=="number")return p?X.children.splice(B,1):X.children[B]={type:"text",value:H.value},B;if(H.type==="element"){let ne;for(ne in lg)if(Object.hasOwn(lg,ne)&&Object.hasOwn(H.properties,ne)){const Y=H.properties[ne],R=lg[ne];(R===null||R.includes(H.tagName))&&(H.properties[ne]=E(String(Y||""),ne,H))}}if(H.type==="element"){let ne=e?!e.includes(H.tagName):l?l.includes(H.tagName):!1;if(!ne&&n&&typeof B=="number"&&(ne=!n(H,B,X)),ne&&X&&typeof B=="number")return y&&H.children?X.children.splice(B,1,...H.children):X.children.splice(B,1),B}}}function qq(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),s=t.indexOf("/");return e<0||s>-1&&e>s||n>-1&&e>n||i>-1&&e>i||Fq.test(t.slice(0,e))?t:""}function ix(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,s=n.indexOf(e);for(;s!==-1;)i++,s=n.indexOf(e,s+e.length);return i}function Bq(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Hq(t,e,n){const s=Bh((n||{}).ignore||[]),a=Gq(e);let l=-1;for(;++l<a.length;)XI(t,"text",c);function c(f,p){let y=-1,E;for(;++y<p.length;){const w=p[y],b=E?E.children:void 0;if(s(w,b?b.indexOf(w):void 0,E))return;E=w}if(E)return h(f,p)}function h(f,p){const y=p[p.length-1],E=a[l][0],w=a[l][1];let b=0;const F=y.children.indexOf(f);let O=!1,H=[];E.lastIndex=0;let B=E.exec(f.value);for(;B;){const X=B.index,ne={index:B.index,input:B.input,stack:[...p,f]};let Y=w(...B,ne);if(typeof Y=="string"&&(Y=Y.length>0?{type:"text",value:Y}:void 0),Y===!1?E.lastIndex=X+1:(b!==X&&H.push({type:"text",value:f.value.slice(b,X)}),Array.isArray(Y)?H.push(...Y):Y&&H.push(Y),b=X+B[0].length,O=!0),!E.global)break;B=E.exec(f.value)}return O?(b<f.value.length&&H.push({type:"text",value:f.value.slice(b)}),y.children.splice(F,1,...H)):H=[f],F+H.length}}function Gq(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const s=n[i];e.push([jq(s[0]),Yq(s[1])])}return e}function jq(t){return typeof t=="string"?new RegExp(Bq(t),"g"):t}function Yq(t){return typeof t=="function"?t:function(){return t}}const vg="phrasing",Tg=["autolink","link","image","label"];function $q(){return{transforms:[eB],enter:{literalAutolink:Kq,literalAutolinkEmail:Eg,literalAutolinkHttp:Eg,literalAutolinkWww:Eg},exit:{literalAutolink:Zq,literalAutolinkEmail:Wq,literalAutolinkHttp:Qq,literalAutolinkWww:Xq}}}function Jq(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:vg,notInConstruct:Tg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:vg,notInConstruct:Tg},{character:":",before:"[ps]",after:"\\/",inConstruct:vg,notInConstruct:Tg}]}}function Kq(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Eg(t){this.config.enter.autolinkProtocol.call(this,t)}function Qq(t){this.config.exit.autolinkProtocol.call(this,t)}function Xq(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Wq(t){this.config.exit.autolinkEmail.call(this,t)}function Zq(t){this.exit(t)}function eB(t){Hq(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,tB],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),nB]],{ignore:["link","linkReference"]})}function tB(t,e,n,i,s){let a="";if(!e1(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!iB(n)))return!1;const l=rB(n+i);if(!l[0])return!1;const c={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function nB(t,e,n,i){return!e1(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function iB(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function rB(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const s=ix(t,"(");let a=ix(t,")");for(;i!==-1&&s>a;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),a++;return[t,n]}function e1(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ea(n)||Fh(n))&&(!e||n!==47)}t1.peek=hB;function sB(){this.buffer()}function oB(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function aB(){this.buffer()}function lB(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function uB(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=$i(this.sliceSerialize(t)).toLowerCase(),n.label=e}function cB(t){this.exit(t)}function fB(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=$i(this.sliceSerialize(t)).toLowerCase(),n.label=e}function dB(t){this.exit(t)}function hB(){return"["}function t1(t,e,n,i){const s=n.createTracker(i);let a=s.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),l(),a+=s.move("]"),a}function pB(){return{enter:{gfmFootnoteCallString:sB,gfmFootnoteCall:oB,gfmFootnoteDefinitionLabelString:aB,gfmFootnoteDefinition:lB},exit:{gfmFootnoteCallString:uB,gfmFootnoteCall:cB,gfmFootnoteDefinitionLabelString:fB,gfmFootnoteDefinition:dB}}}function mB(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:t1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,s,a,l){const c=a.createTracker(l);let h=c.move("[^");const f=a.enter("footnoteDefinition"),p=a.enter("label");return h+=c.move(a.safe(a.associationId(i),{before:h,after:"]"})),p(),h+=c.move("]:"),i.children&&i.children.length>0&&(c.shift(4),h+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(i,c.current()),e?n1:gB))),f(),h}}function gB(t,e,n){return e===0?t:n1(t,e,n)}function n1(t,e,n){return(n?"":"    ")+t}const yB=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];i1.peek=SB;function _B(){return{canContainEols:["delete"],enter:{strikethrough:TB},exit:{strikethrough:EB}}}function vB(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:yB}],handlers:{delete:i1}}}function TB(t){this.enter({type:"delete",children:[]},t)}function EB(t){this.exit(t)}function i1(t,e,n,i){const s=n.createTracker(i),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function SB(){return"~"}function wB(t){return t.length}function AB(t,e){const n=e||{},i=(n.align||[]).concat(),s=n.stringLength||wB,a=[],l=[],c=[],h=[];let f=0,p=-1;for(;++p<t.length;){const L=[],F=[];let O=-1;for(t[p].length>f&&(f=t[p].length);++O<t[p].length;){const H=xB(t[p][O]);if(n.alignDelimiters!==!1){const B=s(H);F[O]=B,(h[O]===void 0||B>h[O])&&(h[O]=B)}L.push(H)}l[p]=L,c[p]=F}let y=-1;if(typeof i=="object"&&"length"in i)for(;++y<f;)a[y]=rx(i[y]);else{const L=rx(i);for(;++y<f;)a[y]=L}y=-1;const E=[],w=[];for(;++y<f;){const L=a[y];let F="",O="";L===99?(F=":",O=":"):L===108?F=":":L===114&&(O=":");let H=n.alignDelimiters===!1?1:Math.max(1,h[y]-F.length-O.length);const B=F+"-".repeat(H)+O;n.alignDelimiters!==!1&&(H=F.length+H+O.length,H>h[y]&&(h[y]=H),w[y]=H),E[y]=B}l.splice(1,0,E),c.splice(1,0,w),p=-1;const b=[];for(;++p<l.length;){const L=l[p],F=c[p];y=-1;const O=[];for(;++y<f;){const H=L[y]||"";let B="",X="";if(n.alignDelimiters!==!1){const ne=h[y]-(F[y]||0),Y=a[y];Y===114?B=" ".repeat(ne):Y===99?ne%2?(B=" ".repeat(ne/2+.5),X=" ".repeat(ne/2-.5)):(B=" ".repeat(ne/2),X=B):X=" ".repeat(ne)}n.delimiterStart!==!1&&!y&&O.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&H==="")&&(n.delimiterStart!==!1||y)&&O.push(" "),n.alignDelimiters!==!1&&O.push(B),O.push(H),n.alignDelimiters!==!1&&O.push(X),n.padding!==!1&&O.push(" "),(n.delimiterEnd!==!1||y!==f-1)&&O.push("|")}b.push(n.delimiterEnd===!1?O.join("").replace(/ +$/,""):O.join(""))}return b.join(`
`)}function xB(t){return t==null?"":String(t)}function rx(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function CB(t,e,n,i){const s=n.enter("blockquote"),a=n.createTracker(i);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),bB);return s(),l}function bB(t,e,n){return">"+(n?"":" ")+t}function IB(t,e){return sx(t,e.inConstruct,!0)&&!sx(t,e.notInConstruct,!1)}function sx(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function ox(t,e,n,i){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&IB(n.stack,n.unsafe[s]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function RB(t,e){const n=String(t);let i=n.indexOf(e),s=i,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===s?++a>l&&(l=a):a=1,s=i+e.length,i=n.indexOf(e,s);return l}function NB(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function kB(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function MB(t,e,n,i){const s=kB(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(NB(t,n)){const y=n.enter("codeIndented"),E=n.indentLines(a,DB);return y(),E}const c=n.createTracker(i),h=s.repeat(Math.max(RB(a,s)+1,3)),f=n.enter("codeFenced");let p=c.move(h);if(t.lang){const y=n.enter(`codeFencedLang${l}`);p+=c.move(n.safe(t.lang,{before:p,after:" ",encode:["`"],...c.current()})),y()}if(t.lang&&t.meta){const y=n.enter(`codeFencedMeta${l}`);p+=c.move(" "),p+=c.move(n.safe(t.meta,{before:p,after:`
`,encode:["`"],...c.current()})),y()}return p+=c.move(`
`),a&&(p+=c.move(a+`
`)),p+=c.move(h),f(),p}function DB(t,e,n){return(n?"":"    ")+t}function j_(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function PB(t,e,n,i){const s=j_(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const h=n.createTracker(i);let f=h.move("[");return f+=h.move(n.safe(n.associationId(t),{before:f,after:"]",...h.current()})),f+=h.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(n.safe(t.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(c=n.enter("destinationRaw"),f+=h.move(n.safe(t.url,{before:f,after:t.title?" ":`
`,...h.current()}))),c(),t.title&&(c=n.enter(`title${a}`),f+=h.move(" "+s),f+=h.move(n.safe(t.title,{before:f,after:s,...h.current()})),f+=h.move(s),c()),l(),f}function LB(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Ec(t){return"&#x"+t.toString(16).toUpperCase()+";"}function ch(t,e,n){const i=Tl(t),s=Tl(e);return i===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}r1.peek=VB;function r1(t,e,n,i){const s=LB(n),a=n.enter("emphasis"),l=n.createTracker(i),c=l.move(s);let h=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const f=h.charCodeAt(0),p=ch(i.before.charCodeAt(i.before.length-1),f,s);p.inside&&(h=Ec(f)+h.slice(1));const y=h.charCodeAt(h.length-1),E=ch(i.after.charCodeAt(0),y,s);E.inside&&(h=h.slice(0,-1)+Ec(y));const w=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:E.outside,before:p.outside},c+h+w}function VB(t,e,n){return n.options.emphasis||"*"}function UB(t,e){let n=!1;return H_(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,fy}),!!((!t.depth||t.depth<3)&&V_(t)&&(e.options.setext||n))}function OB(t,e,n,i){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(i);if(UB(t,n)){const p=n.enter("headingSetext"),y=n.enter("phrasing"),E=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return y(),p(),E+`
`+(s===1?"=":"-").repeat(E.length-(Math.max(E.lastIndexOf("\r"),E.lastIndexOf(`
`))+1))}const l="#".repeat(s),c=n.enter("headingAtx"),h=n.enter("phrasing");a.move(l+" ");let f=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(f)&&(f=Ec(f.charCodeAt(0))+f.slice(1)),f=f?l+" "+f:l,n.options.closeAtx&&(f+=" "+l),h(),c(),f}s1.peek=FB;function s1(t){return t.value||""}function FB(){return"<"}o1.peek=zB;function o1(t,e,n,i){const s=j_(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const h=n.createTracker(i);let f=h.move("![");return f+=h.move(n.safe(t.alt,{before:f,after:"]",...h.current()})),f+=h.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(n.safe(t.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(c=n.enter("destinationRaw"),f+=h.move(n.safe(t.url,{before:f,after:t.title?" ":")",...h.current()}))),c(),t.title&&(c=n.enter(`title${a}`),f+=h.move(" "+s),f+=h.move(n.safe(t.title,{before:f,after:s,...h.current()})),f+=h.move(s),c()),f+=h.move(")"),l(),f}function zB(){return"!"}a1.peek=qB;function a1(t,e,n,i){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(i);let h=c.move("![");const f=n.safe(t.alt,{before:h,after:"]",...c.current()});h+=c.move(f+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const y=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return l(),n.stack=p,a(),s==="full"||!f||f!==y?h+=c.move(y+"]"):s==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function qB(){return"!"}l1.peek=BB;function l1(t,e,n){let i=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(i);)s+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++a<n.unsafe.length;){const l=n.unsafe[a],c=n.compilePattern(l);let h;if(l.atBreak)for(;h=c.exec(i);){let f=h.index;i.charCodeAt(f)===10&&i.charCodeAt(f-1)===13&&f--,i=i.slice(0,f)+" "+i.slice(h.index+1)}}return s+i+s}function BB(){return"`"}function u1(t,e){const n=V_(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}c1.peek=HB;function c1(t,e,n,i){const s=j_(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(i);let c,h;if(u1(t,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let y=l.move("<");return y+=l.move(n.containerPhrasing(t,{before:y,after:">",...l.current()})),y+=l.move(">"),c(),n.stack=p,y}c=n.enter("link"),h=n.enter("label");let f=l.move("[");return f+=l.move(n.containerPhrasing(t,{before:f,after:"](",...l.current()})),f+=l.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),f+=l.move("<"),f+=l.move(n.safe(t.url,{before:f,after:">",...l.current()})),f+=l.move(">")):(h=n.enter("destinationRaw"),f+=l.move(n.safe(t.url,{before:f,after:t.title?" ":")",...l.current()}))),h(),t.title&&(h=n.enter(`title${a}`),f+=l.move(" "+s),f+=l.move(n.safe(t.title,{before:f,after:s,...l.current()})),f+=l.move(s),h()),f+=l.move(")"),c(),f}function HB(t,e,n){return u1(t,n)?"<":"["}f1.peek=GB;function f1(t,e,n,i){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(i);let h=c.move("[");const f=n.containerPhrasing(t,{before:h,after:"]",...c.current()});h+=c.move(f+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const y=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return l(),n.stack=p,a(),s==="full"||!f||f!==y?h+=c.move(y+"]"):s==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function GB(){return"["}function Y_(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function jB(t){const e=Y_(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function YB(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function d1(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function $B(t,e,n,i){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?YB(n):Y_(n);const c=t.ordered?l==="."?")":".":jB(n);let h=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const p=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),d1(n)===l&&p){let y=-1;for(;++y<t.children.length;){const E=t.children[y];if(E&&E.type==="listItem"&&E.children&&E.children[0]&&E.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(l=c),n.bulletCurrent=l;const f=n.containerFlow(t,i);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),f}function JB(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function KB(t,e,n,i){const s=JB(n);let a=n.bulletCurrent||Y_(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(i);c.move(a+" ".repeat(l-a.length)),c.shift(l);const h=n.enter("listItem"),f=n.indentLines(n.containerFlow(t,c.current()),p);return h(),f;function p(y,E,w){return E?(w?"":" ".repeat(l))+y:(w?a:a+" ".repeat(l-a.length))+y}}function QB(t,e,n,i){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,i);return a(),s(),l}const XB=Bh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function WB(t,e,n,i){return(t.children.some(function(l){return XB(l)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function ZB(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}h1.peek=eH;function h1(t,e,n,i){const s=ZB(n),a=n.enter("strong"),l=n.createTracker(i),c=l.move(s+s);let h=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const f=h.charCodeAt(0),p=ch(i.before.charCodeAt(i.before.length-1),f,s);p.inside&&(h=Ec(f)+h.slice(1));const y=h.charCodeAt(h.length-1),E=ch(i.after.charCodeAt(0),y,s);E.inside&&(h=h.slice(0,-1)+Ec(y));const w=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:E.outside,before:p.outside},c+h+w}function eH(t,e,n){return n.options.strong||"*"}function tH(t,e,n,i){return n.safe(t.value,i)}function nH(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function iH(t,e,n){const i=(d1(n)+(n.options.ruleSpaces?" ":"")).repeat(nH(n));return n.options.ruleSpaces?i.slice(0,-1):i}const p1={blockquote:CB,break:ox,code:MB,definition:PB,emphasis:r1,hardBreak:ox,heading:OB,html:s1,image:o1,imageReference:a1,inlineCode:l1,link:c1,linkReference:f1,list:$B,listItem:KB,paragraph:QB,root:WB,strong:h1,text:tH,thematicBreak:iH};function rH(){return{enter:{table:sH,tableData:ax,tableHeader:ax,tableRow:aH},exit:{codeText:lH,table:oH,tableData:Sg,tableHeader:Sg,tableRow:Sg}}}function sH(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function oH(t){this.exit(t),this.data.inTable=void 0}function aH(t){this.enter({type:"tableRow",children:[]},t)}function Sg(t){this.exit(t)}function ax(t){this.enter({type:"tableCell",children:[]},t)}function lH(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,uH));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function uH(t,e){return e==="|"?e:t}function cH(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:E,table:l,tableCell:h,tableRow:c}};function l(w,b,L,F){return f(p(w,L,F),w.align)}function c(w,b,L,F){const O=y(w,L,F),H=f([O]);return H.slice(0,H.indexOf(`
`))}function h(w,b,L,F){const O=L.enter("tableCell"),H=L.enter("phrasing"),B=L.containerPhrasing(w,{...F,before:a,after:a});return H(),O(),B}function f(w,b){return AB(w,{align:b,alignDelimiters:i,padding:n,stringLength:s})}function p(w,b,L){const F=w.children;let O=-1;const H=[],B=b.enter("table");for(;++O<F.length;)H[O]=y(F[O],b,L);return B(),H}function y(w,b,L){const F=w.children;let O=-1;const H=[],B=b.enter("tableRow");for(;++O<F.length;)H[O]=h(F[O],w,b,L);return B(),H}function E(w,b,L){let F=p1.inlineCode(w,b,L);return L.stack.includes("tableCell")&&(F=F.replace(/\|/g,"\\$&")),F}}function fH(){return{exit:{taskListCheckValueChecked:lx,taskListCheckValueUnchecked:lx,paragraph:hH}}}function dH(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:pH}}}function lx(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function hH(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const c=s[a];if(c.type==="paragraph"){l=c;break}}l===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function pH(t,e,n,i){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",c=n.createTracker(i);a&&c.move(l);let h=p1.listItem(t,e,n,{...i,...c.current()});return a&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),h;function f(p){return p+l}}function mH(){return[$q(),pB(),_B(),rH(),fH()]}function gH(t){return{extensions:[Jq(),mB(t),vB(),cH(t),dH()]}}const yH={tokenize:wH,partial:!0},m1={tokenize:AH,partial:!0},g1={tokenize:xH,partial:!0},y1={tokenize:CH,partial:!0},_H={tokenize:bH,partial:!0},_1={name:"wwwAutolink",tokenize:EH,previous:T1},v1={name:"protocolAutolink",tokenize:SH,previous:E1},ls={name:"emailAutolink",tokenize:TH,previous:S1},br={};function vH(){return{text:br}}let zo=48;for(;zo<123;)br[zo]=ls,zo++,zo===58?zo=65:zo===91&&(zo=97);br[43]=ls;br[45]=ls;br[46]=ls;br[95]=ls;br[72]=[ls,v1];br[104]=[ls,v1];br[87]=[ls,_1];br[119]=[ls,_1];function TH(t,e,n){const i=this;let s,a;return l;function l(y){return!my(y)||!S1.call(i,i.previous)||$_(i.events)?n(y):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(y))}function c(y){return my(y)?(t.consume(y),c):y===64?(t.consume(y),h):n(y)}function h(y){return y===46?t.check(_H,p,f)(y):y===45||y===95||Mn(y)?(a=!0,t.consume(y),h):p(y)}function f(y){return t.consume(y),s=!0,h}function p(y){return a&&s&&Fn(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(y)):n(y)}}function EH(t,e,n){const i=this;return s;function s(l){return l!==87&&l!==119||!T1.call(i,i.previous)||$_(i.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(yH,t.attempt(m1,t.attempt(g1,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function SH(t,e,n){const i=this;let s="",a=!1;return l;function l(y){return(y===72||y===104)&&E1.call(i,i.previous)&&!$_(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(y),t.consume(y),c):n(y)}function c(y){if(Fn(y)&&s.length<5)return s+=String.fromCodePoint(y),t.consume(y),c;if(y===58){const E=s.toLowerCase();if(E==="http"||E==="https")return t.consume(y),h}return n(y)}function h(y){return y===47?(t.consume(y),a?f:(a=!0,h)):n(y)}function f(y){return y===null||ah(y)||At(y)||ea(y)||Fh(y)?n(y):t.attempt(m1,t.attempt(g1,p),n)(y)}function p(y){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(y)}}function wH(t,e,n){let i=0;return s;function s(l){return(l===87||l===119)&&i<3?(i++,t.consume(l),s):l===46&&i===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function AH(t,e,n){let i,s,a;return l;function l(f){return f===46||f===95?t.check(y1,h,c)(f):f===null||At(f)||ea(f)||f!==45&&Fh(f)?h(f):(a=!0,t.consume(f),l)}function c(f){return f===95?i=!0:(s=i,i=void 0),t.consume(f),l}function h(f){return s||i||!a?n(f):e(f)}}function xH(t,e){let n=0,i=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&i<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(y1,e,a)(l):l===null||At(l)||ea(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&i++,t.consume(l),s}}function CH(t,e,n){return i;function i(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),i):c===38?(t.consume(c),a):c===93?(t.consume(c),s):c===60||c===null||At(c)||ea(c)?e(c):n(c)}function s(c){return c===null||c===40||c===91||At(c)||ea(c)?e(c):i(c)}function a(c){return Fn(c)?l(c):n(c)}function l(c){return c===59?(t.consume(c),i):Fn(c)?(t.consume(c),l):n(c)}}function bH(t,e,n){return i;function i(a){return t.consume(a),s}function s(a){return Mn(a)?n(a):e(a)}}function T1(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||At(t)}function E1(t){return!Fn(t)}function S1(t){return!(t===47||my(t))}function my(t){return t===43||t===45||t===46||t===95||Mn(t)}function $_(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const IH={tokenize:VH,partial:!0};function RH(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:DH,continuation:{tokenize:PH},exit:LH}},text:{91:{name:"gfmFootnoteCall",tokenize:MH},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:NH,resolveTo:kH}}}}function NH(t,e,n){const i=this;let s=i.events.length;const a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l;for(;s--;){const h=i.events[s][1];if(h.type==="labelImage"){l=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return c;function c(h){if(!l||!l._balanced)return n(h);const f=$i(i.sliceSerialize({start:l.end,end:i.now()}));return f.codePointAt(0)!==94||!a.includes(f.slice(1))?n(h):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),e(h))}}function kH(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...c),t}function MH(t,e,n){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a=0,l;return c;function c(y){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(y),t.exit("gfmFootnoteCallLabelMarker"),h}function h(y){return y!==94?n(y):(t.enter("gfmFootnoteCallMarker"),t.consume(y),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",f)}function f(y){if(a>999||y===93&&!l||y===null||y===91||At(y))return n(y);if(y===93){t.exit("chunkString");const E=t.exit("gfmFootnoteCallString");return s.includes($i(i.sliceSerialize(E)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(y),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(y)}return At(y)||(l=!0),a++,t.consume(y),y===92?p:f}function p(y){return y===91||y===92||y===93?(t.consume(y),a++,f):f(y)}}function DH(t,e,n){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a,l=0,c;return h;function h(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",p):n(b)}function p(b){if(l>999||b===93&&!c||b===null||b===91||At(b))return n(b);if(b===93){t.exit("chunkString");const L=t.exit("gfmFootnoteDefinitionLabelString");return a=$i(i.sliceSerialize(L)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),E}return At(b)||(c=!0),l++,t.consume(b),b===92?y:p}function y(b){return b===91||b===92||b===93?(t.consume(b),l++,p):p(b)}function E(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),s.includes(a)||s.push(a),ot(t,w,"gfmFootnoteDefinitionWhitespace")):n(b)}function w(b){return e(b)}}function PH(t,e,n){return t.check(Oc,e,t.attempt(IH,e,n))}function LH(t){t.exit("gfmFootnoteDefinition")}function VH(t,e,n){const i=this;return ot(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=i.events[i.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function UH(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function s(l,c){let h=-1;for(;++h<l.length;)if(l[h][0]==="enter"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._close){let f=h;for(;f--;)if(l[f][0]==="exit"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._open&&l[h][1].end.offset-l[h][1].start.offset===l[f][1].end.offset-l[f][1].start.offset){l[h][1].type="strikethroughSequence",l[f][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},l[f][1].start),end:Object.assign({},l[h][1].end)},y={type:"strikethroughText",start:Object.assign({},l[f][1].end),end:Object.assign({},l[h][1].start)},E=[["enter",p,c],["enter",l[f][1],c],["exit",l[f][1],c],["enter",y,c]],w=c.parser.constructs.insideSpan.null;w&&pi(E,E.length,0,zh(w,l.slice(f+1,h),c)),pi(E,E.length,0,[["exit",y,c],["enter",l[h][1],c],["exit",l[h][1],c],["exit",p,c]]),pi(l,f-1,h-f+3,E),h=f+E.length-2;break}}for(h=-1;++h<l.length;)l[h][1].type==="strikethroughSequenceTemporary"&&(l[h][1].type="data");return l}function a(l,c,h){const f=this.previous,p=this.events;let y=0;return E;function E(b){return f===126&&p[p.length-1][1].type!=="characterEscape"?h(b):(l.enter("strikethroughSequenceTemporary"),w(b))}function w(b){const L=Tl(f);if(b===126)return y>1?h(b):(l.consume(b),y++,w);if(y<2&&!n)return h(b);const F=l.exit("strikethroughSequenceTemporary"),O=Tl(b);return F._open=!O||O===2&&!!L,F._close=!L||L===2&&!!O,c(b)}}}class OH{constructor(){this.map=[]}add(e,n,i){FH(this,e,n,i)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let s=i.pop();for(;s;){for(const a of s)e.push(a);s=i.pop()}this.map.length=0}}function FH(t,e,n,i){let s=0;if(!(n===0&&i.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...i);return}s+=1}t.map.push([e,n,i])}}function zH(t,e){let n=!1;const i=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=i.length-1;i[a]=i[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function qH(){return{flow:{null:{name:"table",tokenize:BH,resolveAll:HH}}}}function BH(t,e,n){const i=this;let s=0,a=0,l;return c;function c(I){let U=i.events.length-1;for(;U>-1;){const oe=i.events[U][1].type;if(oe==="lineEnding"||oe==="linePrefix")U--;else break}const z=U>-1?i.events[U][1].type:null,k=z==="tableHead"||z==="tableRow"?Y:h;return k===Y&&i.parser.lazy[i.now().line]?n(I):k(I)}function h(I){return t.enter("tableHead"),t.enter("tableRow"),f(I)}function f(I){return I===124||(l=!0,a+=1),p(I)}function p(I){return I===null?n(I):Pe(I)?a>1?(a=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),w):n(I):Ke(I)?ot(t,p,"whitespace")(I):(a+=1,l&&(l=!1,s+=1),I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),l=!0,p):(t.enter("data"),y(I)))}function y(I){return I===null||I===124||At(I)?(t.exit("data"),p(I)):(t.consume(I),I===92?E:y)}function E(I){return I===92||I===124?(t.consume(I),y):y(I)}function w(I){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(I):(t.enter("tableDelimiterRow"),l=!1,Ke(I)?ot(t,b,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):b(I))}function b(I){return I===45||I===58?F(I):I===124?(l=!0,t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),L):ne(I)}function L(I){return Ke(I)?ot(t,F,"whitespace")(I):F(I)}function F(I){return I===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),O):I===45?(a+=1,O(I)):I===null||Pe(I)?X(I):ne(I)}function O(I){return I===45?(t.enter("tableDelimiterFiller"),H(I)):ne(I)}function H(I){return I===45?(t.consume(I),H):I===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),B):(t.exit("tableDelimiterFiller"),B(I))}function B(I){return Ke(I)?ot(t,X,"whitespace")(I):X(I)}function X(I){return I===124?b(I):I===null||Pe(I)?!l||s!==a?ne(I):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(I)):ne(I)}function ne(I){return n(I)}function Y(I){return t.enter("tableRow"),R(I)}function R(I){return I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),R):I===null||Pe(I)?(t.exit("tableRow"),e(I)):Ke(I)?ot(t,R,"whitespace")(I):(t.enter("data"),P(I))}function P(I){return I===null||I===124||At(I)?(t.exit("data"),R(I)):(t.consume(I),I===92?D:P)}function D(I){return I===92||I===124?(t.consume(I),P):P(I)}}function HH(t,e){let n=-1,i=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],c=!1,h=0,f,p,y;const E=new OH;for(;++n<t.length;){const w=t[n],b=w[1];w[0]==="enter"?b.type==="tableHead"?(c=!1,h!==0&&(ux(E,e,h,f,p),p=void 0,h=0),f={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},E.add(n,0,[["enter",f,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(i=!0,y=void 0,a=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,p={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},E.add(n,0,[["enter",p,e]])),s=b.type==="tableDelimiterRow"?2:p?3:1):s&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(i=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],y=Ed(E,e,a,s,void 0,y),a=[0,0,0,0]),l[2]=n)):b.type==="tableCellDivider"&&(i?i=!1:(a[1]!==0&&(l[0]=l[1],y=Ed(E,e,a,s,void 0,y)),a=l,l=[a[1],n,0,0])):b.type==="tableHead"?(c=!0,h=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(h=n,a[1]!==0?(l[0]=l[1],y=Ed(E,e,a,s,n,y)):l[1]!==0&&(y=Ed(E,e,l,s,n,y)),s=0):s&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(l[3]=n)}for(h!==0&&ux(E,e,h,f,p),E.consume(e.events),n=-1;++n<e.events.length;){const w=e.events[n];w[0]==="enter"&&w[1].type==="table"&&(w[1]._align=zH(e.events,n))}return t}function Ed(t,e,n,i,s,a){const l=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},Za(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const h=Za(e.events,n[1]);if(a={type:l,start:Object.assign({},h),end:Object.assign({},h)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const f=Za(e.events,n[2]),p=Za(e.events,n[3]),y={type:c,start:Object.assign({},f),end:Object.assign({},p)};if(t.add(n[2],0,[["enter",y,e]]),i!==2){const E=e.events[n[2]],w=e.events[n[3]];if(E[1].end=Object.assign({},w[1].end),E[1].type="chunkText",E[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,L=n[3]-n[2]-1;t.add(b,L,[])}}t.add(n[3]+1,0,[["exit",y,e]])}return s!==void 0&&(a.end=Object.assign({},Za(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function ux(t,e,n,i,s){const a=[],l=Za(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),i.end=Object.assign({},l),a.push(["exit",i,e]),t.add(n+1,0,a)}function Za(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const GH={name:"tasklistCheck",tokenize:YH};function jH(){return{text:{91:GH}}}function YH(t,e,n){const i=this;return s;function s(h){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(h):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),a)}function a(h){return At(h)?(t.enter("taskListCheckValueUnchecked"),t.consume(h),t.exit("taskListCheckValueUnchecked"),l):h===88||h===120?(t.enter("taskListCheckValueChecked"),t.consume(h),t.exit("taskListCheckValueChecked"),l):n(h)}function l(h){return h===93?(t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(h)}function c(h){return Pe(h)?e(h):Ke(h)?t.check({tokenize:$H},e,n)(h):n(h)}}function $H(t,e,n){return ot(t,i,"whitespace");function i(s){return s===null?n(s):e(s)}}function JH(t){return MI([vH(),RH(),UH(t),qH(),jH()])}const KH={};function w1(t){const e=this,n=t||KH,i=e.data(),s=i.micromarkExtensions||(i.micromarkExtensions=[]),a=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),l=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);s.push(JH(n)),a.push(mH()),l.push(gH(n))}class QH{constructor(e,n){this.timestamps=[],this.maxRequests=e,this.intervalMs=n}check(){const e=Date.now();return this.timestamps=this.timestamps.filter(n=>e-n<this.intervalMs),this.timestamps.length>=this.maxRequests?{allowed:!1,message:`You're sending messages too quickly. Please wait ${Math.ceil((this.intervalMs-(e-this.timestamps[0]))/1e3)} seconds.`}:{allowed:!0,message:""}}record(){this.timestamps.push(Date.now())}updateConfig(e,n){this.maxRequests=e,this.intervalMs=n,this.timestamps=[]}}const Ja={free:{maxRequests:5,intervalMs:3e4,delay:5e3},starter:{maxRequests:20,intervalMs:3e4,delay:1500},smart:{maxRequests:1e3,intervalMs:3e4,delay:0}},A1=t=>{const e=Ja[t]||Ja.free,n=de.useRef(new QH(e.maxRequests,e.intervalMs));return de.useEffect(()=>{const s=Ja[t]||Ja.free;n.current.updateConfig(s.maxRequests,s.intervalMs)},[t]),{attemptApiCall:de.useCallback(s=>new Promise(a=>{const l=n.current.check();if(!l.allowed){a({success:!1,message:l.message});return}const c=(Ja[t]||Ja.free).delay;setTimeout(()=>{s().then(()=>{n.current.record(),a({success:!0,message:""})}).catch(h=>{console.error("API call failed:",h),a({success:!1,message:"An unexpected error occurred."})})},c)}),[t])}},wg=new R_({apiKey:void 0}),XH=({className:t="w-5 h-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),WH=({className:t="w-6 h-6"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),ZH=({className:t="w-4 h-4"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e8=({className:t="w-5 h-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t8=[{id:"math_algebra_1",name:"Math - Algebra 1"},{id:"science_biology",name:"Science - Biology"},{id:"history_us",name:"History - U.S. History"}],cx=t=>{var e;return((e=t8.find(n=>n.id===t))==null?void 0:e.name)||"your course"},n8=()=>S.jsx("div",{className:"space-y-4 animate-pulse p-4 sm:p-6 md:p-8",children:[...Array(3)].map((t,e)=>S.jsxs("div",{className:"bg-white/5 p-4 rounded-xl",children:[S.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3"}),S.jsxs("div",{className:"mt-4 space-y-3",children:[S.jsx("div",{className:"h-8 bg-gray-700 rounded w-full"}),S.jsx("div",{className:"h-8 bg-gray-700 rounded w-full"})]})]},e))}),i8=({userProfile:t,topic:e,isCompleted:n,onClose:i,onMarkComplete:s})=>{const[a,l]=de.useState([]),[c,h]=de.useState(""),[f,p]=de.useState(null),[y,E]=de.useState(null),[w,b]=de.useState(!1),[L,F]=de.useState(null),[O,H]=de.useState([]),[B,X]=de.useState(!1),ne=de.useRef(null),Y=de.useRef(!1),{attemptApiCall:R}=A1(t.plan),P=`You are VANTUTOR, an expert AI educator. Your primary goal is to provide a comprehensive and complete understanding of the given topic for a student at their specified level.

Your Method:
1. First, mentally outline all key concepts needed to fully master the topic.
2. Begin teaching, but do NOT present the entire outline at once.
3. Break the lesson into very small, bite-sized chunks. Each message you send must be short and focus on a single, simple idea.
4. After explaining a small concept, you MUST end your message with a simple question to check for understanding before proceeding. This is crucial.
5. NEVER deliver long lectures. Keep it interactive and conversational.

Use simple language, analogies, and Markdown for clarity. Be patient and encouraging.`,D=async k=>{if(!B){X(!0),H([]);try{const oe=`Based on this tutor's last message: "${k}", generate three distinct, extremely concise replies for a student. The student's level is "${t.level}". The replies should be things a student would say to continue the conversation. Each reply MUST be a single short sentence, a phrase, or even a single word (e.g., "Why?", "Tell me more", "Okay"). Return a JSON object with a single key "suggestions" containing an array of these 3 short strings.`,me=await wg.models.generateContent({model:"gemini-2.5-flash",contents:oe,config:{responseMimeType:"application/json",responseSchema:{type:Ft.OBJECT,properties:{suggestions:{type:Ft.ARRAY,items:{type:Ft.STRING},description:"An array of three distinct, extremely concise suggested replies for the student (single sentence, phrase, or one word)."}},required:["suggestions"]}}}),K=JSON.parse(me.text);K.suggestions&&Array.isArray(K.suggestions)&&H(K.suggestions.slice(0,3))}catch(oe){console.error("Failed to generate suggestions:",oe)}finally{X(!1)}}},I=async()=>{b(!0),F(null);const k=On(it,"users",t.uid,"conversations",e.topicId,"messages"),oe=`
Context:
Course: ${cx(t.courseId)}
Subject: ${e.subjectName}
Topic: ${e.topicName}
User Level: ${t.level}

Task:
Please start teaching me about "${e.topicName}". Give me a simple and clear introduction to the topic.
`,me=await R(async()=>{const K=[{text:oe}],Ie={text:(await wg.models.generateContent({model:"gemini-2.5-flash",contents:{parts:K},config:{systemInstruction:P}})).text,sender:"bot",timestamp:Date.now()};await jo(k,{...Ie,timestamp:tc()})});me.success||F(me.message||"Sorry, I had trouble starting the lesson. You can still ask a question to begin."),b(!1)};de.useEffect(()=>{const k=On(it,"users",t.uid,"conversations",e.topicId,"messages"),oe=yl(k,_l("timestamp","asc")),me=eo(oe,K=>{K.empty&&!Y.current&&(Y.current=!0,I());const he=[];K.forEach(Se=>{var q;const Ie=Se.data();he.push({id:Se.id,...Ie,timestamp:((q=Ie.timestamp)==null?void 0:q.toMillis())||Date.now()})}),l(he)},K=>console.error("Error fetching conversation:",K));return()=>me()},[t.uid,e.topicId]),de.useEffect(()=>{const k=a[a.length-1];(k==null?void 0:k.sender)==="bot"&&!w&&k.text.trim().endsWith("?")?D(k.text):((k==null?void 0:k.sender)==="user"||w)&&H([])},[a,w]),de.useEffect(()=>{var k;(k=ne.current)==null||k.scrollIntoView({behavior:"smooth"})},[a,w]);const U=k=>{var me;const oe=(me=k.target.files)==null?void 0:me[0];if(oe){p(oe);const K=new FileReader;K.onloadend=()=>E(K.result),K.readAsDataURL(oe)}},z=async k=>{const oe=k||c;if(!oe.trim()||w)return;const K={text:f?`${oe}

[Attached file: ${f.name}]`:oe,sender:"user",timestamp:Date.now()},he=oe,Se=f,Ie=y;h(""),p(null),E(null),b(!0),F(null),H([]);try{const q=On(it,"users",t.uid,"conversations",e.topicId,"messages");await jo(q,{...K,timestamp:tc()});const G=await R(async()=>{const W=a.map(Re=>`${Re.sender==="user"?"Student":"Tutor"}: ${Re.text}`).join(`
`),se=[{text:`
Context:
Course: ${cx(t.courseId)}
Subject: ${e.subjectName}
Topic: ${e.topicName}
User Level: ${t.level}

Conversation History:
${W}

Task:
Continue teaching this topic based on the student's latest message.
Student: "${he}"
`}];if(Se&&Ie){const Re=Ie.split(",")[1];Re&&se.push({inlineData:{data:Re,mimeType:Se.type}})}const Ae={text:(await wg.models.generateContent({model:"gemini-2.5-flash",contents:{parts:se},config:{systemInstruction:P}})).text,sender:"bot",timestamp:Date.now()};await jo(q,{...Ae,timestamp:tc()})});G.success||F(G.message)}catch(q){console.error("Error in chat:",q),F("Sorry, something went wrong. Please try again.")}finally{b(!1)}};return S.jsxs("div",{className:"flex flex-col h-full w-full bg-black/20 md:rounded-xl border border-white/10 overflow-hidden",children:[S.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 bg-white/5 backdrop-blur-lg border-b border-white/10 z-10",children:[S.jsx("button",{onClick:i,className:"text-gray-400 hover:text-white transition-colors p-1 rounded-full",children:S.jsx(WH,{})}),S.jsx("h2",{className:"text-lg font-bold text-white truncate mx-4 flex-1 text-center",children:e.topicName}),S.jsx("div",{className:"w-8 h-8"})," "]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[a.map(k=>S.jsxs("div",{className:`flex items-start gap-3 animate-fade-in ${k.sender==="user"?"justify-end":""}`,children:[k.sender==="bot"&&S.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-lime-400 to-teal-500 flex-shrink-0"}),S.jsx("div",{className:`max-w-[80%] sm:max-w-lg p-3 px-4 rounded-2xl ${k.sender==="user"?"bg-lime-900/70 text-white":"bg-white/5 text-gray-300"}`,children:k.sender==="user"?S.jsx("p",{className:"text-sm whitespace-pre-wrap",children:k.text}):S.jsx("div",{className:"text-sm",children:S.jsx(ZI,{remarkPlugins:[w1],components:{p:({node:oe,...me})=>S.jsx("p",{className:"mb-2 last:mb-0",...me}),strong:({node:oe,...me})=>S.jsx("strong",{className:"font-bold text-white",...me}),em:({node:oe,...me})=>S.jsx("em",{className:"italic",...me}),ul:({node:oe,...me})=>S.jsx("ul",{className:"list-disc list-inside space-y-1 my-2",...me}),ol:({node:oe,...me})=>S.jsx("ol",{className:"list-decimal list-inside space-y-1 my-2",...me}),li:({node:oe,...me})=>S.jsx("li",{className:"text-gray-300",...me}),a:({node:oe,...me})=>S.jsx("a",{className:"text-lime-400 hover:underline",target:"_blank",rel:"noopener noreferrer",...me})},children:k.text})})})]},k.id)),w&&S.jsxs("div",{className:"flex items-start gap-3 animate-fade-in",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-lime-400 to-teal-500 flex-shrink-0"}),S.jsx("div",{className:"max-w-lg p-3 px-4 rounded-2xl bg-white/5 text-gray-300",children:S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]})})]}),S.jsx("div",{ref:ne})]}),S.jsxs("footer",{className:"flex-shrink-0 p-4 sm:p-6 border-t border-white/10 bg-gray-900/30 backdrop-blur-lg",children:[O.length>0&&S.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3 justify-end",children:O.map((k,oe)=>S.jsx("button",{onClick:()=>z(k),disabled:w,className:"px-3 py-1.5 text-sm bg-white/10 text-gray-300 rounded-full hover:bg-white/20 transition-colors disabled:opacity-50",children:k},oe))}),L&&S.jsx("p",{className:"text-red-400 text-sm mb-2 text-center",children:L}),S.jsxs("div",{className:"relative flex items-center",children:[S.jsx("textarea",{value:c,onChange:k=>h(k.target.value),onKeyDown:k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),z())},placeholder:"Ask a question...",className:"w-full bg-black/30 border border-white/10 rounded-full py-3 pl-12 pr-14 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none resize-none",rows:1,style:{fieldSizing:"content"},disabled:w}),S.jsxs("label",{className:"absolute left-4 cursor-pointer text-gray-400 hover:text-white transition-colors disabled:opacity-50",children:[S.jsx(gI,{className:"w-5 h-5"}),S.jsx("input",{type:"file",className:"hidden",onChange:U,disabled:w})]}),S.jsx("button",{onClick:()=>z(),disabled:w||!c.trim(),className:"absolute right-3 bg-lime-600 rounded-full p-2 text-white hover:bg-lime-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S.jsx(mI,{className:"w-5 h-5"})})]}),f&&S.jsxs("div",{className:"text-xs text-gray-400 mt-2 flex items-center gap-2 bg-black/30 p-1 px-2 rounded-md w-fit",children:[S.jsx(ZH,{}),S.jsx("span",{children:f.name}),S.jsx("button",{onClick:()=>{p(null),E(null)},className:"text-red-400 hover:text-red-300",children:""})]}),!n&&S.jsx("button",{onClick:()=>s(e.topicId),className:"mt-4 w-full bg-white/10 text-white font-bold py-3 px-4 rounded-lg hover:bg-white/20 transition-colors",children:"Mark as Complete (+2 XP)"})]})]})},r8=({topic:t,isCompleted:e,onSelect:n,isLocked:i})=>S.jsxs("button",{onClick:n,disabled:i,className:"w-full text-left flex items-center justify-between p-3 rounded-lg hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx("span",{className:i?"text-gray-500":"text-gray-300",children:t.topicName}),i?S.jsx(yI,{className:"w-4 h-4 text-gray-500"}):e&&S.jsx(XH,{className:"w-5 h-5 text-lime-500"})]}),s8=({subject:t,userProgress:e,onTopicSelect:n,isLocked:i,isStarterLocked:s,isInitiallyOpen:a})=>{var y;const[l,c]=de.useState(a),h=((y=t.topics)==null?void 0:y.length)||0,f=h>0?t.topics.filter(E=>{var w;return(w=e[E.topicId])==null?void 0:w.isComplete}).length:0,p=h>0?f/h*100:0;return S.jsxs("div",{className:"bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden",children:[S.jsxs("button",{onClick:()=>c(!l),disabled:i,className:"w-full text-left p-4 disabled:opacity-50 disabled:cursor-not-allowed","aria-expanded":l,"aria-controls":`subject-content-${t.subjectId}`,children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h3",{className:`text-lg font-semibold ${i?"text-gray-500":"text-white"}`,children:t.subjectName}),i?S.jsx(yI,{className:"w-5 h-5 text-gray-500"}):S.jsx(N5,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${l?"rotate-180":""}`})]}),!i&&S.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[S.jsx("div",{className:"flex-1 bg-black/30 rounded-full h-2 overflow-hidden",role:"progressbar","aria-valuenow":p,"aria-valuemin":0,"aria-valuemax":100,"aria-valuetext":`${f} of ${h} topics completed`,"aria-label":`${t.subjectName} progress`,children:S.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-lime-500 h-2 rounded-full transition-all duration-500",style:{width:`${p}%`}})}),S.jsxs("span",{className:"text-sm font-medium text-gray-400 w-24 text-right tabular-nums","aria-hidden":"true",children:[f,"/",h," (",Math.round(p),"%)"]})]})]}),S.jsx("div",{id:`subject-content-${t.subjectId}`,className:`transition-all duration-300 ease-in-out overflow-y-auto ${l?"max-h-96":"max-h-0"} [scrollbar-width:none] [&::-webkit-scrollbar]:hidden`,children:S.jsx("div",{className:"px-4 pb-2",children:t.topics.map((E,w)=>{var b;return S.jsx(r8,{topic:E,isCompleted:!!((b=e[E.topicId])!=null&&b.isComplete),onSelect:()=>n(E),isLocked:s&&w>0},E.topicId)})})})]})},o8=({userProfile:t,onStudyXPEarned:e})=>{var F;const[n,i]=de.useState([]),[s,a]=de.useState({}),[l,c]=de.useState(null),[h,f]=de.useState(!0),[p,y]=de.useState(null),[E,w]=de.useState("");de.useEffect(()=>{f(!0);const O=Sn(it,`artifacts/${__app_id}/public/data/courses`,t.courseId),H=eo(O,ne=>{ne.exists()?i(ne.data().subjectList||[]):y("Could not find study materials for your course."),f(!1)},ne=>{console.error("Error fetching course data:",ne),y("Failed to load study guide. Please try again later."),f(!1)}),B=On(it,"users",t.uid,"progress"),X=eo(B,ne=>{const Y={};ne.forEach(R=>{Y[R.id]=R.data()}),a(Y)});return()=>{H(),X()}},[t.uid,t.courseId]);const b=async O=>{var H;if(!((H=s[O])!=null&&H.isComplete))try{const B=Sn(it,"users",t.uid,"progress",O);await Ub(B,{isComplete:!0,xpEarned:2}),await e(2)}catch(B){console.error("Failed to mark topic as complete:",B)}},L=E.trim()===""?n:n.map(O=>{var ne;const H=E.toLowerCase(),B=O.subjectName.toLowerCase().includes(H),X=((ne=O.topics)==null?void 0:ne.filter(Y=>Y.topicName.toLowerCase().includes(H)))||[];return B?O:X.length>0?{...O,topics:X}:null}).filter(O=>O!==null);return l?S.jsx(i8,{userProfile:t,topic:l,isCompleted:!!((F=s[l.topicId])!=null&&F.isComplete),onClose:()=>c(null),onMarkComplete:b}):S.jsxs("div",{className:"flex-1 flex flex-col h-full w-full",children:[h&&S.jsx(n8,{}),p&&S.jsx("p",{className:"text-center text-red-400 p-4 sm:p-6 md:p-8",children:p}),!h&&!p&&S.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[S.jsx("div",{className:"px-4 sm:px-6 md:px-8 pt-4 sm:pt-6 md:pt-8 pb-4",children:S.jsxs("div",{className:"relative",children:[S.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:S.jsx(e8,{className:"text-gray-500"})}),S.jsx("input",{type:"text",placeholder:"Search for a topic...",value:E,onChange:O=>w(O.target.value),className:"w-full bg-black/30 border border-white/10 rounded-full py-3 pl-10 pr-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-lime-500 focus:outline-none"})]})}),S.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:px-6 md:px-8 sm:pt-0 sm:pb-4 space-y-4 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:L.length>0?L.map(O=>{const H=t.plan==="free",B=t.plan==="starter",X=n.findIndex(R=>R.subjectId===O.subjectId),ne=H&&X>0||B&&X>4,Y=H&&X===0;return S.jsx(s8,{subject:O,userProgress:s,onTopicSelect:R=>c({...R,subjectName:O.subjectName}),isLocked:ne,isStarterLocked:Y,isInitiallyOpen:E.length>0},O.subjectId+E)}):S.jsxs("div",{className:"text-center text-gray-400 py-16",children:[S.jsx("h3",{className:"text-lg font-semibold",children:"No results found"}),S.jsxs("p",{children:["Try adjusting your search query for '",E,"'."]})]})})]})]})},fx=new R_({apiKey:void 0}),a8=({className:t="w-4 h-4"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l8=({userProfile:t})=>{const[e,n]=de.useState([]),[i,s]=de.useState(""),[a,l]=de.useState(null),[c,h]=de.useState(null),[f,p]=de.useState(!1),[y,E]=de.useState(null),[w,b]=de.useState([]),[L,F]=de.useState(!1),O=de.useRef(null),{attemptApiCall:H}=A1(t.plan),B="general_chat",X=async R=>{if(!L){F(!0),b([]);try{const P=`Based on this tutor's last message: "${R}", generate three distinct, extremely concise replies for a student. The student's level is "${t.level}". The replies should be things a student would say to continue the conversation. Each reply MUST be a single short sentence, a phrase, or even a single word (e.g., "Why?", "Tell me more", "Okay"). Return a JSON object with a single key "suggestions" containing an array of these 3 short strings.`,D=await fx.models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json",responseSchema:{type:Ft.OBJECT,properties:{suggestions:{type:Ft.ARRAY,items:{type:Ft.STRING},description:"An array of three distinct, extremely concise suggested replies for the student (single sentence, phrase, or one word)."}},required:["suggestions"]}}}),I=JSON.parse(D.text);I.suggestions&&Array.isArray(I.suggestions)&&b(I.suggestions.slice(0,3))}catch(P){console.error("Failed to generate suggestions:",P)}finally{F(!1)}}};de.useEffect(()=>{const R=On(it,"users",t.uid,"conversations",B,"messages"),P=yl(R,_l("timestamp","asc")),D=eo(P,I=>{const U=[];I.forEach(z=>{var oe;const k=z.data();U.push({id:z.id,...k,timestamp:((oe=k.timestamp)==null?void 0:oe.toMillis())||Date.now()})}),n(U)},I=>console.error("Error fetching conversation:",I));return()=>D()},[t.uid]),de.useEffect(()=>{var R;(R=O.current)==null||R.scrollIntoView({behavior:"smooth"})},[e,f]),de.useEffect(()=>{const R=e[e.length-1];(R==null?void 0:R.sender)==="bot"&&!f&&R.text.trim().endsWith("?")?X(R.text):((R==null?void 0:R.sender)==="user"||f)&&b([])},[e,f]);const ne=R=>{var D;const P=(D=R.target.files)==null?void 0:D[0];if(P){l(P);const I=new FileReader;I.onloadend=()=>h(I.result),I.readAsDataURL(P)}},Y=async R=>{const P=R||i;if(!P.trim()||f)return;const I={text:a?`${P}

[Attached file: ${a.name}]`:P,sender:"user",timestamp:Date.now()},U=P,z=a,k=c;s(""),l(null),h(null),p(!0),E(null),b([]);try{const oe=On(it,"users",t.uid,"conversations",B,"messages");await jo(oe,{...I,timestamp:tc()});const me=await H(async()=>{const K=e.map(M=>`${M.sender==="user"?"Student":"Tutor"}: ${M.text}`).join(`
`),he="You are VANTUTOR, a friendly and knowledgeable AI tutor. Your primary goal is to be conversational and interactive. Keep your responses VERY short and break down information into small, digestible chunks. NEVER provide long explanations. Always end your message with a question to check for understanding or to encourage the student to ask the next question. Use Markdown for formatting (lists, bold, etc.) to keep the text engaging and clear.",Ie=[{text:`
    Conversation History:
    ${K}

    Task:
    Continue the conversation based on the student's latest message.
    Student: "${U}"
    `}];if(z&&k){const M=k.split(",")[1];M&&Ie.push({inlineData:{data:M,mimeType:z.type}})}const W={text:(await fx.models.generateContent({model:"gemini-2.5-flash",contents:{parts:Ie},config:{systemInstruction:he}})).text,sender:"bot",timestamp:Date.now()};await jo(oe,{...W,timestamp:tc()})});me.success||E(me.message)}catch(oe){console.error("Error sending message:",oe),E("Sorry, something went wrong. Please try again.")}finally{p(!1)}};return S.jsxs("div",{className:"flex flex-col h-full w-full",children:[S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[e.map(R=>S.jsxs("div",{className:`flex items-start gap-3 ${R.sender==="user"?"justify-end":""}`,children:[R.sender==="bot"&&S.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-lime-400 to-teal-500 flex-shrink-0"}),S.jsx("div",{className:`max-w-[80%] sm:max-w-lg p-3 px-4 rounded-2xl ${R.sender==="user"?"bg-lime-900/70 text-white":"bg-white/5 text-gray-300"}`,children:R.sender==="user"?S.jsx("p",{className:"text-sm whitespace-pre-wrap",children:R.text}):S.jsx("div",{className:"text-sm",children:S.jsx(ZI,{remarkPlugins:[w1],components:{p:({node:P,...D})=>S.jsx("p",{className:"mb-2 last:mb-0",...D}),strong:({node:P,...D})=>S.jsx("strong",{className:"font-bold text-white",...D}),em:({node:P,...D})=>S.jsx("em",{className:"italic",...D}),ul:({node:P,...D})=>S.jsx("ul",{className:"list-disc list-inside space-y-1 my-2",...D}),ol:({node:P,...D})=>S.jsx("ol",{className:"list-decimal list-inside space-y-1 my-2",...D}),li:({node:P,...D})=>S.jsx("li",{className:"text-gray-300",...D}),a:({node:P,...D})=>S.jsx("a",{className:"text-lime-400 hover:underline",target:"_blank",rel:"noopener noreferrer",...D})},children:R.text})})})]},R.id)),f&&S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-lime-400 to-teal-500 flex-shrink-0"}),S.jsx("div",{className:"max-w-lg p-3 px-4 rounded-2xl bg-white/5 text-gray-300",children:S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),S.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"})]})})]}),S.jsx("div",{ref:O})]}),S.jsxs("div",{className:"flex-shrink-0 p-4 sm:p-6 border-t border-white/10 bg-gray-900/30 backdrop-blur-lg",children:[w.length>0&&S.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3 justify-end",children:w.map((R,P)=>S.jsx("button",{onClick:()=>Y(R),disabled:f,className:"px-3 py-1.5 text-sm bg-white/10 text-gray-300 rounded-full hover:bg-white/20 transition-colors disabled:opacity-50",children:R},P))}),y&&S.jsx("p",{className:"text-red-400 text-sm mb-2 text-center",children:y}),S.jsxs("div",{className:"relative",children:[S.jsx("textarea",{value:i,onChange:R=>s(R.target.value),onKeyDown:R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),Y())},placeholder:"Ask anything...",className:"w-full bg-black/30 border border-white/10 rounded-full py-3 pl-12 pr-14 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none resize-none",rows:1,style:{fieldSizing:"content"},disabled:f}),S.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 flex items-center",children:S.jsxs("label",{className:"cursor-pointer text-gray-400 hover:text-white transition-colors disabled:opacity-50",children:[S.jsx(gI,{className:"w-5 h-5"}),S.jsx("input",{type:"file",className:"hidden",onChange:ne,disabled:f})]})}),S.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center",children:S.jsx("button",{onClick:()=>Y(),disabled:f||!i.trim(),className:"bg-lime-600 rounded-full p-2 text-white hover:bg-lime-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S.jsx(mI,{className:"w-5 h-5"})})})]}),a&&S.jsxs("div",{className:"text-xs text-gray-400 mt-2 flex items-center gap-2 bg-black/30 px-2 py-1 rounded-md w-fit",children:[S.jsx(a8,{}),S.jsx("span",{className:"truncate",children:a.name}),S.jsx("button",{onClick:()=>{l(null),h(null)},className:"text-red-400 hover:text-red-300 ml-auto",children:""})]})]})]})},u8=new R_({apiKey:void 0}),c8=30,f8=[{id:"math_algebra_1",name:"Math - Algebra 1"},{id:"science_biology",name:"Science - Biology"},{id:"history_us",name:"History - U.S. History"}],x1=t=>{var e;return((e=f8.find(n=>n.id===t))==null?void 0:e.name)||"your course"},gy=({text:t})=>S.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8",children:[S.jsx("div",{className:"w-12 h-12 border-4 border-t-lime-500 border-gray-600 rounded-full animate-spin"}),S.jsx("p",{className:"mt-4 text-gray-300",children:t})]}),d8=({userProfile:t,onReview:e})=>{const[n,i]=de.useState([]),[s,a]=de.useState(!0);return de.useEffect(()=>{(async()=>{try{const c=On(it,"users",t.uid,"examHistory"),h=yl(c,_l("timestamp","desc")),p=(await nh(h)).docs.map(y=>({id:y.id,...y.data()}));i(p)}catch(c){console.error("Error fetching exam history: ",c)}finally{a(!1)}})()},[t.uid]),s?S.jsx(gy,{text:"Loading exam history..."}):n.length===0?S.jsx("p",{className:"text-gray-400 text-center",children:"You haven't completed any exams yet."}):S.jsx("div",{className:"space-y-4",children:n.map(l=>S.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10 flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-white",children:x1(l.courseId)}),S.jsx("p",{className:"text-sm text-gray-400",children:new Date(l.timestamp).toLocaleString()})]}),S.jsxs("div",{className:"text-right",children:[S.jsxs("p",{className:"font-bold text-lime-400",children:[l.score,"/",l.totalQuestions]}),S.jsx("button",{onClick:()=>e(l),className:"text-sm text-lime-500 hover:underline",children:"Review"})]})]},l.id))})},h8=({userProfile:t,onXPEarned:e,userProgress:n})=>{const[i,s]=de.useState("start"),[a,l]=de.useState([]),[c,h]=de.useState([]),[f,p]=de.useState(0),[y,E]=de.useState(null),[w,b]=de.useState(null),[L,F]=de.useState(0),[O,H]=de.useState(null),[B,X]=de.useState(null),[ne,Y]=de.useState([]),[R,P]=de.useState(!0),[D,I]=de.useState(0),U=de.useRef(c);de.useEffect(()=>{U.current=c},[c]);const z=de.useRef(L);de.useEffect(()=>{z.current=L},[L]),de.useEffect(()=>{(async()=>{P(!0);const G=Object.keys(n).filter(W=>{var M;return(M=n[W])==null?void 0:M.isComplete});if(G.length===0){Y([]),P(!1);return}try{const W=Sn(it,`artifacts/${__app_id}/public/data/courses`,t.courseId),M=await E_(W);if(M.exists()){const se=M.data().subjectList||[],ge=[];se.forEach(Te=>{var Ae;(Ae=Te.topics)==null||Ae.forEach(Re=>{G.includes(Re.topicId)&&ge.push(Re.topicName)})}),Y(ge)}}catch(W){console.error("Error fetching course data for exam generation:",W),X("Could not load topic data to create your exam.")}finally{P(!1)}})()},[n,t.courseId]);const k=de.useCallback(async()=>{s(q=>{if(q!=="in_progress")return q;const G=z.current,W=U.current,M=G*10,se=[...W];for(;se.length<a.length;)se.push("Unanswered");const ge={courseId:t.courseId,score:G,totalQuestions:a.length,xpEarned:M,timestamp:Date.now(),questions:a.map((Ae,Re)=>({...Ae,userAnswer:se[Re],isCorrect:se[Re]===Ae.correctAnswer}))};return(async()=>{try{const Ae=On(it,"users",t.uid,"examHistory");await jo(Ae,ge),e(M)}catch(Ae){console.error("Failed to save exam results:",Ae)}})(),b(null),E(null),"completed"})},[a,t.courseId,t.uid,e]);de.useEffect(()=>{if(i!=="in_progress"||D<=0)return;const q=setInterval(()=>{I(G=>G-1)},1e3);return()=>clearInterval(q)},[i,D]),de.useEffect(()=>{D<=0&&i==="in_progress"&&k()},[D,i,k]);const oe=async()=>{s("generating"),X(null);try{const q=await u8.models.generateContent({model:"gemini-2.5-pro",contents:`Generate 10 multiple-choice questions for a student studying "${x1(t.courseId)}" at a "${t.level}" level, focusing on the following topics they have completed: ${ne.join(", ")}. Ensure the options are distinct and the correct answer is one of the options.`,config:{responseMimeType:"application/json",responseSchema:{type:Ft.OBJECT,properties:{questions:{type:Ft.ARRAY,items:{type:Ft.OBJECT,properties:{question:{type:Ft.STRING},options:{type:Ft.ARRAY,items:{type:Ft.STRING}},correctAnswer:{type:Ft.STRING},explanation:{type:Ft.STRING}},required:["question","options","correctAnswer","explanation"]}}}}}}),G=JSON.parse(q.text);if(G.questions&&G.questions.length>0){const W=G.questions;l(W),I(W.length*c8),s("in_progress")}else throw new Error("Failed to generate valid questions from AI response.")}catch(q){console.error("Error generating exam questions:",q),X("Sorry, we couldn't create an exam for you right now. Please try again in a moment."),s("start")}},me=()=>{l([]),h([]),p(0),E(null),b(null),F(0),s("start"),X(null),I(0)},K=async()=>{if(!y)return;const q=a[f],G=y===q.correctAnswer;h(W=>[...W,y]),G&&F(W=>W+1),b({isCorrect:G,explanation:q.explanation})},he=async()=>{f<a.length-1?(b(null),E(null),p(q=>q+1)):k()},Se=a[f],Ie=()=>{switch(i){case"generating":return S.jsx(gy,{text:"Generating your exam based on completed topics..."});case"in_progress":return S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsxs("p",{className:"text-gray-400",children:["Question ",f+1," of ",a.length]}),S.jsxs("div",{className:"flex items-center gap-2 font-mono text-lg font-bold bg-white/10 px-3 py-1 rounded-lg",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsxs("span",{children:[Math.floor(D/60),":",("0"+D%60).slice(-2)]})]})]}),S.jsx("h3",{className:"text-xl font-semibold text-white mt-2",children:Se.question}),S.jsx("div",{className:"space-y-3 mt-4",children:Se.options.map((W,M)=>S.jsx("button",{onClick:()=>!w&&E(W),className:`w-full text-left p-3 rounded-lg border-2 transition-all duration-200
                    ${w?W===Se.correctAnswer?"bg-green-500/20 border-green-500":W===y?"bg-red-500/20 border-red-500":"bg-white/5 border-white/10":y===W?"bg-lime-500/20 border-lime-500":"bg-white/5 border-white/10 hover:border-lime-500/50"}`,disabled:!!w,children:W},M))}),w&&S.jsxs("div",{className:`mt-4 p-4 rounded-lg ${w.isCorrect?"bg-green-500/10":"bg-red-500/10"}`,children:[S.jsx("h4",{className:`font-bold ${w.isCorrect?"text-green-400":"text-red-400"}`,children:w.isCorrect?"Correct!":"Incorrect"}),S.jsx("p",{className:"text-sm text-gray-300 mt-1",children:w.explanation})]}),S.jsx("div",{className:"mt-6",children:w?S.jsx("button",{onClick:he,className:"w-full bg-lime-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-lime-700 transition-colors",children:f<a.length-1?"Next Question":"Finish Exam"}):S.jsx("button",{onClick:K,disabled:!y,className:"w-full bg-lime-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-lime-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Answer"})})]});case"completed":const q=L*10;return S.jsxs("div",{className:"text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-white",children:"Exam Completed!"}),S.jsx("p",{className:"text-gray-300 mt-2",children:"Here's how you did:"}),S.jsxs("div",{className:"my-6",children:[S.jsxs("p",{className:"text-5xl font-bold text-lime-400",children:[L," / ",a.length]}),S.jsxs("p",{className:"mt-2 text-lg font-semibold text-white",children:["+",q," XP Earned"]})]}),S.jsxs("div",{className:"flex gap-4",children:[S.jsx("button",{onClick:()=>s("history"),className:"flex-1 bg-white/10 text-white font-bold py-3 px-4 rounded-lg hover:bg-white/20 transition-colors",children:"View History"}),S.jsx("button",{onClick:me,className:"flex-1 bg-lime-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-lime-700 transition-colors",children:"Take Another Exam"})]})]});case"history":return S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h3",{className:"text-xl font-bold text-white",children:"Exam History"}),S.jsx("button",{onClick:me,className:"text-lime-500 hover:underline",children:"Back to Exam"})]}),S.jsx(d8,{userProfile:t,onReview:W=>{H(W),s("review")}})]});case"review":return O?S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold text-white",children:"Reviewing Exam"}),S.jsx("p",{className:"text-sm text-gray-400",children:new Date(O.timestamp).toLocaleString()})]}),S.jsx("button",{onClick:()=>s("history"),className:"text-lime-500 hover:underline",children:"Back to History"})]}),S.jsx("div",{className:"space-y-6",children:O.questions.map((W,M)=>S.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[S.jsxs("p",{className:"text-gray-400 text-sm",children:["Question ",M+1]}),S.jsx("p",{className:"font-semibold text-white mt-1",children:W.question}),S.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[S.jsxs("p",{children:[S.jsx("span",{className:"font-semibold text-gray-300",children:"Your Answer: "}),S.jsx("span",{className:W.isCorrect?"text-green-400":"text-red-400",children:W.userAnswer})]}),!W.isCorrect&&S.jsxs("p",{children:[S.jsx("span",{className:"font-semibold text-gray-300",children:"Correct Answer: "}),S.jsx("span",{className:"text-green-400",children:W.correctAnswer})]}),S.jsx("p",{className:"text-gray-400 pt-2 border-t border-white/10 mt-2",children:W.explanation})]})]},M))})]}):null;default:if(R)return S.jsx(gy,{text:"Checking your completed topics..."});const G=ne.length>0;return S.jsxs("div",{className:"text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-white",children:"Ready for your exam?"}),G?S.jsx("p",{className:"text-gray-300 mt-2",children:"You'll be tested on topics you've completed in the Study Guide."}):S.jsx("p",{className:"text-yellow-400 bg-yellow-500/10 p-3 rounded-lg mt-4",children:"Please complete at least one topic in the Study Guide before starting an exam."}),B&&S.jsx("p",{className:"text-red-400 mt-4",children:B}),S.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[S.jsx("button",{onClick:oe,className:"flex-1 bg-lime-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-lime-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!G||R,children:"Start Exam"}),S.jsx("button",{onClick:()=>s("history"),className:"flex-1 bg-white/10 text-white font-bold py-3 px-4 rounded-lg hover:bg-white/20 transition-colors",children:"View Exam History"})]})]})}};return S.jsx("div",{className:"flex-1 flex flex-col h-full w-full",children:S.jsx("div",{className:"flex-1 bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg p-4 sm:p-6 rounded-xl border border-white/10 overflow-y-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:Ie()})})},p8=t=>{const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const n=new Date(Date.UTC(e.getUTCFullYear(),0,1)),i=Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-${i}`},m8=()=>S.jsx("div",{className:"flex justify-center items-center p-8",children:S.jsx("div",{className:"w-8 h-8 border-4 border-t-lime-500 border-gray-600 rounded-full animate-spin"})}),dx=({rank:t,user:e,isCurrentUser:n})=>S.jsxs("div",{className:`flex items-center p-3 rounded-lg transition-all duration-200 border ${n?"bg-lime-900/50 border-lime-500":"bg-gradient-to-r from-white/10 to-white/5 border-transparent"}`,children:[S.jsx("div",{className:"flex-shrink-0 w-8 text-center font-bold text-lg text-gray-400",children:t<=3?S.jsx("span",{className:t===1?"text-yellow-400":t===2?"text-gray-300":"text-yellow-600",children:t}):t}),S.jsx("div",{className:"flex-1 ml-4",children:S.jsx("p",{className:"font-semibold text-white",children:e.displayName})}),S.jsxs("div",{className:"font-bold text-lime-400 text-lg",children:[e.xp.toLocaleString()," XP"]})]}),g8=({userProfile:t})=>{const[e,n]=de.useState("overall"),[i,s]=de.useState([]),[a,l]=de.useState([]),[c,h]=de.useState(!0),[f,p]=de.useState(null);de.useEffect(()=>{h(!0),p(null);const F=On(it,e==="overall"?"leaderboardOverall":"leaderboardWeekly"),O=yl(F,_l("xp","desc"),Pb(100)),H=eo(O,B=>{let X=[];if(B.forEach(ne=>{X.push(ne.data())}),e==="weekly"){const ne=p8(new Date);X=X.filter(Y=>Y.weekId===ne)}e==="overall"?s(X):l(X),h(!1)},B=>{console.error("Error fetching leaderboard: ",B),p("Could not load leaderboard data. Please try again later."),h(!1)});return()=>H()},[e]);const y=e==="overall"?i:a,E=y.findIndex(F=>F.uid===t.uid)+1,w=y.slice(0,10),b=E>0&&E<=10,L=()=>c?S.jsx(m8,{}):f?S.jsx("p",{className:"text-center text-red-400",children:f}):y.length===0?S.jsx("p",{className:"text-center text-gray-400",children:"The leaderboard is empty. Be the first to set a score!"}):S.jsxs("div",{className:"space-y-3",children:[w.map((F,O)=>S.jsx(dx,{rank:O+1,user:F,isCurrentUser:F.uid===t.uid},F.uid)),!b&&E>0&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-center text-gray-500",children:"..."}),S.jsx(dx,{rank:E,user:y[E-1],isCurrentUser:!0})]})]});return S.jsx("div",{className:"flex-1 flex flex-col h-full w-full",children:S.jsxs("div",{className:"flex-1 flex flex-col bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg p-4 sm:p-6 rounded-xl border border-white/10 overflow-y-auto",children:[S.jsxs("div",{className:"flex-shrink-0 mb-4 bg-black/20 p-1 rounded-lg flex",children:[S.jsx("button",{onClick:()=>n("overall"),className:`flex-1 p-2 rounded-md font-semibold transition-colors ${e==="overall"?"bg-lime-600 text-white":"text-gray-400 hover:bg-white/5"}`,children:"Overall"}),S.jsx("button",{onClick:()=>n("weekly"),className:`flex-1 p-2 rounded-md font-semibold transition-colors ${e==="weekly"?"bg-lime-600 text-white":"text-gray-400 hover:bg-white/5"}`,children:"This Week"})]}),S.jsx("div",{className:"flex-1 overflow-y-auto pr-2 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:L()})]})})},y8=({user:t,userProfile:e,onLogout:n,onProfileUpdate:i})=>{const[s,a]=de.useState(!1),[l,c]=de.useState(e.displayName),[h,f]=de.useState(!1),[p,y]=de.useState(null),[E,w]=de.useState(""),[b,L]=de.useState(!0);de.useEffect(()=>{(async()=>{if(!e.courseId){w("Not Set"),L(!1);return}L(!0);try{const B=Sn(it,`artifacts/${__app_id}/public/data/courses`,e.courseId),X=await E_(B);X.exists()?w(X.data().courseName||e.courseId.replace(/_/g," ")):w(e.courseId.replace(/_/g," "))}catch(B){console.error("Failed to fetch course name:",B),w(e.courseId.replace(/_/g," "))}finally{L(!1)}})()},[e.courseId]);const F=async()=>{if(l.trim()===""||l.trim()===e.displayName){a(!1),c(e.displayName);return}f(!0),y(null);const H=await i({displayName:l.trim()});H.success?a(!1):y(H.error||"Failed to save new display name."),f(!1)},O=()=>{a(!1),c(e.displayName),y(null)};return S.jsx("div",{className:"flex-1 flex flex-col h-full w-full",children:S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-8 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[S.jsxs("div",{className:"bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg p-4 sm:p-6 rounded-xl border border-white/10",children:[S.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Profile Information"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"text-gray-400",children:"Display Name"}),s?S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("input",{type:"text",value:l,onChange:H=>c(H.target.value),className:"bg-black/30 border border-white/20 rounded-md py-1 px-2 text-white font-medium focus:ring-1 focus:ring-lime-500 focus:outline-none",disabled:h}),S.jsx("button",{onClick:F,disabled:h||l.trim()==="",className:"text-sm font-semibold text-lime-400 hover:text-lime-300 disabled:opacity-50",children:h?"Saving...":"Save"}),S.jsx("button",{onClick:O,disabled:h,className:"text-sm text-gray-400 hover:text-white disabled:opacity-50",children:"Cancel"})]}):S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("span",{className:"text-white font-medium",children:e.displayName}),S.jsx("button",{onClick:()=>a(!0),className:"text-sm text-lime-500 hover:underline",children:"Edit"})]})]}),p&&S.jsx("p",{className:"text-red-400 text-xs mt-1 text-right",children:p}),S.jsxs("div",{className:"flex justify-between items-center border-t border-white/10 pt-4",children:[S.jsx("span",{className:"text-gray-400",children:"Email"}),S.jsx("span",{className:"text-white font-medium",children:t==null?void 0:t.email})]}),S.jsxs("div",{className:"flex justify-between items-center border-t border-white/10 pt-4",children:[S.jsx("span",{className:"text-gray-400",children:"Current Course"}),S.jsx("span",{className:"text-white font-medium",children:b?"Loading...":E})]}),S.jsxs("div",{className:"flex justify-between items-center border-t border-white/10 pt-4",children:[S.jsx("span",{className:"text-gray-400",children:"Level"}),S.jsx("span",{className:"text-white font-medium",children:e.level})]})]})]}),S.jsxs("div",{className:"bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg p-4 sm:p-6 rounded-xl border border-white/10",children:[S.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Account Actions"}),S.jsx("div",{children:S.jsx("button",{onClick:n,className:"w-full text-left p-3 rounded-lg text-red-400 hover:bg-red-500/20 transition-colors duration-200",children:"Logout"})})]})]})})},C1=({className:t="w-6 h-6"})=>S.jsxs("svg",{className:t,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`}),S.jsx("path",{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`}),S.jsx("path",{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36
	c-5.222,0-9.619-3.317-11.28-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`}),S.jsx("path",{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`})]}),_8=({onSwitchToLogin:t})=>{const[e,n]=de.useState(""),[i,s]=de.useState(""),[a,l]=de.useState(!1),[c,h]=de.useState(!1),[f,p]=de.useState(null),y=async()=>{h(!0),p(null);try{await sC(Wo,zb)}catch(w){w.code!=="auth/popup-closed-by-user"&&(p("Failed to sign in with Google. Please try again."),console.error("Google sign in failed:",w))}finally{h(!1)}},E=async w=>{w.preventDefault(),l(!0),p(null);try{await nM(Wo,e,i)}catch(b){let L="Failed to create an account. Please try again.";b.code==="auth/email-already-in-use"?L="This email is already in use. Please log in instead.":b.code==="auth/invalid-email"?L="Please enter a valid email address.":b.code==="auth/weak-password"&&(L="The password must be at least 6 characters long."),console.error("Sign up failed:",b),p(L)}finally{l(!1)}};return S.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-black p-4",children:S.jsx("div",{className:"w-full max-w-md",children:S.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 sm:p-8 shadow-2xl",children:[S.jsxs("div",{className:"flex justify-center items-center mb-6",children:[S.jsx(vl,{className:"w-12 h-12 text-lime-400"}),S.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-b from-lime-300 to-lime-500 text-transparent bg-clip-text tracking-wider ml-3",children:"VANTUTOR"})]}),S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white tracking-wider",children:"Create Account"}),S.jsx("p",{className:"text-gray-400 mt-2",children:"Join VANTUTOR to start learning."})]}),S.jsxs("form",{onSubmit:E,children:[S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),S.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:w=>n(w.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),S.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:i,onChange:w=>s(w.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none"})]})]}),S.jsx("div",{className:"mt-8",children:S.jsx("button",{type:"submit",disabled:a||c,className:"w-full bg-gradient-to-r from-lime-500 to-teal-500 text-white font-bold py-3 px-4 rounded-lg hover:opacity-90 transition-opacity duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:a?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin mr-2"}),S.jsx("span",{children:"Creating Account..."})]}):"Sign Up"})})]}),S.jsxs("div",{className:"relative flex py-5 items-center",children:[S.jsx("div",{className:"flex-grow border-t border-white/10"}),S.jsx("span",{className:"flex-shrink mx-4 text-gray-400 text-xs uppercase",children:"Or continue with"}),S.jsx("div",{className:"flex-grow border-t border-white/10"})]}),S.jsx("button",{onClick:y,disabled:a||c,className:"w-full bg-white/10 border border-white/20 text-white font-semibold py-3 px-4 rounded-lg hover:bg-white/20 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:c?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin mr-2"}),S.jsx("span",{children:"Signing In..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(C1,{className:"w-5 h-5 mr-3"}),"Sign Up with Google"]})}),f&&S.jsx("p",{className:"text-red-400 text-sm mt-4 text-center",children:f}),S.jsxs("p",{className:"text-center text-sm text-gray-400 mt-6",children:["Already have an account?"," ",S.jsx("button",{onClick:t,className:"font-medium text-lime-400 hover:text-lime-300",children:"Log In"})]})]})})})},v8=({isOpen:t,onClose:e})=>{const[n,i]=de.useState(""),[s,a]=de.useState(!1),[l,c]=de.useState(null),[h,f]=de.useState(null);if(!t)return null;const p=async y=>{y.preventDefault(),a(!0),c(null),f(null);try{await tM(Wo,n),c("A password reset link has been sent to your email address."),i("")}catch(E){E.code==="auth/user-not-found"||E.code==="auth/invalid-email"?f("Could not find an account with that email address."):f("An unexpected error occurred. Please try again."),console.error("Password reset failed:",E)}finally{a(!1)}};return S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 sm:p-8 shadow-2xl w-full max-w-md relative",onClick:y=>y.stopPropagation(),children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors text-2xl","aria-label":"Close",children:""}),S.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-2",children:"Reset Password"}),S.jsx("p",{className:"text-gray-400 text-center mb-6",children:"Enter your email and we'll send you a link to reset your password."}),l?S.jsxs("div",{className:"text-center",children:[S.jsx("p",{className:"text-green-400 bg-green-500/10 p-3 rounded-lg mb-4",children:l}),S.jsx("button",{onClick:e,className:"w-full bg-white/10 text-white font-bold py-3 px-4 rounded-lg hover:bg-white/20 transition-colors",children:"Close"})]}):S.jsxs("form",{onSubmit:p,children:[S.jsx("div",{className:"space-y-4",children:S.jsxs("div",{children:[S.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),S.jsx("input",{id:"reset-email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:y=>i(y.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none"})]})}),h&&S.jsx("p",{className:"text-red-400 text-sm mt-4 text-center",children:h}),S.jsx("div",{className:"mt-6",children:S.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-lime-500 to-teal-500 text-white font-bold py-3 px-4 rounded-lg hover:opacity-90 transition-opacity duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:s?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin mr-2"}),S.jsx("span",{children:"Sending..."})]}):"Send Reset Link"})})]})]})})},T8=({onSwitchToSignUp:t})=>{const[e,n]=de.useState(""),[i,s]=de.useState(""),[a,l]=de.useState(!1),[c,h]=de.useState(!1),[f,p]=de.useState(null),[y,E]=de.useState(!1),w=async()=>{h(!0),p(null);try{await sC(Wo,zb)}catch(L){L.code!=="auth/popup-closed-by-user"&&(p("Failed to sign in with Google. Please try again."),console.error("Google sign in failed:",L))}finally{h(!1)}},b=async L=>{L.preventDefault(),l(!0),p(null);try{await iM(Wo,e,i)}catch(F){let O="An unexpected error occurred. Please try again.";F.code==="auth/invalid-credential"?O="Invalid email or password. Please try again.":F.code==="auth/invalid-email"&&(O="Please enter a valid email address."),console.error("Login failed:",F),p(O)}finally{l(!1)}};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-black p-4",children:S.jsx("div",{className:"w-full max-w-md",children:S.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 sm:p-8 shadow-2xl",children:[S.jsxs("div",{className:"flex justify-center items-center mb-6",children:[S.jsx(vl,{className:"w-12 h-12 text-lime-400"}),S.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-b from-lime-300 to-lime-500 text-transparent bg-clip-text tracking-wider ml-3",children:"VANTUTOR"})]}),S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white tracking-wider",children:"Welcome Back"}),S.jsx("p",{className:"text-gray-400 mt-2",children:"Log in to continue your learning."})]}),S.jsxs("form",{onSubmit:b,children:[S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),S.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:L=>n(L.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none"})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between items-center mb-2",children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),S.jsx("button",{type:"button",onClick:()=>E(!0),className:"text-sm font-medium text-lime-400 hover:text-lime-300 hover:underline focus:outline-none",children:"Forgot Password?"})]}),S.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:L=>s(L.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-lime-500 focus:outline-none"})]})]}),S.jsx("div",{className:"mt-8",children:S.jsx("button",{type:"submit",disabled:a||c,className:"w-full bg-gradient-to-r from-lime-500 to-teal-500 text-white font-bold py-3 px-4 rounded-lg hover:opacity-90 transition-opacity duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:a?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin mr-2"}),S.jsx("span",{children:"Logging In..."})]}):"Log In"})})]}),S.jsxs("div",{className:"relative flex py-5 items-center",children:[S.jsx("div",{className:"flex-grow border-t border-white/10"}),S.jsx("span",{className:"flex-shrink mx-4 text-gray-400 text-xs uppercase",children:"Or continue with"}),S.jsx("div",{className:"flex-grow border-t border-white/10"})]}),S.jsx("button",{onClick:w,disabled:a||c,className:"w-full bg-white/10 border border-white/20 text-white font-semibold py-3 px-4 rounded-lg hover:bg-white/20 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:c?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin mr-2"}),S.jsx("span",{children:"Signing In..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(C1,{className:"w-5 h-5 mr-3"}),"Sign In with Google"]})}),f&&S.jsx("p",{className:"text-red-400 text-sm mt-4 text-center",children:f}),S.jsxs("p",{className:"text-center text-sm text-gray-400 mt-6",children:["Don't have an account?"," ",S.jsx("button",{onClick:t,className:"font-medium text-lime-400 hover:text-lime-300",children:"Sign Up"})]})]})})}),S.jsx(v8,{isOpen:y,onClose:()=>E(!1)})]})},E8="pk_live_9ca8fd7f800eb630f535045b6a0467fc95e47f18",S8=({className:t="w-5 h-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),oc={free:{name:"Free",price:0,features:["Access to 1st subject","Access to 1st topic per subject","5 AI interactions per minute","Standard support"]},starter:{name:"Starter",price:1e3,planCode:"PLN_3s5lsaohhz4qrgg",features:["Access to first 5 subjects","Unlimited topics within subjects","20 AI interactions per minute","Priority email support"],highlight:!0},smart:{name:"Smart",price:3e3,planCode:"PLN_mo4w3qu1nq539h0",features:["Access to all subjects","Unlimited topics","Effectively unlimited AI interactions","24/7 dedicated support"]}},w8=({planKey:t,plan:e,currentPlan:n,onSelectPlan:i,isProcessing:s})=>{const a=t===n,l=oc[n]||oc.free,c=e.price>l.price,h=()=>a?S.jsx("button",{disabled:!0,className:"w-full py-3 px-4 rounded-lg bg-white/10 text-white font-bold cursor-not-allowed",children:"Your Current Plan"}):c?S.jsx("button",{onClick:()=>i(t),disabled:s,className:"w-full py-3 px-4 rounded-lg bg-gradient-to-r from-lime-500 to-teal-500 text-white font-bold hover:opacity-90 transition-opacity duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:s?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin mr-2"}),S.jsx("span",{children:"Processing..."})]}):`Upgrade to ${e.name}`}):S.jsx("button",{disabled:!0,className:"w-full py-3 px-4 rounded-lg bg-white/5 text-gray-500 font-bold cursor-not-allowed",children:"Downgrade not supported"});return S.jsxs("div",{className:`flex flex-col bg-gradient-to-br from-white/[.07] to-white/0 backdrop-blur-lg p-6 rounded-2xl border ${e.highlight?"border-lime-500":"border-white/10"}`,children:[e.highlight&&S.jsx("div",{className:"text-center mb-4 text-sm font-bold text-lime-400 bg-lime-500/10 py-1 px-3 rounded-full self-center",children:"Most Popular"}),S.jsx("h3",{className:"text-2xl font-bold text-white text-center",children:e.name}),S.jsxs("p",{className:"text-center mt-2",children:[S.jsxs("span",{className:"text-4xl font-extrabold text-white",children:["",e.price.toLocaleString()]}),S.jsx("span",{className:"text-gray-400",children:"/month"})]}),S.jsx("ul",{className:"mt-6 space-y-3 flex-grow",children:e.features.map((f,p)=>S.jsxs("li",{className:"flex items-start",children:[S.jsx(S8,{className:"w-5 h-5 text-lime-400 flex-shrink-0 mt-0.5 mr-3"}),S.jsx("span",{className:"text-gray-300",children:f})]},p))}),S.jsx("div",{className:"mt-8",children:h()})]})},A8=({user:t,userProfile:e,onProfileUpdate:n})=>{const[i,s]=de.useState(null),[a,l]=de.useState(null),c=h=>{if(!(t!=null&&t.email)){l("Your email is not available for payment. Please try again or contact support.");return}const f=oc[h];if(!f||!f.planCode){l("Invalid subscription plan selected or plan code is missing.");return}if(typeof PaystackPop>"u"||!PaystackPop){l("Payment service failed to load. Please check your internet connection or try again later."),s(null);return}s(h),l(null),PaystackPop.setup({key:E8,email:t.email,plan:f.planCode,ref:`VANTUTOR-SUB-${t.uid}-${Date.now()}`,async callback(y){if(y.status==="success"){const E=await n({plan:h});E.success||l(E.error||"Payment successful, but we couldn't update your plan. Please contact support.")}else l("Subscription was not successful. Please try again.");s(null)},onClose(){s(null)}}).openIframe()};return S.jsx("div",{className:"flex-1 flex flex-col h-full w-full",children:S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 md:p-8 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[S.jsx("p",{className:"text-center text-gray-300 mb-8 max-w-2xl mx-auto",children:"Choose a plan to unlock more features and accelerate your learning journey with VANTUTOR."}),a&&S.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-300 text-center p-3 rounded-lg mb-6",children:a}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.keys(oc).map(h=>S.jsx(w8,{planKey:h,plan:oc[h],currentPlan:e.plan,onSelectPlan:c,isProcessing:i===h},h))})]})})},x8=t=>{const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const n=new Date(Date.UTC(e.getUTCFullYear(),0,1)),i=Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-${i}`},C8=()=>S.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:S.jsx("div",{className:"w-16 h-16 border-4 border-t-lime-500 border-gray-600 rounded-full animate-spin"})});function b8(){var W;const[t,e]=de.useState(null),[n,i]=de.useState(null),[s,a]=de.useState({}),[l,c]=de.useState(null),[h,f]=de.useState([]),[p,y]=de.useState(!0),[E,w]=de.useState("dashboard"),[b,L]=de.useState(!1),[F,O]=de.useState(!1),[H,B]=de.useState(!1),[X,ne]=de.useState("signup"),Y=de.useRef(null);de.useEffect(()=>{const M=oM(Wo,async se=>{e(se),se||(i(null),a({}),f([]),y(!1))});return()=>M()},[]),de.useEffect(()=>{if(!t)return;let M,se,ge;return(async()=>{const Ae=Sn(it,"users",t.uid);M=eo(Ae,Dt=>{if(Dt.exists()){const yt=Dt.data(),qt={uid:yt.uid,displayName:yt.displayName,courseId:yt.courseId,level:yt.level,totalXP:yt.totalXP||0,totalTestXP:yt.totalTestXP||0,plan:yt.plan||"free",currentStreak:yt.currentStreak||0,lastActivityDate:yt.lastActivityDate||0};i(qt)}else i(null);y(!1)});const Re=On(it,"users",t.uid,"progress");se=eo(Re,Dt=>{const yt={};Dt.forEach(qt=>{yt[qt.id]=qt.data()}),a(yt)});const ze=On(it,"users",t.uid,"notifications"),on=yl(ze,_l("timestamp","desc"));ge=eo(on,Dt=>{const yt=[];Dt.forEach(qt=>{const Nt=qt.data();yt.push({id:qt.id,...Nt})}),f(yt)})})(),()=>{Y.current&&clearTimeout(Y.current),M&&M(),se&&se(),ge&&ge()}},[t]),de.useEffect(()=>(F?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[F]),de.useEffect(()=>{if(!n){c(null);return}(async()=>{try{const se=n.uid,ge=Sn(it,`artifacts/${__app_id}/public/data/courses`,n.courseId),Te=await E_(ge);let Ae=0;Te.exists()&&(Ae=(Te.data().subjectList||[]).reduce((rt,Hn)=>{var us;return rt+(((us=Hn.topics)==null?void 0:us.length)||0)},0));const Re=On(it,"users",se,"examHistory"),ze=yl(Re,_l("timestamp","desc"),Pb(5)),Dt=(await nh(ze)).docs.map(je=>({id:je.id,...je.data()})),yt=new Date,qt=[],Nt=new Map;for(let je=29;je>=0;je--){const rt=new Date(yt);rt.setDate(rt.getDate()-je);const Hn=rt.toISOString().split("T")[0];Nt.set(Hn,0)}const mi=On(it,"users",se,"xpHistory"),Bn=(await nh(mi)).docs.sort((je,rt)=>je.id.localeCompare(rt.id));for(const je of Bn)Nt.has(je.id)&&Nt.set(je.id,je.data().totalCombinedXP);let Qi=0;for(const[je,rt]of Nt.entries())rt===0?Nt.set(je,Qi):Qi=rt,qt.push({date:je,xp:rt});c({totalTopics:Ae,examHistory:Dt,xpHistory:qt})}catch(se){console.error("Failed to fetch dashboard data:",se)}})()},[n]);const R=async M=>{var ge;if(!t)return;const se={uid:t.uid,displayName:t.displayName||((ge=t.email)==null?void 0:ge.split("@")[0])||`user_${t.uid.substring(0,5)}`,...M,totalXP:0,totalTestXP:0,plan:"free",currentStreak:0,lastActivityDate:0};try{const Te=Sn(it,"users",t.uid);await Ub(Te,se);const Ae={type:"welcome",title:"Welcome to VANTUTOR!",message:"We are excited to have you. Explore the Study Guide to get started.",timestamp:Date.now(),isRead:!1,link:"/study_guide"},Re=On(it,"users",t.uid,"notifications");await jo(Re,Ae),i(se)}catch(Te){console.error("Failed to save user profile:",Te)}},P=(M,se)=>async ge=>{if(!t||!n)throw new Error("User not available");const Te=new Date;Te.setHours(0,0,0,0);const Ae=new Date(n.lastActivityDate);Ae.setHours(0,0,0,0);let Re=n.currentStreak;if(Ae.getTime()<Te.getTime()){const Bn=new Date(Te);Bn.setDate(Bn.getDate()-1),Re=Ae.getTime()===Bn.getTime()?Re+1:1}const ze=n.totalXP+n.totalTestXP+M,on=new Date().toISOString().split("T")[0],Dt=x8(new Date),yt=Sn(it,"users",t.uid),qt=Sn(it,"leaderboardOverall",t.uid),Nt=Sn(it,"leaderboardWeekly",t.uid),mi=Sn(it,"users",t.uid,"xpHistory",on);ge.update(yt,{[se?"totalTestXP":"totalXP"]:ew(M),currentStreak:Re,lastActivityDate:Date.now()}),ge.set(qt,{uid:t.uid,displayName:n.displayName,xp:ze},{merge:!0}),ge.set(mi,{totalCombinedXP:ze},{merge:!0});const qn=await ge.get(Nt);return qn.exists()&&qn.data().weekId===Dt?ge.update(Nt,{xp:ew(M)}):ge.set(Nt,{uid:t.uid,displayName:n.displayName,xp:M,weekId:Dt}),Re},D=async M=>{if(!(!t||!n))try{const se=await ig(it,P(M,!1));i(ge=>ge?{...ge,totalXP:ge.totalXP+M,currentStreak:se,lastActivityDate:Date.now()}:null)}catch(se){console.error("Failed to update user Study XP:",se)}},I=async M=>{if(!(!t||!n))try{const se=await ig(it,P(M,!0));i(ge=>ge?{...ge,totalTestXP:ge.totalTestXP+M,currentStreak:se,lastActivityDate:Date.now()}:null)}catch(se){console.error("Failed to update user Test XP:",se)}},U=async M=>{if(!t||!n)return{success:!1,error:"User not authenticated."};try{return await ig(it,async se=>{const ge=Sn(it,"users",t.uid),Te=Sn(it,"leaderboardOverall",t.uid),Ae=Sn(it,"leaderboardWeekly",t.uid);let Re,ze;M.displayName&&(Re=await se.get(Te),ze=await se.get(Ae)),se.update(ge,M),M.displayName&&(Re!=null&&Re.exists()&&se.update(Te,{displayName:M.displayName}),ze!=null&&ze.exists()&&se.update(Ae,{displayName:M.displayName}))}),i(se=>se?{...se,...M}:null),{success:!0}}catch(se){return console.error("Failed to update profile:",se),{success:!1,error:"Could not update profile. Please try again."}}},z=async M=>{if(!t)return;const se=Sn(it,"users",t.uid,"notifications",M);try{await C4(se,{isRead:!0})}catch(ge){console.error("Error marking notification as read:",ge)}},k=async()=>{if(!t)return;const M=h.filter(ge=>!ge.isRead);if(M.length===0)return;const se=k4(it);M.forEach(ge=>{const Te=Sn(it,"users",t.uid,"notifications",ge.id);se.update(Te,{isRead:!0})});try{await se.commit()}catch(ge){console.error("Error marking all notifications as read:",ge)}},oe=M=>{w(M),B(!1)},me=()=>{Y.current&&clearTimeout(Y.current),window.innerWidth>=768&&L(!0)},K=()=>{window.innerWidth>=768&&(Y.current=window.setTimeout(()=>L(!1),300))},he=async()=>{try{await aM(Wo)}catch(M){console.error("Error signing out: ",M)}},Se=()=>{if(!n)return null;switch(E){case"dashboard":return S.jsx(iw,{userProfile:n,userProgress:s,dashboardData:l});case"study_guide":return S.jsx(o8,{userProfile:n,onStudyXPEarned:D});case"chat":return S.jsx(l8,{userProfile:n});case"exam":return S.jsx(h8,{userProfile:n,onXPEarned:I,userProgress:s});case"leaderboard":return S.jsx(g8,{userProfile:n});case"subscription":return S.jsx(A8,{user:t,userProfile:n,onProfileUpdate:U});case"settings":return S.jsx(y8,{user:t,userProfile:n,onLogout:he,onProfileUpdate:U});default:return S.jsx(iw,{userProfile:n,userProgress:s,dashboardData:l})}};if(p)return S.jsx(C8,{});if(!t)return X==="signup"?S.jsx(_8,{onSwitchToLogin:()=>ne("login")}):S.jsx(T8,{onSwitchToSignUp:()=>ne("signup")});if(!n)return S.jsx(G4,{user:t,onOnboardingComplete:R});const q=((W=[...Jg,...Kg].find(M=>M.id===E))==null?void 0:W.label)||"Dashboard",G=h.filter(M=>!M.isRead).length;return S.jsxs("div",{className:"h-screen bg-gradient-to-br from-gray-900 to-black text-white font-sans md:p-6 lg:p-8 flex md:gap-6 lg:gap-8",children:[S.jsx(V4,{activeItem:E,onItemClick:oe,isExpanded:b,onMouseEnter:me,onMouseLeave:K,displayName:n.displayName,onLogout:he,isMobileSidebarOpen:F,onCloseMobileSidebar:()=>O(!1)}),S.jsxs("main",{className:"flex-1 bg-white/5 backdrop-blur-xl md:border border-white/10 md:rounded-2xl flex flex-col relative overflow-hidden",children:[S.jsx(O4,{currentPageLabel:q,onNotificationsClick:()=>B(M=>!M),unreadCount:G,onMenuClick:()=>O(!0)}),S.jsx(q4,{notifications:h,isOpen:H,onClose:()=>B(!1),onMarkAllAsRead:k,onMarkAsRead:z}),S.jsx("div",{className:"flex-1 min-h-0",children:Se()})]})]})}const b1=document.getElementById("root");if(!b1)throw new Error("Could not find root element to mount to");const I8=pN.createRoot(b1);I8.render(S.jsx(Gi.StrictMode,{children:S.jsx(b8,{})}));
